{"version":3,"sources":["jsdelivr-header.js","/npm/darkreader@4.9.40/darkreader.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA,CCDA,SAAW,EAAQ,GACI,iBAAZ,SAA0C,oBAAX,OAAyB,EAAQ,SACrD,mBAAX,QAAyB,OAAO,IAAM,OAAO,CAAC,WAAY,GACU,GAA1E,EAA+B,oBAAf,WAA6B,WAAa,GAAU,MAAqB,WAAa,IAH3G,CAIG,MAAM,SAAW,GAAW;;;;;;;;;;;;;;oFAiB3B,IAAI,EAAW,WAQX,OAPA,EAAW,OAAO,QAAU,SAAkB,GAC1C,IAAK,IAAI,EAAG,EAAI,EAAG,EAAI,UAAU,OAAQ,EAAI,EAAG,IAE5C,IAAK,IAAI,KADT,EAAI,UAAU,GACO,OAAO,UAAU,eAAe,KAAK,EAAG,KAAI,EAAE,GAAK,EAAE,IAE9E,OAAO,GAEJ,EAAS,MAAM,KAAM,YAGhC,SAAS,EAAU,EAAS,EAAY,EAAG,GAEvC,OAAO,IAAK,IAAM,EAAI,WAAU,SAAU,EAAS,GAC/C,SAAS,EAAU,GAAS,IAAM,EAAK,EAAU,KAAK,IAAW,MAAO,GAAK,EAAO,IACpF,SAAS,EAAS,GAAS,IAAM,EAAK,EAAiB,MAAE,IAAW,MAAO,GAAK,EAAO,IACvF,SAAS,EAAK,GAJlB,IAAe,EAIa,EAAO,KAAO,EAAQ,EAAO,QAJ1C,EAIyD,EAAO,MAJhD,aAAiB,EAAI,EAAQ,IAAI,GAAE,SAAU,GAAW,EAAQ,OAIT,KAAK,EAAW,GAClG,GAAM,EAAY,EAAU,MAAM,EAAS,GAAc,KAAK,WAItE,SAAS,EAAY,EAAS,GAC1B,IAAsG,EAAG,EAAG,EAAG,EAA3G,EAAI,CAAE,MAAO,EAAG,KAAM,WAAa,GAAW,EAAP,EAAE,GAAQ,MAAM,EAAE,GAAI,OAAO,EAAE,IAAO,KAAM,GAAI,IAAK,IAChG,OAAO,EAAI,CAAE,KAAM,EAAK,GAAI,MAAS,EAAK,GAAI,OAAU,EAAK,IAAwB,mBAAX,SAA0B,EAAE,OAAO,UAAY,WAAa,OAAO,OAAU,EACvJ,SAAS,EAAK,GAAK,OAAO,SAAU,GAAK,OACzC,SAAc,GACV,GAAI,EAAG,MAAM,IAAI,UAAU,mCAC3B,KAAO,OACH,GAAI,EAAI,EAAG,IAAM,EAAY,EAAR,EAAG,GAAS,EAAU,OAAI,EAAG,GAAK,EAAS,SAAO,EAAI,EAAU,SAAM,EAAE,KAAK,GAAI,GAAK,EAAE,SAAW,EAAI,EAAE,KAAK,EAAG,EAAG,KAAK,KAAM,OAAO,EAE3J,OADI,EAAI,EAAG,IAAG,EAAK,CAAS,EAAR,EAAG,GAAQ,EAAE,QACzB,EAAG,IACP,KAAK,EAAG,KAAK,EAAG,EAAI,EAAI,MACxB,KAAK,EAAc,OAAX,EAAE,QAAgB,CAAE,MAAO,EAAG,GAAI,MAAM,GAChD,KAAK,EAAG,EAAE,QAAS,EAAI,EAAG,GAAI,EAAK,CAAC,GAAI,SACxC,KAAK,EAAG,EAAK,EAAE,IAAI,MAAO,EAAE,KAAK,MAAO,SACxC,QACI,KAAM,EAAI,EAAE,MAAM,EAAI,EAAE,OAAS,GAAK,EAAE,EAAE,OAAS,KAAkB,IAAV,EAAG,IAAsB,IAAV,EAAG,IAAW,CAAE,EAAI,EAAG,SACjG,GAAc,IAAV,EAAG,MAAc,GAAM,EAAG,GAAK,EAAE,IAAM,EAAG,GAAK,EAAE,IAAM,CAAE,EAAE,MAAQ,EAAG,GAAI,MAC9E,GAAc,IAAV,EAAG,IAAY,EAAE,MAAQ,EAAE,GAAI,CAAE,EAAE,MAAQ,EAAE,GAAI,EAAI,EAAI,MAC7D,GAAI,GAAK,EAAE,MAAQ,EAAE,GAAI,CAAE,EAAE,MAAQ,EAAE,GAAI,EAAE,IAAI,KAAK,GAAK,MACvD,EAAE,IAAI,EAAE,IAAI,MAChB,EAAE,KAAK,MAAO,SAEtB,EAAK,EAAK,KAAK,EAAS,GAC1B,MAAO,GAAK,EAAK,CAAC,EAAG,GAAI,EAAI,EAAK,QAAU,EAAI,EAAI,EACtD,GAAY,EAAR,EAAG,GAAQ,MAAM,EAAG,GAAI,MAAO,CAAE,MAAO,EAAG,GAAK,EAAG,QAAK,EAAQ,MAAM,GArB9B,CAAK,CAAC,EAAG,MAyB7D,SAAS,EAAS,GACd,IAAI,EAAsB,mBAAX,QAAyB,OAAO,SAAU,EAAI,GAAK,EAAE,GAAI,EAAI,EAC5E,GAAI,EAAG,OAAO,EAAE,KAAK,GACrB,GAAI,GAAyB,iBAAb,EAAE,OAAqB,MAAO,CAC1C,KAAM,WAEF,OADI,GAAK,GAAK,EAAE,SAAQ,OAAI,GACrB,CAAE,MAAO,GAAK,EAAE,KAAM,MAAO,KAG5C,MAAM,IAAI,UAAU,EAAI,0BAA4B,mCAGxD,SAAS,EAAO,EAAG,GACf,IAAI,EAAsB,mBAAX,QAAyB,EAAE,OAAO,UACjD,IAAK,EAAG,OAAO,EACf,IAAmB,EAAY,EAA3B,EAAI,EAAE,KAAK,GAAO,EAAK,GAC3B,IACI,WAAc,IAAN,GAAgB,KAAM,MAAQ,EAAI,EAAE,QAAQ,MAAM,EAAG,KAAK,EAAE,OAExE,MAAO,GAAS,EAAI,CAAE,MAAO,GAC7B,QACI,IACQ,IAAM,EAAE,OAAS,EAAI,EAAU,SAAI,EAAE,KAAK,GAElD,QAAU,GAAI,EAAG,MAAM,EAAE,OAE7B,OAAO,EAGX,SAAS,EAAc,EAAI,EAAM,GAC7B,GAAI,GAA6B,IAArB,UAAU,OAAc,IAAK,IAA4B,EAAxB,EAAI,EAAG,EAAI,EAAK,OAAY,EAAI,EAAG,KACxE,GAAQ,KAAK,IACR,IAAI,EAAK,MAAM,UAAU,MAAM,KAAK,EAAM,EAAG,IAClD,EAAG,GAAK,EAAK,IAGrB,OAAO,EAAG,OAAO,GAAM,MAAM,UAAU,MAAM,KAAK,IAGtD,IAAI,EA4BmB,oBA5BnB,EAqCU,WAGV,EAAiC,oBAAd,UAA4B,iBAAmB,UAAU,UAAU,cACtF,EAAgC,oBAAd,UAA4B,gBAAkB,UAAU,SAAS,cACnF,EAAa,EAAU,SAAS,WAAa,EAAU,SAAS,YAChE,EAAgB,EAAU,SAAS,eACnC,EAAY,EAAU,SAAS,YAAc,EACjD,EAAU,SAAS,WACnB,EAAU,SAAS,aACnB,EAAU,SAAS,QAAU,EAAU,SAAS,SAChD,EAAU,SAAS,OACnB,IAAI,EAAW,EAAU,SAAS,YAAc,EAC5C,EAAY,EAAS,WAAW,OAChC,EAAU,EAAS,WAAW,OAClC,EAAU,SAAS,UACnB,IAIQ,EAJJ,EAA6C,mBAAf,WAC9B,EAAsE,mBAAnB,gBACE,mBAA9C,eAAe,UAAU,kBAE5B,EAAI,EAAU,MAAM,2BACf,EAAE,IACA,EAAE,GAIjB,IAAI,EAA6B,WAC7B,IAEI,OADA,SAAS,cAAc,aAChB,EAEX,MAAO,GACH,OAAO,GANkB,GAWjC,SAAS,EAAc,EAAK,EAAU,GAClC,OAAO,EAAU,UAAM,OAAQ,GAAQ,WACnC,IAAI,EACJ,OAAO,EAAY,MAAM,SAAU,GAC/B,OAAQ,EAAG,OACP,KAAK,EAAG,MAAO,CAAC,EAAG,MAAM,EAAK,CACtB,MAAO,cACP,YAAa,OACb,SAAU,KAElB,KAAK,EAED,GADA,EAAW,EAAG,OACV,GAA0B,aAAb,GAA2B,EAAI,WAAW,qBAAuB,EAAI,SAAS,QAC3F,MAAO,CAAC,EAAG,GAEf,GAAI,IAAa,EAAS,QAAQ,IAAI,gBAAgB,WAAW,GAC7D,MAAM,IAAI,MAAM,mCAAqC,GAEzD,IAAK,EAAS,GACV,MAAM,IAAI,MAAM,kBAAoB,EAAM,IAAM,EAAS,OAAS,IAAM,EAAS,YAErF,MAAO,CAAC,EAAG,UAK/B,SAAS,EAAc,EAAK,GACxB,OAAO,EAAU,UAAM,OAAQ,GAAQ,WAEnC,OAAO,EAAY,MAAM,SAAU,GAC/B,OAAQ,EAAG,OACP,KAAK,EAAG,MAAO,CAAC,EAAG,EAAc,EAAK,IACtC,KAAK,EAED,MAAO,CAAC,EAAG,EADA,EAAG,SAElB,KAAK,EAAG,MAAO,CAAC,EAAG,EAAG,eAKtC,SAAS,EAAsB,GAC3B,OAAO,EAAU,UAAM,OAAQ,GAAQ,WACnC,IAAI,EACJ,OAAO,EAAY,MAAM,SAAU,GAC/B,OAAQ,EAAG,OACP,KAAK,EAAG,MAAO,CAAC,EAAG,EAAS,QAC5B,KAAK,EAED,OADA,EAAO,EAAG,OACH,CAAC,EAAG,IAAK,SAAQ,SAAU,GAC1B,IAAI,EAAS,IAAI,WACjB,EAAO,UAAY,WAAc,OAAO,EAAQ,EAAO,SACvD,EAAO,cAAc,OAEjC,KAAK,EAED,MAAO,CAAC,EADE,EAAG,eAxDjC,WAAW,QAAU,WAAW,OAAO,SAAW,WAAW,OAAO,QAAQ,aAAe,WAAW,OAAO,QAAQ,cAAc,iBA+DnI,IAAI,EAAiB,SAAU,GAAO,OAAO,OAAU,OAAQ,OAAQ,GAAQ,WAC3E,OAAO,EAAY,MAAM,SAAU,GAC/B,MAAO,CAAC,EAAG,QAAQ,OAAO,IAAI,MAAM,CAC5B,6DACA,EACA,8CACA,mEACA,yDACA,uCACF,KAAK,eAGf,EAAU,EASd,SAAS,EAAgB,GACrB,OAAO,EAAU,UAAM,OAAQ,GAAQ,WACnC,OAAO,EAAY,MAAM,SAAU,GAC/B,OAAQ,EAAG,OACP,KAAK,EAAG,MAAO,CAAC,EAAG,EAAQ,IAC3B,KAAK,EAAG,MAAO,CAAC,EAAG,EAAG,eAMjC,OAAO,SACR,OAAO,OAAS,IAEf,OAAO,UACR,OAAO,QAAU,IAErB,IAAI,EAAmB,IAAI,IAC3B,SAAS,IAEL,IADA,IAAI,EAAO,GACF,EAAK,EAAG,EAAK,UAAU,OAAQ,IACpC,EAAK,GAAM,UAAU,GAEzB,OAAO,EAAU,UAAM,OAAQ,GAAQ,WACnC,IAAI,EAAM,EAAI,EAAK,EAAc,EAAU,EAAQ,EACnD,OAAO,EAAY,MAAM,SAAU,GAC/B,OAAQ,EAAG,OACP,KAAK,EACD,IAAM,EAAK,IAAM,EAAK,GAAG,OAAS,EAAuB,MAAO,CAAC,EAAG,GACpE,EAAO,EAAK,GAAG,GACf,EAAG,MAAQ,EACf,KAAK,EAGD,OAFA,EAAG,KAAK,KAAK,CAAC,EAAG,EAAG,CAAE,IACtB,EAAK,EAAK,GAAG,KAAM,EAAM,EAAG,IAAK,EAAe,EAAG,aAC5C,CAAC,EAAG,EAAgB,IAC/B,KAAK,EAED,OADA,EAAW,EAAG,OACS,aAAjB,EAAqC,CAAC,EAAG,GACxC,CAAC,EAAG,EAAsB,IACrC,KAAK,EAED,OADA,EAAS,EAAG,OACL,CAAC,EAAG,GACf,KAAK,EAAG,MAAO,CAAC,EAAG,EAAS,QAC5B,KAAK,EACD,EAAS,EAAG,OACZ,EAAG,MAAQ,EACf,KAAK,EAED,OADA,EAAiB,SAAQ,SAAU,GAAM,OAAO,EAAG,CAAE,KAAM,EAA+B,KAAM,EAAQ,MAAO,KAAM,GAAI,OAClH,CAAC,EAAG,GACf,KAAK,EAID,OAHA,EAAU,EAAG,OACb,QAAQ,MAAM,GACd,EAAiB,SAAQ,SAAU,GAAM,OAAO,EAAG,CAAE,KAAM,EAA+B,KAAM,KAAM,MAAO,EAAS,GAAI,OACnH,CAAC,EAAG,GACf,KAAK,EAAG,MAAO,CAAC,UAKhC,SAAS,EAAmB,GACxB,EAAiB,IAAI,GAEzB,GAA0C,mBAA/B,OAAO,QAAQ,YAA4B,CAClD,IAAI,EAAsB,OAAO,QAAQ,YACzC,OAAO,QAAQ,YAAc,WAEzB,IADA,IAAI,EAAO,GACF,EAAK,EAAG,EAAK,UAAU,OAAQ,IACpC,EAAK,GAAM,UAAU,GAEzB,EAAY,WAAM,EAAQ,EAAc,GAAI,EAAO,IAAO,IAC1D,EAAoB,MAAM,OAAO,QAAS,SAI9C,OAAO,QAAQ,YAAc,EAKjC,GAHK,OAAO,QAAQ,YAChB,OAAO,QAAQ,UAAY,IAEqB,mBAAzC,OAAO,QAAQ,UAAU,YAA4B,CAC5D,IAAI,EAAsB,OAAO,QAAQ,UAAU,YACnD,OAAO,QAAQ,UAAU,YAAc,WAEnC,IADA,IAAI,EAAO,GACF,EAAK,EAAG,EAAK,UAAU,OAAQ,IACpC,EAAK,GAAM,UAAU,GAEzB,EAAmB,EAAK,IACxB,EAAoB,MAAM,OAAO,QAAQ,UAAW,SAIxD,OAAO,QAAQ,UAAU,YAAc,WAEnC,IADA,IAAI,EAAO,GACF,EAAK,EAAG,EAAK,UAAU,OAAQ,IACpC,EAAK,GAAM,UAAU,GAEzB,OAAO,EAAmB,EAAK,KAIvC,IAAI,EAIc,eAGd,EACY,CACR,WAAY,UACZ,KAAM,WAHV,EAKa,CACT,WAAY,UACZ,KAAM,WAGV,EAAgB,CAChB,KAAM,EACN,WAAY,IACZ,SAAU,IACV,UAAW,EACX,MAAO,EACP,SAAS,EACT,WAAY,EAAU,iBAAmB,EAAY,WAAa,YAClE,WAAY,EACZ,OAAQ,EACR,WAAY,GACZ,0BAA2B,EAA0B,WACrD,oBAAqB,EAA0B,KAC/C,2BAA4B,EAA2B,WACvD,qBAAsB,EAA2B,KACjD,eAAgB,EAAU,GAAK,OAC/B,eAAgB,OAChB,qBAAqB,EACrB,iBAAkB,UAClB,gBAAiB,WAMrB,SAAS,EAAQ,EAAO,GACpB,IAAI,EAAK,EACT,GALJ,SAAqB,GACjB,OAAuB,MAAhB,EAAM,OAIT,CAAY,GACZ,IAAK,IAAI,EAAI,EAAG,EAAM,EAAM,OAAQ,EAAI,EAAK,IACzC,EAAS,EAAM,SAInB,IACI,IAAK,IAAI,EAAU,EAAS,GAAQ,EAAY,EAAQ,QAAS,EAAU,KAAM,EAAY,EAAQ,OAAQ,CAEzG,EADW,EAAU,QAI7B,MAAO,GAAS,EAAM,CAAE,MAAO,GAC/B,QACI,IACQ,IAAc,EAAU,OAAS,EAAK,EAAQ,SAAS,EAAG,KAAK,GAEvE,QAAU,GAAI,EAAK,MAAM,EAAI,QAIzC,SAAS,EAAK,EAAO,GACjB,EAAQ,GAAU,SAAU,GAAK,OAAO,EAAM,KAAK,MAUvD,SAAS,IAEL,IADA,IAAI,EAAO,GACF,EAAK,EAAG,EAAK,UAAU,OAAQ,IACpC,EAAK,GAAM,UAAU,GAG7B,SAAS,IAEL,IADA,IAAI,EAAO,GACF,EAAK,EAAG,EAAK,UAAU,OAAQ,IACpC,EAAK,GAAM,UAAU,GAI7B,SAAS,EAAS,GACd,IAEI,EAFA,GAAU,EACV,EAAU,KA2Bd,OAAO,OAAO,QAzBE,WAEZ,IADA,IAAI,EAAO,GACF,EAAK,EAAG,EAAK,UAAU,OAAQ,IACpC,EAAK,GAAM,UAAU,GAEzB,EAAW,EACP,EACA,GAAU,GAGV,EAAS,WAAM,EAAQ,EAAc,GAAI,EAAO,IAAW,IAC3D,EAAU,uBAAsB,WAC5B,EAAU,KACN,IACA,EAAS,WAAM,EAAQ,EAAc,GAAI,EAAO,IAAW,IAC3D,GAAU,SAUM,CAAE,OALrB,WACT,qBAAqB,GACrB,GAAU,EACV,EAAU,QA4BlB,SAAS,EAAY,GACjB,IAAI,EAAW,EAaf,OAZI,EAAK,UACL,GAA2B,IAAf,EAAK,SAEjB,EAAK,UACL,GAA2B,GAAf,EAAK,QAAe,KAEhC,EAAK,QACL,GAAyB,GAAb,EAAK,MAAa,GAAK,KAEnC,EAAK,OACL,GAAwB,GAAZ,EAAK,KAAY,GAAK,GAAK,KAEpC,EAGX,SAAS,EAAW,GAChB,GAAQ,EAAK,YAAc,EAAK,WAAW,YAAY,GAE3D,SAAS,EAAqB,EAAM,EAAM,QACpB,IAAd,IAAwB,EAAY,SAAS,WACjD,IACI,EAAgB,EAAY,CAAE,QAAS,IACvC,EAAoB,EAAY,CAAE,QAAS,KAC3C,EAAc,EAAK,gBACnB,EAAS,EAAK,WAClB,IAAK,EACD,MAAM,IAAI,MAAM,+DAEpB,GAAa,iBAAT,IAA4B,EAC5B,MAAM,IAAI,MAAM,mEAEpB,IAAI,EAAW,EACX,EAAQ,KACR,EAAY,KACZ,EAAU,GAAS,WACnB,IAAI,EAAJ,CAGA,IACA,IAAI,EAAM,KAAK,MACf,GAAa,MAAT,EACA,EAAQ,OAEP,GAAI,GAvBY,GAuBoB,CACrC,GAAI,EAAM,EAAQ,EAQd,OAPA,EAAQ,0CAA4C,EAAgB,KAAM,EAAM,QAChF,EAAY,YAAW,WACnB,EAAQ,KACR,EAAW,EACX,EAAY,KACZ,MACD,IAGP,EAAQ,EACR,EAAW,EAEf,GAAa,WAAT,GACI,GAAe,EAAY,aAAe,EAG1C,OAFA,EAAQ,0DAA2D,EAAM,EAAa,QACtF,IAIR,GAAa,iBAAT,EAAyB,CACzB,GAA8B,MAA1B,EAAY,WAGZ,OAFA,EAAQ,uDAAwD,EAAM,EAAa,QACnF,IAGA,EAAY,aAAe,IAC3B,EAAQ,oCAAqC,EAAM,EAAa,GAChE,EAAa,EAAY,aAGjC,EAAQ,0BAA2B,EAAM,EAAa,GACtD,EAAO,aAAa,EAAM,EAAc,EAAY,YAAc,EAAO,YACzE,EAAS,cACT,GAAa,QAEb,EAAW,IAAI,kBAAiB,YAClB,WAAT,GAAqB,EAAK,aAAe,GAChC,iBAAT,GAA2B,EAAK,kBAAoB,IACrD,OAGJ,EAAM,WACN,EAAS,QAAQ,EAAQ,CAAE,WAAW,KAEtC,EAAO,WACP,aAAa,GACb,EAAS,aACT,EAAQ,UAKR,EAAe,SAAU,GACzB,EAAS,EACT,IACA,KAGJ,OADA,IACO,CAAE,IAAK,EAAK,KAAM,EAAM,KATpB,WACP,EAAS,gBAUjB,SAAS,EAAmB,EAAM,GAC9B,GAAY,MAAR,EAQJ,IALA,IAAI,EAAS,SAAS,iBAAiB,EAAM,WAAW,aAAc,CAClE,WAAY,SAAU,GAClB,OAA0B,MAAnB,EAAK,WAAqB,WAAW,YAAc,WAAW,iBAGpE,EAAQ,EAAK,WAAa,EAAO,YAAc,EAAO,WAAqB,MAAR,EAAc,EAAO,EAAO,WACpG,EAAS,GACT,EAAmB,EAAK,WAAY,GAG5C,SAAS,IACL,MAA+B,aAAxB,SAAS,YAAqD,gBAAxB,SAAS,WAE1D,IAAI,EAAsB,IAAI,IAC9B,SAAS,EAAoB,GACzB,EAAoB,IAAI,GAE5B,SAAS,EAAuB,GAC5B,EAAoB,OAAO,GAE/B,SAAS,IACL,MAA+B,aAAxB,SAAS,WAEpB,IAAI,EAA8B,IAAI,IACtC,SAAS,EAA8B,GACnC,EAA4B,IAAI,GAKpC,IAAK,IAAc,CACf,IAAI,EAAuB,WACnB,MACA,EAAoB,SAAQ,SAAU,GAAY,OAAO,OACzD,EAAoB,QAChB,MACA,SAAS,oBAAoB,mBAAoB,GACjD,EAA4B,SAAQ,SAAU,GAAY,OAAO,OACjE,EAA4B,WAIxC,SAAS,iBAAiB,mBAAoB,GAsDlD,IA4DI,EA5DA,GAAyB,IAAI,IAC7B,GAAyB,IAAI,QACjC,SAAS,GAA4B,EAAM,GACvC,IAAI,EACA,EACA,EACJ,GAAI,GAAuB,IAAI,GAC3B,EAAW,GAAuB,IAAI,GACtC,EAAoB,GAAuB,IAAI,OAE9C,CACD,IAAI,GAA2B,EAC3B,GAA4B,EAChC,EAAW,IAAI,kBAAiB,SAAU,GACtC,GAjEZ,SAAwB,GACpB,GAAI,EAAU,OAFS,IAGnB,OAAO,EAGX,IADA,IAAI,EAAkB,EACb,EAAI,EAAG,EAAI,EAAU,OAAQ,IAElC,IADA,GAAmB,EAAU,GAAG,WAAW,QAPxB,IASf,OAAO,EAGf,OAAO,EAsDK,CAAe,IACV,GAA4B,IAC7B,EAAkB,SAAQ,SAAU,GAEhC,OAAO,EADe,EAAG,iBACF,MAGrB,IAKN,EAJA,EAAmB,WAAc,OAAO,EAAkB,SAAQ,SAAU,GAExE,OAAO,EADe,EAAG,iBACF,QAG3B,GAA4B,GAEhC,GAA2B,MAE1B,CACD,IAAI,EAtEpB,SAAmC,GAC/B,IAAI,EAAY,IAAI,IAChB,EAAY,IAAI,IAChB,EAAQ,IAAI,IAChB,EAAU,SAAQ,SAAU,GACxB,EAAQ,EAAE,YAAY,SAAU,GACxB,aAAa,SAAW,EAAE,aAC1B,EAAU,IAAI,MAGtB,EAAQ,EAAE,cAAc,SAAU,GAC1B,aAAa,UACT,EAAE,aACF,EAAM,IAAI,GACV,EAAU,OAAO,IAGjB,EAAU,IAAI,UAK9B,IAAI,EAAqB,GACrB,EAAqB,GAazB,OAZA,EAAU,SAAQ,SAAU,GACpB,EAAU,IAAI,EAAK,gBACnB,EAAmB,KAAK,MAGhC,EAAU,SAAQ,SAAU,GACpB,EAAU,IAAI,EAAK,gBACnB,EAAmB,KAAK,MAGhC,EAAmB,SAAQ,SAAU,GAAQ,OAAO,EAAU,OAAO,MACrE,EAAmB,SAAQ,SAAU,GAAQ,OAAO,EAAU,OAAO,MAC9D,CAAE,UAAW,EAAW,MAAO,EAAO,UAAW,GAkCjB,CAA0B,GACrD,EAAkB,SAAQ,SAAU,GAEhC,OAAO,EADgB,EAAG,kBACF,UAIpC,EAAS,QAAQ,EAAM,CAAE,WAAW,EAAM,SAAS,IACnD,GAAuB,IAAI,EAAM,GACjC,EAAoB,IAAI,IACxB,GAAuB,IAAI,EAAU,GAGzC,OADA,EAAkB,IAAI,GACf,CACH,WAAY,WACR,EAAkB,OAAO,GACrB,GACA,EAAuB,GAEI,IAA3B,EAAkB,OAClB,EAAS,aACT,GAAuB,OAAO,GAC9B,GAAuB,OAAO,MAO9C,IAAI,GAAiB,IAAI,IACzB,SAAS,GAAW,GAKhB,OAJK,IACD,EAAS,SAAS,cAAc,MAEpC,EAAO,KAAO,EACP,EAAO,KAElB,SAAS,GAAS,EAAM,QACN,IAAV,IAAoB,EAAQ,MAChC,IAAI,EAAW,GAAQ,EAAQ,IAAM,EAAQ,IAC7C,GAAI,GAAe,IAAI,GACnB,OAAO,GAAe,IAAI,GAE9B,GAAI,EAAO,CACP,IAAI,EAAc,IAAI,IAAI,EAAM,GAAW,IAE3C,OADA,GAAe,IAAI,EAAK,GACjB,EAEX,IAAI,EAAY,IAAI,IAAI,GAAW,IAEnC,OADA,GAAe,IAAI,EAAM,GAClB,EAEX,SAAS,GAAe,EAAO,GAC3B,GAAI,EAAU,MAAM,cAChB,OAAO,EAEX,GAAI,QAAQ,KAAK,GACb,MAAO,GAAK,SAAS,SAAW,EAEpC,IAAI,EAAI,GAAS,GAEjB,OADQ,GAAS,EAAW,EAAE,MACrB,KAEb,SAAS,GAA6B,GAClC,GAAI,EAAK,WAAW,SAChB,OAAO,EAEX,IAAI,EAAM,GAAS,GACf,EAAO,GAAS,SAAS,MAC7B,OAAI,EAAI,WAAa,EAAK,WAGtB,EAAI,WAAa,EAAK,WAGtB,EAAI,OAAS,EAAK,MAGX,OAAO,KAAK,EAAI,UAAU,KACtB,OAAO,KAAK,EAAK,UAAU,KAI9C,SAAS,GAAgB,EAAO,EAAS,GACrC,EAAQ,GAAO,SAAU,GACrB,GAAI,EAAK,aACL,EAAQ,QAEP,GAAI,EAAK,KACV,IACI,GAAgB,EAAK,WAAW,SAAU,EAAS,GAEvD,MAAO,GACH,EAAQ,4BACR,GAAoB,SAGvB,GAAI,EAAK,MAAO,CACjB,IAAI,EAAQ,MAAM,KAAK,EAAK,OACxB,EAAgB,EAAM,MAAK,SAAU,GAAK,OAAO,EAAE,WAAW,WAAa,EAAE,WAAW,UACxF,EAAkB,EAAM,MAAK,SAAU,GAAK,OAAO,EAAE,WAAW,UAAY,EAAE,WAAW,cACzF,GAAkB,GAClB,GAAgB,EAAK,SAAU,EAAS,QAGvC,EAAK,cACN,IAAI,SAAS,EAAK,gBAClB,GAAgB,EAAK,SAAU,EAAS,GAI5C,EAAQ,6BAA8B,MAIlD,IAAI,GAAkC,CAClC,aACA,SACA,eACA,gBACA,cACA,eACA,aACA,UACA,iBAEA,GAA6B,EAAW,GAAgC,KAAI,SAAU,GAEtF,MAAO,CAAC,EADK,IAAI,OAAO,EAAO,uBAE9B,KACL,SAAS,GAAuB,EAAO,GACnC,EAAQ,GAAO,SAAU,GACrB,IAAI,EAAQ,EAAM,iBAAiB,GAAU,OACxC,GAGL,EAAQ,EAAU,MAEtB,IAAI,EAAU,EAAM,QAChB,EAAQ,SAAS,UACb,EACA,GAA2B,SAAQ,SAAU,GACzC,IAAI,EAAK,EAAO,EAAI,GAAI,EAAO,EAAG,GAAI,EAAS,EAAG,GAC9C,EAAQ,EAAQ,MAAM,GAC1B,GAAI,GAAS,EAAM,GAAI,CACnB,IAAI,EAAM,EAAM,GAAG,OACnB,EAAQ,EAAM,OAKtB,GAAgC,SAAQ,SAAU,GAC9C,IAAI,EAAM,EAAM,iBAAiB,GAC7B,GAAO,EAAI,SAAS,SACpB,EAAQ,EAAM,OAMlC,IAAI,GAAc,sCACd,GAAiB,sDACrB,SAAS,GAAe,GACpB,OAAO,EAAO,QAAQ,gBAAiB,MAAM,OAAO,QAAQ,WAAY,MAAM,QAAQ,WAAY,MAEtG,SAAS,GAAe,GACpB,IAAI,EAAS,GAAS,GACtB,MAAO,GAAK,EAAO,OAAS,EAAO,SAAS,QAAQ,QAAS,IAAI,QAAQ,iBAAkB,MAQ/F,IAAI,GAAmB,oBAIvB,IAAI,GAAgB,wBAKpB,SAAS,GAAS,GACd,IAAI,EAAI,EAAG,EAAG,EAAI,EAAG,EAAG,EAAI,EAAG,EAAG,EAAK,EAAG,EAAG,OAAW,IAAP,EAAgB,EAAI,EACrE,GAAU,IAAN,EAAS,CACT,IAAI,EAAK,EAAO,CAAC,EAAG,EAAG,GAAG,KAAI,SAAU,GAAK,OAAO,KAAK,MAAU,IAAJ,MAAc,GAAI,EAAM,EAAG,GAAI,EAAM,EAAG,GACvG,MAAO,CAAE,EAAG,EAAK,EADgG,EAAG,GAC3F,EAAG,EAAK,EAAG,GAExC,IAAI,GAAK,EAAI,KAAK,IAAI,EAAI,EAAI,IAAM,EAChC,EAAI,GAAK,EAAI,KAAK,IAAK,EAAI,GAAM,EAAI,IACrC,EAAI,EAAI,EAAI,EACZ,EAAK,GAAQ,EAAI,GAAK,CAAC,EAAG,EAAG,GAC7B,EAAI,IAAM,CAAC,EAAG,EAAG,GACb,EAAI,IAAM,CAAC,EAAG,EAAG,GACb,EAAI,IAAM,CAAC,EAAG,EAAG,GACb,EAAI,IAAM,CAAC,EAAG,EAAG,GACb,CAAC,EAAG,EAAG,IAAI,KAAI,SAAU,GAAK,OAAO,KAAK,MAAgB,KAAT,EAAI,OAAe,GACxF,MAAO,CAAE,EADuF,EAAG,GACpF,EAD4F,EAAG,GACzF,EADiG,EAAG,GAC9F,EAAG,GAElC,SAAS,GAAS,GACd,IAAI,EAAO,EAAG,EAAG,EAAO,EAAG,EAAG,EAAO,EAAG,EAAG,EAAK,EAAG,EAAG,OAAW,IAAP,EAAgB,EAAI,EAC1E,EAAI,EAAO,IACX,EAAI,EAAO,IACX,EAAI,EAAO,IACX,EAAM,KAAK,IAAI,EAAG,EAAG,GACrB,EAAM,KAAK,IAAI,EAAG,EAAG,GACrB,EAAI,EAAM,EACV,GAAK,EAAM,GAAO,EACtB,GAAU,IAAN,EACA,MAAO,CAAE,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAElC,IAAI,EAEyB,IAFpB,IAAQ,GAAO,EAAI,GAAK,EAAK,EAClC,IAAQ,GAAM,EAAI,GAAK,EAAI,GACrB,EAAI,GAAK,EAAI,GAKvB,OAJI,EAAI,IACJ,GAAK,KAGF,CAAE,EAAG,EAAG,EADP,GAAK,EAAI,KAAK,IAAI,EAAI,EAAI,IACb,EAAG,EAAG,EAAG,GAElC,SAAS,GAAQ,EAAG,QACD,IAAX,IAAqB,EAAS,GAClC,IAAI,EAAQ,EAAE,QAAQ,GACtB,GAAe,IAAX,EACA,OAAO,EAEX,IAAI,EAAM,EAAM,QAAQ,KACxB,GAAI,GAAO,EAAG,CACV,IAAI,EAAa,EAAM,MAAM,OAC7B,GAAI,EACA,OAAI,EAAW,QAAU,EAAM,EACpB,EAAM,UAAU,EAAG,GAEvB,EAAM,UAAU,EAAG,EAAW,OAG7C,OAAO,EAeX,SAAS,GAAY,GACjB,IAAI,EAAI,EAAI,EAAG,EAAI,EAAI,EAAG,EAAI,EAAI,EAAG,EAAI,EAAI,EAC7C,OAAS,MAAL,GAAa,EAAI,EACV,QAAU,GAAQ,GAAK,KAAO,GAAY,IAAJ,GAAW,MAAQ,GAAY,IAAJ,GAAW,MAAQ,GAAQ,EAAG,GAAK,IAExG,OAAS,GAAQ,GAAK,KAAO,GAAY,IAAJ,GAAW,MAAQ,GAAY,IAAJ,GAAW,KAEtF,IAAI,GAAW,sBACX,GAAW,sBACX,GAAW,gBACf,SAAS,GAAM,GACX,IAuEI,EAAgE,EAAW,EAAW,EAAW,EAvEjG,EAAI,EAAO,OAAO,cACtB,GAAI,EAAE,MAAM,IACR,OAqEA,EAAK,EAAO,GArEI,EAqEuB,GAAU,IAAW,GAAI,EAAI,EAAG,GAAI,EAAI,EAAG,GAAI,EAAI,EAAG,GAAI,EAAK,EAAG,GACtG,CAAE,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,OADiG,IAAP,EAAgB,EAAI,GAnEzI,GAAI,EAAE,MAAM,IACR,OAuER,SAAkB,GACd,IAAI,EAAK,EAAO,GAAqB,EAAM,GAAU,IAAW,GAAI,EAAI,EAAG,GAAI,EAAI,EAAG,GAAI,EAAI,EAAG,GAAI,EAAK,EAAG,GAC7G,OAAO,GAAS,CAAE,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,OADwF,IAAP,EAAgB,EAAI,IAxE9H,CAAS,GAEpB,GAAI,EAAE,MAAM,IACR,OAwER,SAAkB,GACd,IAAI,EAAI,EAAK,UAAU,GACvB,OAAQ,EAAE,QACN,KAAK,EACL,KAAK,EACD,IAAI,EAAK,EAAO,CAAC,EAAG,EAAG,GAAG,KAAI,SAAU,GAAK,OAAO,SAAS,GAAK,EAAE,GAAK,EAAE,GAAI,OAAS,GAExF,MAAO,CAAE,EAFuF,EAAG,GAEpF,EAF4F,EAAG,GAEzF,EAFiG,EAAG,GAE9F,EADN,IAAb,EAAE,OAAe,EAAK,SAAS,GAAK,EAAE,GAAK,EAAE,GAAI,IAAM,KAGnE,KAAK,EACL,KAAK,EACD,IAAI,EAAK,EAAO,CAAC,EAAG,EAAG,GAAG,KAAI,SAAU,GAAK,OAAO,SAAS,EAAE,UAAU,EAAG,EAAI,GAAI,OAAS,GAE7F,MAAO,CAAE,EAF4F,EAAG,GAEzF,EAFiG,EAAG,GAE9F,EAFsG,EAAG,GAEnG,EADN,IAAb,EAAE,OAAe,EAAK,SAAS,EAAE,UAAU,EAAG,GAAI,IAAM,KAIxE,MAAM,IAAI,MAAM,mBAAqB,GAxF1B,CAAS,GAEpB,GAAI,GAAY,IAAI,GAChB,OAuFR,SAAwB,GACpB,IAAI,EAAI,GAAY,IAAI,GACxB,MAAO,CACH,EAAI,GAAK,GAAM,IACf,EAAI,GAAK,EAAK,IACd,EAAI,GAAK,EAAK,IACd,EAAG,GA7FI,CAAe,GAE1B,GAAI,GAAa,IAAI,GACjB,OA6FR,SAAwB,GACpB,IAAI,EAAI,GAAa,IAAI,GACzB,MAAO,CACH,EAAI,GAAK,GAAM,IACf,EAAI,GAAK,EAAK,IACd,EAAI,GAAK,EAAK,IACd,EAAG,GAnGI,CAAe,GAE1B,GAAe,gBAAX,EACA,MAAO,CAAE,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAElC,MAAM,IAAI,MAAM,mBAAqB,GA2BzC,SAAS,GAAqB,EAAK,EAAO,GACtC,IAAI,EA1BR,SAAoB,GAChB,IAAI,EAAU,GACV,EAAU,EACV,GAAW,EACX,EAAa,EAAO,QAAQ,KAChC,EAAS,EAAO,UAAU,EAAa,EAAG,EAAO,OAAS,GAC1D,IAAK,IAAI,EAAI,EAAG,EAAI,EAAO,OAAQ,IAAK,CACpC,IAAI,EAAI,EAAO,GACX,GAAK,KAAO,GAAK,KAAa,MAAN,GAAmB,MAAN,GAAmB,MAAN,EAClD,GAAW,GAEN,GAAmB,MAAN,GAAmB,MAAN,EAKzB,IACN,EAAU,EAAI,IALd,EAAQ,KAAK,EAAO,UAAU,EAAS,IACvC,GAAW,EACX,EAAU,EAAI,GAStB,OAHI,GACA,EAAQ,KAAK,EAAO,UAAU,EAAS,EAAO,SAE3C,EAGG,CAAW,GACjB,EAAY,OAAO,QAAQ,GAkB/B,OAjBc,EAAI,KAAI,SAAU,GAAK,OAAO,EAAE,UAAW,KAAI,SAAU,EAAG,GACtE,IAAI,EACA,EAAO,EAAU,MAAK,SAAU,GAChC,IAAwB,EAAf,EAAO,EAAI,GAAW,GAC/B,OAAO,EAAE,SAAS,MAQtB,OALI,EADA,EACI,WAAW,EAAE,UAAU,EAAG,EAAE,OAAS,EAAK,GAAG,SAAW,EAAK,GAAK,EAAM,GAGxE,WAAW,GAEf,EAAM,GAAK,EACJ,KAAK,MAAM,GAEf,KAIf,IAAI,GAAW,CAAC,IAAK,IAAK,IAAK,GAC3B,GAAW,CAAE,IAAK,KAKtB,IAAI,GAAW,CAAC,IAAK,EAAG,EAAG,GACvB,GAAW,CAAE,IAAK,IAAK,IAAO,IAAK,IAAO,EAAI,KAAK,GAAI,KAAQ,GAyCnE,IAAI,GAAc,SAAU,GAAQ,OAAO,GAAQ,KAAO,GAAQ,KAElE,SAAS,GAAoB,GA6BzB,IA5BA,IAAI,EAAc,EACd,EAAwB,SAAU,EAAO,EAAK,GAC9C,EAAQ,EAAM,UAAU,EAAG,GAAS,EAAc,EAAM,UAAU,IAElE,EAAY,WAEZ,IADA,IAAI,EAAe,EACV,EAAI,EAAG,EAAI,EAAG,IAAK,CACxB,IAAI,EAAO,EAAM,EAAc,GAC/B,GAAa,MAAT,EACA,MAEJ,IAAI,GAAY,GAKZ,MAJA,GAAgB,GAChB,GAAgB,OAAO,GAM/B,IArB0B,EAqBtB,GArBsB,EAqBQ,EArBS,KAAK,MAAM,KAAK,MAAM,IAAW,GAwB5E,GAAqB,MADF,GADnB,GAAe,GACwB,GAKvC,OADA,IACO,GAEuC,KAA1C,EAAc,EAAM,QAAQ,WAAiB,CACjD,IAAI,EAAa,EACjB,GAAe,EACf,IAAI,EAAc,IAClB,IAAK,EACD,MAEJ,GAA+B,MAA3B,EAAM,EAAc,GACpB,MAEJ,IACA,IAAI,EAAY,EAAM,EAAc,GACpC,GAAkB,MAAd,GAAmC,MAAd,EACrB,MAGJ,GADA,IAC+B,MAA3B,EAAM,EAAc,GACpB,MAEJ,IACA,IAAI,EAAe,IACnB,IAAK,EACD,MASJ,EAAsB,EAAY,EAAc,EAN9B,MAAd,EACc,EAAc,EAAe,IAG7B,EAAc,EAAe,KAInD,OAAO,EAEX,IAAI,GAAc,IAAI,IAAI,OAAO,QAAQ,CACrC,UAAW,SACX,aAAc,SACd,KAAM,MACN,WAAY,QACZ,MAAO,SACP,MAAO,SACP,OAAQ,SACR,MAAO,EACP,eAAgB,SAChB,KAAM,IACN,WAAY,QACZ,MAAO,SACP,UAAW,SACX,UAAW,QACX,WAAY,QACZ,UAAW,SACX,MAAO,SACP,eAAgB,QAChB,SAAU,SACV,QAAS,SACT,KAAM,MACN,SAAU,IACV,SAAU,MACV,cAAe,SACf,SAAU,SACV,SAAU,SACV,UAAW,MACX,UAAW,SACX,YAAa,QACb,eAAgB,QAChB,WAAY,SACZ,WAAY,SACZ,QAAS,QACT,WAAY,SACZ,aAAc,QACd,cAAe,QACf,cAAe,QACf,cAAe,QACf,cAAe,MACf,WAAY,QACZ,SAAU,SACV,YAAa,MACb,QAAS,QACT,QAAS,QACT,WAAY,QACZ,UAAW,SACX,YAAa,SACb,YAAa,QACb,QAAS,SACT,UAAW,SACX,WAAY,SACZ,KAAM,SACN,UAAW,SACX,KAAM,QACN,KAAM,QACN,MAAO,MACP,YAAa,SACb,SAAU,SACV,QAAS,SACT,UAAW,SACX,OAAQ,QACR,MAAO,SACP,MAAO,SACP,SAAU,SACV,cAAe,SACf,UAAW,QACX,aAAc,SACd,UAAW,SACX,WAAY,SACZ,UAAW,SACX,qBAAsB,SACtB,UAAW,SACX,UAAW,SACX,WAAY,QACZ,UAAW,SACX,YAAa,SACb,cAAe,QACf,aAAc,QACd,eAAgB,QAChB,eAAgB,QAChB,eAAgB,SAChB,YAAa,SACb,KAAM,MACN,UAAW,QACX,MAAO,SACP,QAAS,SACT,OAAQ,QACR,iBAAkB,QAClB,WAAY,IACZ,aAAc,SACd,aAAc,QACd,eAAgB,QAChB,gBAAiB,QACjB,kBAAmB,MACnB,gBAAiB,QACjB,gBAAiB,SACjB,aAAc,QACd,UAAW,SACX,UAAW,SACX,SAAU,SACV,YAAa,SACb,KAAM,IACN,QAAS,SACT,MAAO,QACP,UAAW,QACX,OAAQ,SACR,UAAW,SACX,OAAQ,SACR,cAAe,SACf,UAAW,SACX,cAAe,SACf,cAAe,SACf,WAAY,SACZ,UAAW,SACX,KAAM,SACN,KAAM,SACN,KAAM,SACN,WAAY,SACZ,OAAQ,QACR,cAAe,QACf,IAAK,SACL,UAAW,SACX,UAAW,QACX,YAAa,QACb,OAAQ,SACR,WAAY,SACZ,SAAU,QACV,SAAU,SACV,OAAQ,SACR,OAAQ,SACR,QAAS,QACT,UAAW,QACX,UAAW,QACX,UAAW,QACX,KAAM,SACN,YAAa,MACb,UAAW,QACX,IAAK,SACL,KAAM,MACN,QAAS,SACT,OAAQ,SACR,UAAW,QACX,OAAQ,SACR,MAAO,SACP,MAAO,SACP,WAAY,SACZ,OAAQ,SACR,YAAa,YAEb,GAAe,IAAI,IAAI,OAAO,QAAQ,CACtC,aAAc,QACd,cAAe,EACf,aAAc,SACd,WAAY,QACZ,WAAY,SACZ,gBAAiB,SACjB,aAAc,SACd,WAAY,EACZ,YAAa,EACb,SAAU,QACV,UAAW,SACX,cAAe,EACf,eAAgB,SAChB,gBAAiB,SACjB,oBAAqB,EACrB,eAAgB,SAChB,SAAU,EACV,KAAM,SACN,SAAU,SACV,UAAW,SACX,iBAAkB,EAClB,WAAY,SACZ,gBAAiB,SACjB,kBAAmB,SACnB,aAAc,EACd,OAAQ,SACR,YAAa,SACb,WAAY,EACZ,2BAA4B,WAC7B,KAAI,SAAU,GACb,IAAI,EAAK,EAAO,EAAI,GAAI,EAAM,EAAG,GAAI,EAAQ,EAAG,GAChD,MAAO,CAAC,EAAI,cAAe,OAG/B,SAAS,GAAM,EAAG,EAAO,EAAQ,EAAQ,GACrC,OAAQ,EAAI,IAAU,EAAU,IAAW,EAAS,GAAS,EAEjE,SAAS,GAAM,EAAG,EAAK,GACnB,OAAO,KAAK,IAAI,EAAK,KAAK,IAAI,EAAK,IAEvC,SAAS,GAAiB,EAAI,GAE1B,IADA,IAAI,EAAS,GACJ,EAAI,EAAG,EAAM,EAAG,OAAQ,EAAI,EAAK,IAAK,CAC3C,EAAO,GAAK,GACZ,IAAK,IAAI,EAAI,EAAG,EAAO,EAAG,GAAG,OAAQ,EAAI,EAAM,IAAK,CAEhD,IADA,IAAI,EAAM,EACD,EAAI,EAAG,EAAO,EAAG,GAAG,OAAQ,EAAI,EAAM,IAC3C,GAAO,EAAG,GAAG,GAAK,EAAG,GAAG,GAE5B,EAAO,GAAG,GAAK,GAGvB,OAAO,EAGX,SAAS,GAAW,EAAO,EAAO,QAChB,IAAV,IAAoB,EAAQ,GAGhC,IAFA,IACI,EADA,EAAU,GAEN,EAAI,EAAM,KAAK,IACnB,EAAQ,KAAK,EAAE,IAEnB,OAAO,EA+EX,SAAS,GAAmB,GACxB,IAAI,EAAI,GAAO,WAgBf,OAfqB,IAAjB,EAAO,QACP,EAAI,GAAiB,EAAG,GAAO,MAAM,EAAO,MAAQ,OAE/B,IAArB,EAAO,YACP,EAAI,GAAiB,EAAG,GAAO,UAAU,EAAO,UAAY,OAExC,MAApB,EAAO,WACP,EAAI,GAAiB,EAAG,GAAO,SAAS,EAAO,SAAW,OAEpC,MAAtB,EAAO,aACP,EAAI,GAAiB,EAAG,GAAO,WAAW,EAAO,WAAa,OAE9C,IAAhB,EAAO,OACP,EAAI,GAAiB,EAAG,GAAO,eAE5B,EAQX,IAAI,GAAS,CACT,SAAU,WACN,MAAO,CACH,CAAC,EAAG,EAAG,EAAG,EAAG,GACb,CAAC,EAAG,EAAG,EAAG,EAAG,GACb,CAAC,EAAG,EAAG,EAAG,EAAG,GACb,CAAC,EAAG,EAAG,EAAG,EAAG,GACb,CAAC,EAAG,EAAG,EAAG,EAAG,KAGrB,WAAY,WACR,MAAO,CACH,CAAC,MAAQ,MAAQ,KAAO,EAAG,GAC3B,EAAE,KAAO,MAAQ,KAAO,EAAG,GAC3B,EAAE,MAAQ,KAAO,KAAO,EAAG,GAC3B,CAAC,EAAG,EAAG,EAAG,EAAG,GACb,CAAC,EAAG,EAAG,EAAG,EAAG,KAGrB,WAAY,SAAU,GAClB,MAAO,CACH,CAAC,EAAG,EAAG,EAAG,EAAG,GACb,CAAC,EAAG,EAAG,EAAG,EAAG,GACb,CAAC,EAAG,EAAG,EAAG,EAAG,GACb,CAAC,EAAG,EAAG,EAAG,EAAG,GACb,CAAC,EAAG,EAAG,EAAG,EAAG,KAGrB,SAAU,SAAU,GAChB,IAAI,GAAK,EAAI,GAAK,EAClB,MAAO,CACH,CAAC,EAAG,EAAG,EAAG,EAAG,GACb,CAAC,EAAG,EAAG,EAAG,EAAG,GACb,CAAC,EAAG,EAAG,EAAG,EAAG,GACb,CAAC,EAAG,EAAG,EAAG,EAAG,GACb,CAAC,EAAG,EAAG,EAAG,EAAG,KAGrB,MAAO,SAAU,GACb,MAAO,CACH,CAAE,KAAQ,MAAS,EAAI,GAAM,KAAQ,MAAS,EAAI,GAAM,KAAQ,MAAS,EAAI,GAAK,EAAG,GACrF,CAAE,KAAQ,MAAS,EAAI,GAAM,KAAQ,MAAS,EAAI,GAAM,KAAQ,MAAS,EAAI,GAAK,EAAG,GACrF,CAAE,KAAQ,MAAS,EAAI,GAAM,KAAQ,MAAS,EAAI,GAAM,KAAQ,MAAS,EAAI,GAAK,EAAG,GACrF,CAAC,EAAG,EAAG,EAAG,EAAG,GACb,CAAC,EAAG,EAAG,EAAG,EAAG,KAGrB,UAAW,SAAU,GACjB,MAAO,CACH,CAAE,MAAS,OAAU,EAAI,GAAM,MAAS,OAAU,EAAI,GAAM,MAAS,OAAU,EAAI,GAAK,EAAG,GAC3F,CAAE,MAAS,OAAU,EAAI,GAAM,MAAS,OAAU,EAAI,GAAM,MAAS,OAAU,EAAI,GAAK,EAAG,GAC3F,CAAE,MAAS,OAAU,EAAI,GAAM,MAAS,OAAU,EAAI,GAAM,MAAS,OAAU,EAAI,GAAK,EAAG,GAC3F,CAAC,EAAG,EAAG,EAAG,EAAG,GACb,CAAC,EAAG,EAAG,EAAG,EAAG,MAKzB,SAAS,GAAU,GAGf,OAAO,EAF2B,IAAf,EAAM,KACC,4BAA8B,8BAG5D,SAAS,GAAU,GAGf,OAAO,EAF2B,IAAf,EAAM,KACC,sBAAwB,wBAGtD,IAAI,GAAyB,IAAI,IAC7B,GAAoB,IAAI,IAC5B,SAAS,GAAoB,GACzB,GAAI,GAAkB,IAAI,GACtB,OAAO,GAAkB,IAAI,GAEjC,IACI,EAAM,GADA,GAAM,IAGhB,OADA,GAAkB,IAAI,EAAO,GACtB,EAMX,IAAI,GAAe,CAAC,IAAK,IAAK,IAAK,KAC/B,GAAmB,CAAC,OAAQ,aAAc,WAAY,YAAa,QAAS,4BAA6B,sBAAuB,6BAA8B,wBAWlK,SAAS,GAAqB,EAAK,EAAO,EAAW,EAAW,GAC5D,IAAI,EACA,GAAuB,IAAI,GAC3B,EAAU,GAAuB,IAAI,IAGrC,EAAU,IAAI,IACd,GAAuB,IAAI,EAAW,IAE1C,IAAI,EAnBR,SAAoB,EAAK,GACrB,IAAI,EAAW,GAOf,OANA,GAAa,SAAQ,SAAU,GAC3B,GAAY,EAAI,GAAO,OAE3B,GAAiB,SAAQ,SAAU,GAC/B,GAAY,EAAM,GAAO,OAEtB,EAWE,CAAW,EAAK,GACzB,GAAI,EAAQ,IAAI,GACZ,OAAO,EAAQ,IAAI,GAEvB,IAII,EAAK,GADM,EAHL,GAAS,GACK,MAAb,EAAoB,KAAO,GAAoB,GACpB,MAApB,EAA2B,KAAO,GAAoB,KAE3C,EAAI,EAAG,EAAG,EAAI,EAAG,EAAG,EAAI,EAAG,EAAG,EAAI,EAAG,EAE9D,EAAK,EAxHb,SAA0B,EAAI,GAC1B,IAAI,EAAK,EAAO,EAAI,GAEhB,EAAS,GAAiB,EADpB,CAAC,CADiB,EAAG,GACf,KAAM,CADiB,EAAG,GACf,KAAM,CADiB,EAAG,GACf,KAAM,CAAC,GAAI,CAAC,KAElD,MAAO,CAAC,EAAG,EAAG,GAAG,KAAI,SAAU,GAAK,OAAO,GAAM,KAAK,MAAqB,IAAf,EAAO,GAAG,IAAW,EAAG,QAoHpE,CAAiB,CAAC,EAAG,EAAG,GAD3B,GAAmB,IACqB,GAAI,EAAK,EAAG,GAAI,EAAK,EAAG,GAAI,EAAK,EAAG,GACrF,EAAe,IAAN,EAvnBjB,SAAwB,GACpB,IAAI,EAAI,EAAG,EAAG,EAAI,EAAG,EAAG,EAAI,EAAG,EAAG,EAAI,EAAG,EACzC,MAAO,KAAY,MAAL,GAAa,EAAI,EAAI,CAAC,EAAG,EAAG,EAAG,KAAK,MAAU,IAAJ,IAAY,CAAC,EAAG,EAAG,IAAI,KAAI,SAAU,GACzF,OAAa,EAAI,GAAK,IAAM,IAAM,EAAE,SAAS,OAC9C,KAAK,IAonBJ,CAAe,CAAE,EAAG,EAAI,EAAG,EAAI,EAAG,IA/nB1C,SAAqB,GACjB,IAAI,EAAI,EAAI,EAAG,EAAI,EAAI,EAAG,EAAI,EAAI,EAAG,EAAI,EAAI,EAC7C,OAAS,MAAL,GAAa,EAAI,EACV,QAAU,GAAQ,GAAK,KAAO,GAAQ,GAAK,KAAO,GAAQ,GAAK,KAAO,GAAQ,EAAG,GAAK,IAE1F,OAAS,GAAQ,GAAK,KAAO,GAAQ,GAAK,KAAO,GAAQ,GAAK,IA2nBjE,CAAY,CAAE,EAAG,EAAI,EAAG,EAAI,EAAG,EAAI,EAAG,IAE1C,OADA,EAAQ,IAAI,EAAI,GACT,EAEX,SAAS,GAAQ,GACb,OAAO,EAKX,SAAS,GAAuB,EAAK,GACjC,IAAI,EAAS,GAAU,GAEvB,OAAO,GAAqB,EAAK,EAAO,GAD3B,GAAU,GAC6C,GAExE,SAAS,GAAmB,EAAI,EAAQ,GACpC,IAEI,EAFA,EAAI,EAAG,EAAG,EAAI,EAAG,EAAG,EAAI,EAAG,EAAG,EAAI,EAAG,EACrC,EAAS,EAAI,GAEb,EACA,EAAY,EAAI,IAAO,EAAI,IAI3B,EAAY,EAAI,KAAS,EAAI,KADhB,EAAI,KAAO,EAAI,KAGhC,IAAI,EAAK,EACL,EAAK,EAYT,OAXI,IACI,GACA,EAAK,EAAO,EACZ,EAAK,EAAO,IAGZ,EAAK,EAAO,EACZ,EAAK,EAAO,IAIb,CAAE,EAAG,EAAI,EAAG,EAAI,EADd,GAAM,EAAG,EAAG,EAAG,EAAO,EAAG,EAAO,GACX,EAAG,GAGrC,SAAS,GAAY,EAAI,GACrB,IAAI,EAAI,EAAG,EAAG,EAAI,EAAG,EAAG,EAAI,EAAG,EAAG,EAAI,EAAG,EAGrC,EAAY,EAAI,KAAS,EAAI,KADpB,EAAI,KAAO,EAAI,KAE5B,GAHa,EAAI,GAGL,CACR,IAAI,EAAO,GAAM,EAAG,EAAG,GAAK,EAPb,IAQf,OAAI,EAGO,CAAE,EAFE,EAAK,EAEE,EADT,EAAK,EACW,EAAG,EAAM,EAAG,GAElC,CAAE,EAAG,EAAG,EAAG,EAAG,EAAG,EAAM,EAAG,GAErC,IAAI,EAAK,GAAM,EAAG,GAAK,EAfJ,GAeyB,EAAK,GACjD,GAAI,EAGA,MAAO,CAAE,EAFE,EAAK,EAEE,EADT,EAAK,EACW,EAAG,EAAI,EAAG,GAEvC,IAAI,EAAK,EACM,EAAI,IAAM,EAAI,MAIrB,EAFkB,EAAI,IAEjB,GAAM,EAAG,IAAK,IAAK,IAAK,KAGxB,GAAM,EAAG,GAAI,IAAK,GAAI,MAGnC,MAAO,CAAE,EAAG,EAAI,EAAG,EAAG,EAAG,EAAI,EAAG,GAEpC,SAAS,GAAsB,EAAK,GAChC,GAAmB,IAAf,EAAM,KACN,OAAO,GAAuB,EAAK,GAEvC,IAAI,EAAO,GAAU,GACrB,OAAO,GAAqB,EAAK,EAAS,EAAS,GAAI,GAAQ,CAAE,KAAM,IAAM,GAAa,GAE9F,IA8FI,GA9FA,GAAmB,IACvB,SAAS,GAAgB,GACrB,OAAO,GAAM,EAAK,IAAK,IAAK,IAAK,KAErC,SAAS,GAAY,EAAI,GACrB,IAAI,EAAI,EAAG,EAAG,EAAI,EAAG,EAAG,EAAI,EAAG,EAAG,EAAI,EAAG,EAErC,EAAY,EAAI,IAAO,EAAI,IAC3B,GAAU,GAAa,EAAI,KAAO,EAAI,IAC1C,GAHc,EAAI,GAGL,CACT,IAAI,EAAO,GAAM,EAAG,GAAK,EAAG,GAAkB,EAAK,GACnD,GAAI,EAGA,MAAO,CAAE,EAFE,EAAK,EAEE,EADT,EAAK,EACW,EAAG,EAAM,EAAG,GAEzC,IAAI,EAAO,EAIX,OAHI,IACA,EAAO,GAAgB,IAEpB,CAAE,EAAG,EAAM,EAAG,EAAG,EAAG,EAAM,EAAG,GAExC,GAAI,EAIA,MAAO,CAAE,EAHE,EAAK,EAGE,EAFT,EAAK,EAEW,EADd,GAAM,EAAG,EAAG,GAAK,EAAK,EAAG,IACF,EAAG,GAEzC,IACI,EADA,EAAK,EAST,OAPI,GACA,EAAK,GAAgB,GACrB,EAAK,GAAM,EAAG,EAAG,GAAK,EAAK,EAAG,KAAK,IAAI,EAAG,qBAG1C,EAAK,GAAM,EAAG,EAAG,GAAK,EAAK,EAAG,IAE3B,CAAE,EAAG,EAAI,EAAG,EAAG,EAAG,EAAI,EAAG,GAEpC,SAAS,GAAsB,EAAK,GAChC,GAAmB,IAAf,EAAM,KACN,OAAO,GAAuB,EAAK,GAEvC,IAAI,EAAO,GAAU,GACrB,OAAO,GAAqB,EAAK,EAAS,EAAS,GAAI,GAAQ,CAAE,KAAM,IAAM,GAAa,GAE9F,SAAS,GAAgB,EAAI,EAAQ,GACjC,IAAI,EAAI,EAAG,EAAG,EAAI,EAAG,EAAG,EAAI,EAAG,EAAG,EAAI,EAAG,EAGrC,EAAK,EACL,EAAK,EAYT,OAdgB,EAAI,IAAO,EAAI,OADlB,EAAI,IAMT,EAAK,EAAO,EACZ,EAAK,EAAO,IAGZ,EAAK,EAAO,EACZ,EAAK,EAAO,IAIb,CAAE,EAAG,EAAI,EAAG,EAAI,EADd,GAAM,EAAG,EAAG,EAAG,GAAK,IACC,EAAG,GAErC,SAAS,GAAkB,EAAK,GAC5B,GAAmB,IAAf,EAAM,KACN,OAAO,GAAuB,EAAK,GAEvC,IAAI,EAAS,GAAU,GACnB,EAAS,GAAU,GACvB,OAAO,GAAqB,EAAK,EAAS,EAAS,GAAI,GAAQ,CAAE,KAAM,IAAM,GAAiB,EAAQ,GAK1G,SAAS,GAAoB,EAAK,GAC9B,OAAO,GAAsB,EAAK,GAsBtC,SAAS,GAAkB,GACvB,IAAI,EAAU,GAgBd,OAfI,EAAO,OAAS,GAAW,MAC3B,EAAQ,KAAK,mCAES,MAAtB,EAAO,YACP,EAAQ,KAAK,cAAgB,EAAO,WAAa,MAE7B,MAApB,EAAO,UACP,EAAQ,KAAK,YAAc,EAAO,SAAW,MAExB,IAArB,EAAO,WACP,EAAQ,KAAK,aAAe,EAAO,UAAY,MAE9B,IAAjB,EAAO,OACP,EAAQ,KAAK,SAAW,EAAO,MAAQ,MAEpB,IAAnB,EAAQ,OACD,KAEJ,EAAQ,KAAK,MAxBxB,SAAW,GACP,EAAW,EAAkB,MAAI,GAAK,QACtC,EAAW,EAAiB,KAAI,GAAK,OAFzC,CAGG,KAAe,GAAa,KA+B/B,IAAI,GAAU,EACV,GAAc,IAAI,IAClB,GAAY,IAAI,IACpB,SAAS,GAAQ,GACb,OAAO,EAAU,UAAM,OAAQ,GAAQ,WACnC,OAAO,EAAY,MAAM,SAAU,GAC/B,MAAO,CAAC,EAAG,IAAI,SAAQ,SAAU,EAAS,GAClC,IAAI,IAAO,GACX,GAAY,IAAI,EAAI,GACpB,GAAU,IAAI,EAAI,GAClB,OAAO,QAAQ,YAAY,CAAE,KAAM,EAAsB,KAAM,EAAS,GAAI,cAKhG,OAAO,QAAQ,UAAU,aAAY,SAAU,GAC3C,IAAI,EAAO,EAAG,KAAM,EAAO,EAAG,KAAM,EAAQ,EAAG,MAAO,EAAK,EAAG,GAC9D,GAAI,IAAS,EAA+B,CACxC,IAAI,EAAU,GAAY,IAAI,GAC1B,EAAS,GAAU,IAAI,GAC3B,GAAY,OAAO,GACnB,GAAU,OAAO,GACb,EACA,GAAU,EAAO,GAGjB,GAAW,EAAQ,OAK/B,IAsCI,GAAe,IAtCD,WACd,SAAS,IACL,KAAK,MAAQ,GACb,KAAK,QAAU,KACf,KAAK,cAAgB,IAAO,GA+BhC,OA7BA,EAAW,UAAU,WAAa,SAAU,GACxC,KAAK,MAAM,KAAK,GAChB,KAAK,cAET,EAAW,UAAU,UAAY,WACR,OAAjB,KAAK,UACL,qBAAqB,KAAK,SAC1B,KAAK,QAAU,MAEnB,KAAK,MAAQ,IAEjB,EAAW,UAAU,WAAa,WAC9B,IAAI,EAAQ,KACR,KAAK,UAGT,KAAK,QAAU,uBAAsB,WACjC,EAAM,QAAU,KAGhB,IAFA,IACI,EADA,EAAQ,KAAK,MAET,EAAK,EAAM,MAAM,SAErB,GADA,IACI,KAAK,MAAQ,GAAS,EAAM,cAAe,CAC3C,EAAM,aACN,YAKT,EAnCM,IAuCjB,SAAS,GAAgB,GACrB,OAAO,EAAU,UAAM,OAAQ,GAAQ,WACnC,IAAI,EAAQ,KACZ,OAAO,EAAY,MAAM,SAAU,GAC/B,MAAO,CAAC,EAAG,IAAI,SAAQ,SAAU,EAAS,GAAU,OAAO,EAAU,OAAO,OAAQ,GAAQ,WACpF,IAAI,EAAS,EAAS,EAAS,EAC/B,OAAO,EAAY,MAAM,SAAU,GAC/B,OAAQ,EAAG,OACP,KAAK,EACD,OAAK,EAAI,WAAW,UACpB,EAAU,EACH,CAAC,EAAG,IAF0B,CAAC,EAAG,GAG7C,KAAK,EAED,OADA,EAAG,KAAK,KAAK,CAAC,EAAG,EAAG,CAAE,IACf,CAAC,EAAG,GAAgB,IAC/B,KAAK,EAED,OADA,EAAU,EAAG,OACN,CAAC,EAAG,GACf,KAAK,EAGD,OAFA,EAAU,EAAG,OACb,EAAO,GACA,CAAC,GACZ,KAAK,EAED,OADA,EAAG,KAAK,KAAK,CAAC,EAAG,EAAG,CAAE,IACf,CAAC,EAAG,GAAW,IAC1B,KAAK,EAKD,OAJA,EAAU,EAAG,OACb,GAAa,YAAW,WACpB,EAAQ,EAAS,CAAE,IAAK,EAAK,QAAS,EAAS,MAAO,EAAQ,aAAc,OAAQ,EAAQ,eA2DhI,SAAsB,GACb,KAdD,EAAW,GACX,EAAY,IAChB,GAAS,SAAS,cAAc,WACzB,MAAQ,EACf,GAAO,OAAS,GAChB,GAAU,GAAO,WAAW,OACpB,uBAAwB,GAPpC,IACQ,EACA,EAgBJ,IAAI,EAAe,EAAM,aAAc,EAAgB,EAAM,cAC7D,GAAsB,IAAlB,GAAwC,IAAjB,EAEvB,OADA,EAAQ,0BAA4B,EAAM,WAAa,KAChD,KAGX,GADW,EAAe,EAAgB,EAC/B,GAEP,OADA,EAAQ,4DACD,CACH,QAAQ,EACR,SAAS,EACT,eAAe,EACf,SAAS,EACT,YAAY,GAGpB,IAAI,EAAqB,EAAe,EACpC,EAAI,KAAK,IAAI,EAAG,KAAK,KAAK,GAA2B,IACrD,EAAQ,KAAK,KAAK,EAAe,GACjC,EAAS,KAAK,KAAK,EAAgB,GACvC,GAAQ,UAAU,EAAG,EAAG,EAAO,GAC/B,GAAQ,UAAU,EAAO,EAAG,EAAG,EAAc,EAAe,EAAG,EAAG,EAAO,GACzE,IAQI,EAAG,EAAG,EACN,EAAG,EAAG,EACN,EATA,EADY,GAAQ,aAAa,EAAG,EAAG,EAAO,GAChC,KACd,EAA8B,IAC9B,EAA2B,GAC3B,EAA4B,GAC5B,EAAyB,EACzB,EAAkB,EAClB,EAAmB,EAIvB,IAAK,EAAI,EAAG,EAAI,EAAQ,IACpB,IAAK,EAAI,EAAG,EAAI,EAAO,IAEnB,EAAI,GADJ,EAAI,GAAK,EAAI,EAAQ,IACX,GAAK,IACf,EAAI,EAAE,EAAI,GAAK,IACf,EAAI,EAAE,EAAI,GAAK,IACX,EAAE,EAAI,GAAK,IACP,EACJ,MAGA,EAAI,MAAS,EAAI,MAAS,EAAI,MAAS,GAC/B,GACJ,IAEA,EAAI,GACJ,KAKhB,IAAI,EAAmB,EAAQ,EAC3B,EAAoB,EAAmB,EAK3C,MAAO,CACH,OAAU,EAAkB,GALL,GAMvB,QAAW,EAAmB,GALN,GAMxB,cAAiB,EAAyB,GALZ,GAM9B,QAAU,GALiB,KAM3B,YAAY,GAhI6H,CAAa,QAEvH,CAAC,EAAG,GACf,KAAK,EAGD,OAFA,EAAU,EAAG,OACb,EAAO,GACA,CAAC,EAAG,GACf,KAAK,EAAG,MAAO,CAAC,oBAO5C,SAAS,GAAgB,GACrB,OAAO,EAAU,UAAM,OAAQ,GAAQ,WAEnC,OAAO,EAAY,MAAM,SAAU,GAC/B,OAAQ,EAAG,OACP,KAAK,EAED,OADY,IAAI,IAAI,GACJ,SAAW,SAAS,OAAgB,CAAC,EAAG,GACjD,CAAC,EAAG,EAAc,IAC7B,KAAK,EAEL,KAAK,EAAG,MAAO,CAAC,EAAG,EAAG,QADtB,KAAK,EAAG,MAAO,CAAC,EAAG,GAAQ,CAAE,IAAK,EAAK,aAAc,qBAMrE,SAAS,GAAW,GAChB,OAAO,EAAU,UAAM,OAAQ,GAAQ,WACnC,OAAO,EAAY,MAAM,SAAU,GAC/B,MAAO,CAAC,EAAG,IAAI,SAAQ,SAAU,EAAS,GAClC,IAAI,EAAQ,IAAI,MAChB,EAAM,OAAS,WAAc,OAAO,EAAQ,IAC5C,EAAM,QAAU,WAAc,OAAO,EAAO,wBAA0B,IACtE,EAAM,IAAM,YAKhC,IACI,GACA,GAFA,GAA2B,KAgB/B,IAAI,GAAiB,QAyErB,SAAS,GAAwB,EAAI,GACjC,IAAI,EAAU,EAAG,QAAS,EAAQ,EAAG,MAAO,EAAS,EAAG,OACpD,EA1Oe,GA0OkB,GA7OvB,MAAM,EAAG,GAAG,KAAI,SAAU,GAAK,OAAO,EAAE,KAAI,SAAU,GAAK,OAAO,EAAE,QAAQ,MAAO,KAAK,QAAS,KAAK,KA8OhH,EAAM,CACN,6FAAoG,EAAQ,aAAiB,EAAS,KACtI,SACA,wCACA,wCAA6C,EAAS,OACtD,YACA,UACA,iBAAoB,EAAQ,aAAiB,EAAS,wDAA8D,EAAU,OAC9H,UACF,KAAK,IACP,MAAO,6BAA+B,KAAK,GAE/C,SAAS,KACL,IAAgB,GAAa,YA5F7B,GAAS,KACT,GAAU,KA+Fd,SAAS,GAAY,EAAW,GAC5B,OAAO,QAAQ,GAAa,EAAU,oBAAoB,IAE9D,SAAS,GAA4B,EAAU,EAAO,EAAM,EAAgB,EAAsB,GAC9F,GAAI,EAAS,WAAW,MAAO,CAC3B,IAAI,EA4bZ,SAA6B,EAAgB,EAAM,EAAO,EAAM,EAAqB,GACjF,OAAO,EAAe,uBAAuB,CACzC,QAAS,EACT,YAAa,EACb,KAAM,EACN,oBAAqB,EACrB,YAAa,IAlcE,CAAoB,EAAgB,EAAU,EAAO,EAAM,EAAsB,GAChG,GAAI,EACA,MAAO,CAAE,SAAU,EAAU,MAAO,EAAU,UAAW,GAAY,EAAK,MAAO,GAAW,YAAa,QAG5G,GAAI,EAAM,SAAS,QAAS,CACzB,EA+bZ,SAAsC,EAAgB,EAAM,GACxD,OAAO,EAAe,2BAA2B,EAAM,GAhcpC,CAA6B,EAAgB,EAAU,GACtE,GAAI,EACA,MAAO,CAAE,SAAU,EAAU,MAAO,EAAU,UAAW,GAAY,EAAK,MAAO,GAAW,YAAa,QAG5G,GAAK,EAAS,SAAS,UAAyB,+BAAb,GACvB,SAAb,GACa,WAAb,GACa,eAAb,EAA2B,CACvB,EAmLZ,SAA0B,EAAM,GAC5B,GAAI,GAAiB,IAAI,EAAM,eAC3B,OAAO,EAEX,IACI,IAAI,EAAQ,GAAoB,GAChC,OAAI,EAAK,SAAS,cACP,SAAU,GAAU,OAAO,GAAsB,EAAO,IAE/D,EAAK,SAAS,WAAa,EAAK,SAAS,WAClC,SAAU,GAAU,OAAO,GAAkB,EAAO,IAExD,SAAU,GAAU,OAAO,GAAsB,EAAO,IAEnE,MAAO,GAEH,OADA,EAAQ,oBAAqB,GACtB,MAnMQ,CAAiB,EAAU,GAC1C,GAAI,EACA,MAAO,CAAE,SAAU,EAAU,MAAO,EAAU,UAAW,GAAY,EAAK,MAAO,GAAW,YAAa,QAG5G,GAAiB,qBAAb,GAAgD,qBAAb,EAAiC,CAEzE,GADI,EAAW,GAAmB,EAAO,EAAM,EAAsB,GAEjE,MAAO,CAAE,SAAU,EAAU,MAAO,EAAU,UAAW,GAAY,EAAK,MAAO,GAAW,YAAa,QAG5G,GAAI,EAAS,SAAS,UAAW,CAC9B,EA0ZZ,SAA2B,GACvB,IAAI,EAAiB,GAA0B,GAC/C,IAAK,EACD,OAAO,KAEX,OAAO,SAAU,GAAS,OAAO,EAAe,GAAO,QA/ZpC,CAAkB,GACjC,GAAI,EACA,MAAO,CAAE,SAAU,EAAU,MAAO,EAAU,UAAW,GAAY,EAAK,MAAO,GAAW,YAAa,GAGjH,OAAO,KAEX,SAAS,GAA0B,EAAO,EAAU,GAChD,IAAI,EAAQ,GAkCZ,OAjCK,IACD,EAAM,KAAK,UACX,EAAM,KAAK,yBAA2B,GAAsB,CAAE,EAAG,IAAK,EAAG,IAAK,EAAG,KAAO,GAAS,gBACjG,EAAM,KAAK,MAEf,EAAM,MAAW,EAAW,GAAK,iBAAmB,EAAsB,kCAAoC,IAAM,MACpH,EAAM,KAAK,yBAA2B,GAAsB,CAAE,EAAG,IAAK,EAAG,IAAK,EAAG,KAAO,GAAS,KACjG,EAAM,KAAK,KACX,EAAM,KAAK,gBAAkB,EAAsB,kCAAoC,IAAM,MAC7F,EAAM,KAAK,qBAAuB,GAAkB,CAAE,EAAG,GAAI,EAAG,GAAI,EAAG,IAAM,GAAS,KACtF,EAAM,KAAK,cAAgB,GAAsB,CAAE,EAAG,EAAG,EAAG,EAAG,EAAG,GAAK,GAAS,KAChF,EAAM,KAAK,KACX,EAAM,KAAK,OACX,EAAM,KAAK,cAAgB,GAAsB,CAAE,EAAG,EAAG,EAAG,GAAI,EAAG,KAAO,GAAS,KACnF,EAAM,KAAK,KACX,EAAM,KAAK,WACX,EAAM,KAAK,qBAAuB,GAAkB,CAAE,EAAG,IAAK,EAAG,IAAK,EAAG,KAAO,GAAS,KACzF,EAAM,KAAK,KACX,EAAM,KAAK,mBACX,EAAM,KAAK,cAAgB,GAAsB,CAAE,EAAG,IAAK,EAAG,IAAK,EAAG,KAAO,GAAS,KACtF,EAAM,KAAK,KACX,EAAM,KAAK,2BACX,EAAM,KAAK,8BACX,EAAM,KAAK,6BACX,EAAM,KAAK,yBAA2B,GAAsB,CAAE,EAAG,IAAK,EAAG,IAAK,EAAG,KAAO,GAAS,gBACjG,EAAM,KAAK,cAAgB,GAAsB,CAAE,EAAG,EAAG,EAAG,EAAG,EAAG,GAAK,GAAS,gBAChF,EAAM,KAAK,KACP,EAAM,gBACN,EAAM,KAwCd,SAAmC,GAC/B,IACI,EACA,EACA,EACA,EACA,EACA,EANA,EAAQ,GAOZ,GAA6B,SAAzB,EAAM,eACN,EAAa,GAAsB,CAAE,EAAG,IAAK,EAAG,IAAK,EAAG,KAAO,GAC/D,EAAa,GAAsB,CAAE,EAAG,GAAI,EAAG,GAAI,EAAG,IAAM,GAC5D,EAAa,GAAsB,CAAE,EAAG,IAAK,EAAG,IAAK,EAAG,KAAO,GAC/D,EAAkB,GAAsB,CAAE,EAAG,IAAK,EAAG,IAAK,EAAG,KAAO,GACpE,EAAmB,GAAsB,CAAE,EAAG,GAAI,EAAG,GAAI,EAAG,IAAM,GAClE,EAAc,GAAsB,CAAE,EAAG,IAAK,EAAG,IAAK,EAAG,KAAO,OAE/D,CACD,IACI,EAAQ,GADF,GAAM,EAAM,iBAElB,EAAU,EAAM,EAAI,GACpB,EAAU,SAAU,GAAW,OAAQ,EAAS,EAAS,GAAI,GAAQ,CAAE,EAAG,GAAM,EAAM,EAAI,EAAS,EAAG,MACtG,EAAS,SAAU,GAAU,OAAQ,EAAS,EAAS,GAAI,GAAQ,CAAE,EAAG,GAAM,EAAM,EAAI,EAAQ,EAAG,MACvG,EAAa,GAAY,EAAO,KAChC,EAAa,GAAY,EAAU,EAAO,IAAO,EAAQ,KACzD,EAAa,GAAY,GACzB,EAAkB,GAAY,EAAQ,KACtC,EAAmB,GAAY,EAAQ,KAE3C,EAAM,KAAK,yBACX,EAAM,KAAK,yBAA2B,EAAa,KACnD,EAAM,KAAK,cAAgB,EAAa,KACxC,EAAM,KAAK,KACX,EAAM,KAAK,+BACX,EAAM,KAAK,yBAA2B,EAAa,KACnD,EAAM,KAAK,KACX,EAAM,KAAK,qCACX,EAAM,KAAK,yBAA2B,EAAkB,KACxD,EAAM,KAAK,KACX,EAAM,KAAK,sCACX,EAAM,KAAK,yBAA2B,EAAmB,KACzD,EAAM,KAAK,KACX,EAAM,KAAK,gCACX,EAAM,KAAK,yBAA2B,EAAc,KACpD,EAAM,KAAK,KACP,IACA,EAAM,KAAK,OACX,EAAM,KAAK,wBAA0B,EAAa,IAAM,EAAa,KACrE,EAAM,KAAK,MAEf,OAAO,EAAM,KAAK,MAzFH,CAA0B,IAErC,EAAM,gBACN,EAAM,KAwBd,SAAmC,GAC/B,IAAI,EAAQ,GACR,EAAyB,GAAkB,GAC3C,EAA2B,EAAuB,yBAClD,EAA2B,EAAuB,yBAOtD,MANA,CAAC,cAAe,oBAAoB,SAAQ,SAAU,GAClD,EAAM,KAAK,EAAY,MACvB,EAAM,KAAK,yBAA2B,EAA2B,gBACjE,EAAM,KAAK,cAAgB,EAA2B,gBACtD,EAAM,KAAK,QAER,EAAM,KAAK,MAnCH,CAA0B,IAElC,EAAM,KAAK,MAEtB,SAAS,GAAkB,GACvB,IAAI,EACA,EACJ,GAA6B,SAAzB,EAAM,eACN,EAA2B,GAAsB,CAAE,EAAG,EAAG,EAAG,GAAI,EAAG,KAAO,EAAS,EAAS,GAAI,GAAQ,CAAE,UAAW,KACrH,EAA2B,GAAsB,CAAE,EAAG,IAAK,EAAG,IAAK,EAAG,KAAO,EAAS,EAAS,GAAI,GAAQ,CAAE,UAAW,SAEvH,CACD,IACI,EAAM,GADA,GAAM,EAAM,iBAEtB,EAA2B,EAAM,eAE7B,EADA,EAAI,EAAI,GACmB,OAGA,OAGnC,MAAO,CAAE,yBAA0B,EAA0B,yBAA0B,GAkE3F,SAAS,GAAyB,EAAQ,GACtC,IAAI,EAAS,EAAG,OACZ,EAAQ,GAMZ,OALA,EAAM,KAAK,gBAAkB,EAAS,qEAAuE,uBAAyB,MACtI,EAAM,KAAK,yBAA2B,GAAsB,CAAE,EAAG,IAAK,EAAG,IAAK,EAAG,KAAO,GAAU,gBAClG,EAAM,KAAK,qBAAuB,GAAkB,CAAE,EAAG,GAAI,EAAG,GAAI,EAAG,IAAM,GAAU,gBACvF,EAAM,KAAK,cAAgB,GAAsB,CAAE,EAAG,EAAG,EAAG,EAAG,EAAG,GAAK,GAAU,gBACjF,EAAM,KAAK,KACJ,EAAM,KAAK,MAEtB,IAAI,GAAmB,IAAI,IAAI,CAC3B,UACA,cACA,UACA,eACA,OACA,UAEA,GAAkB,IAAI,IAC1B,SAAS,GAAoB,GAEzB,GADA,EAAS,EAAO,OACZ,GAAgB,IAAI,GACpB,OAAO,GAAgB,IAAI,GAE3B,EAAO,SAAS,WAChB,EAAS,GAAoB,IAEjC,IAAI,EAAQ,GAAM,GAElB,OADA,GAAgB,IAAI,EAAQ,GACrB,EAEX,SAAS,GAAc,GACnB,IACI,OAAO,GAAoB,GAE/B,MAAO,GACH,OAAO,MAsBf,IAAI,GAAgB,kFAChB,GAAoB,IAAI,IACxB,GAA0B,IAAI,IAsBlC,SAAS,GAAmB,EAAO,EAAM,EAAsB,GAC3D,IAAI,EAAQ,KACZ,IACI,IAAI,EAAY,GAAW,GAAe,GACtC,EAAO,GAAW,GAAa,GACnC,GAAoB,IAAhB,EAAK,QAAqC,IAArB,EAAU,OAC/B,OAAO,EAEX,IAAI,EAAa,SAAU,GACvB,IAAI,EAAQ,EACZ,OAAO,EAAQ,KAAI,SAAU,GACzB,IAAI,EAAa,EAAM,QAAQ,EAAO,GAEtC,OADA,EAAQ,EAAa,EAAM,OACpB,CAAE,MAAO,EAAO,MAAO,OAGlC,EAAY,EAAW,GAAM,KAAI,SAAU,GAAK,OAAQ,EAAS,CAAE,KAAM,OAAS,MACjF,OAAO,EAAW,GAAW,KAAI,SAAU,GAAK,OAAQ,EAAS,CAAE,KAAM,YAAc,OACvF,MAAK,SAAU,EAAG,GAAK,OAAO,EAAE,MAAQ,EAAE,SA2F3C,EAAoB,SAAU,EAAc,GAC5C,IACI,EADA,EAAS,EAAa,OAAQ,EAAU,EAAa,QAAS,EAAgB,EAAa,cAAe,EAAU,EAAa,QAAS,EAAa,EAAa,WAAY,EAAQ,EAAa,MAEzM,GAAI,EACA,EAAS,QAAW,EAAa,IAAM,UAEtC,GAAI,GAAU,GAAiC,IAAhB,EAAO,OAAe,GAAW,EAAQ,EAAG,CAC5E,EAAQ,wBAA0B,EAAa,KAE/C,EAAS,QADM,GAAwB,EAAc,EAAS,EAAS,GAAI,GAAS,CAAE,MAAO,GAAM,EAAO,MAAQ,GAAI,EAAG,QAC1F,UAE9B,GAAI,IAAY,GAAiC,IAAhB,EAAO,KAAY,CACrD,GAAI,EACA,EAAS,YAGT,EAAQ,uBAAyB,EAAa,KAE9C,EAAS,QADI,GAAwB,EAAc,GACtB,UAGhC,GAAoB,IAAhB,EAAO,MAAc,IAAY,EAAS,CAC/C,EAAQ,4BAA8B,EAAa,KAEnD,EAAS,QADM,GAAwB,EAAc,EAAS,EAAS,GAAI,GAAS,CAAE,WAAY,GAAM,EAAO,WAAa,GAAI,EAAG,KAAM,MAAO,GAAM,EAAO,MAAQ,GAAI,EAAG,QAC7I,UAG/B,EAAS,KAEb,OAAO,GAEP,EAAc,GACd,EAAU,EAYd,OAXA,EAAU,SAAQ,SAAU,EAAI,GAC5B,IAAI,EAAQ,EAAG,MAAO,EAAO,EAAG,KAAM,EAAa,EAAG,MAClD,EAAc,EACd,EAAW,EAAa,EAAM,OAClC,EAAU,EACV,EAAY,MAAK,WAAc,OAAO,EAAM,UAAU,EAAa,MACnE,EAAY,KAAc,QAAT,EAnGE,SAAU,GAC7B,IAAI,EACJ,GAxEZ,SAA2B,EAAc,GACrC,IAAK,GAAqC,IAArB,EAAU,OAC3B,OAAO,EAEX,GAAI,EAAU,MAAK,SAAU,GAAK,MAAa,MAAN,KACrC,OAAO,EASX,IAPA,IAAI,EAAgB,EAAa,MAAM,SACnC,EAAU,SAAU,GACpB,IAAI,EAAkB,EAAU,GAChC,GAAI,EAAc,MAAK,SAAU,GAAK,OAAO,IAAM,KAC/C,MAAO,CAAE,OAAO,IAGf,EAAI,EAAG,EAAI,EAAU,OAAQ,IAAK,CACvC,IAAI,EAAU,EAAQ,GACtB,GAAuB,iBAAZ,EACP,OAAO,EAAQ,MAEvB,OAAO,EAqDK,CAAkB,EAAK,aAAc,GACrC,OAAO,KAEX,IAAI,EAAM,GAAe,GACrB,EAAmB,EAAK,iBACxB,EAAW,GAAoB,EAAiB,KAChD,GAAe,EAAiB,OACO,QAArC,EAAK,EAAiB,iBAA8B,IAAP,OAAgB,EAAS,EAAG,UAAY,SAAS,OAEhG,EAAgB,SADpB,EAAM,GAAe,EAAS,IACO,KACrC,OAAO,SAAU,GAAU,OAAO,EAAU,OAAO,OAAQ,GAAQ,WAC/D,IAAI,EAAc,EAClB,OAAO,EAAY,MAAM,SAAU,GAC/B,OAAQ,EAAG,OACP,KAAK,EACD,OAAK,GAAkB,IAAI,IAC3B,EAAe,GAAkB,IAAI,GAC9B,CAAC,EAAG,IAF6B,CAAC,EAAG,GAGhD,KAAK,EAED,OADA,EAAG,KAAK,KAAK,CAAC,EAAG,EAAG,CAAE,IACjB,GAAwB,IAAI,IACjC,EAAa,GAAwB,IAAI,GAClC,CAAC,EAAG,IAAI,SAAQ,SAAU,GAAW,OAAO,EAAW,KAAK,QAFrB,CAAC,EAAG,GAGtD,KAAK,EAED,OADA,EAAe,EAAG,QAIX,CAAC,EAAG,GAFA,CAAC,EAAG,MAGnB,KAAK,EAED,OADA,GAAwB,IAAI,EAAK,IAC1B,CAAC,EAAG,GAAgB,IAC/B,KAAK,EACD,EAAe,EAAG,OAClB,GAAkB,IAAI,EAAK,GAC3B,GAAwB,IAAI,GAAK,SAAQ,SAAU,GAAW,OAAO,EAAQ,MAC7E,GAAwB,OAAO,GAC/B,EAAG,MAAQ,EACf,KAAK,EACD,OAAI,IACO,CAAC,EAAG,MAER,CAAC,EAAG,GACf,KAAK,EAOD,OALA,EADQ,EAAG,QAEP,GAAwB,IAAI,KAC5B,GAAwB,IAAI,GAAK,SAAQ,SAAU,GAAW,OAAO,EAAQ,SAC7E,GAAwB,OAAO,IAE5B,CAAC,EAAG,GACf,KAAK,EAED,MAAO,CAAC,EADO,EAAkB,EAAc,IAAW,WA6CxC,CAAiB,GAjI3B,SAAU,GAClC,IAAI,EAAQ,EAAS,MAAM,2BACvB,EAAO,EAAM,GACb,EAAU,EAAM,GAEhB,EAAiB,kDACjB,EAAQ,GAFK,iEAEkB,EAAS,GAAG,KAAI,SAAU,GAEzD,IAAI,EAAM,GADV,EAAO,EAAK,QAEZ,GAAI,EACA,OAAO,SAAU,GAAU,OAAO,GAAoB,EAAK,IAE/D,IAAI,EAAQ,EAAK,YAAY,KAE7B,GADA,EAAM,GAAc,EAAK,UAAU,EAAG,IAElC,OAAO,SAAU,GAAU,OAAO,GAAoB,EAAK,GAAU,IAAM,EAAK,UAAU,EAAQ,IAEtG,IAAI,EAAiB,EAAK,MAAM,GAChC,OAAI,IACA,EAAM,GAAc,EAAe,KAExB,SAAU,GAAU,OAAO,EAAe,GAAK,KAAO,EAAe,GAAK,EAAe,GAAK,KAAO,IAAM,GAAoB,EAAK,GAAU,KAGtJ,WAAc,OAAO,MAEhC,OAAO,SAAU,GACb,OAAO,EAAO,IAAM,EAAM,KAAI,SAAU,GAAU,OAAO,EAAO,MAAY,KAAK,MAAQ,KAsGjC,CAAsB,IAC9E,IAAM,EAAU,OAAS,GACzB,EAAY,MAAK,WAAc,OAAO,EAAM,UAAU,SAGvD,SAAU,GACb,IAAI,EAAU,EAAY,OAAO,SAAS,KAAI,SAAU,GAAU,OAAO,EAAO,MAChF,OAAI,EAAQ,MAAK,SAAU,GAAK,OAAO,aAAa,WACzC,QAAQ,IAAI,GACd,MAAK,SAAU,GAChB,OAAO,EAAa,KAAK,OAG1B,EAAQ,KAAK,KAG5B,MAAO,GAEH,OADA,EAAQ,4BAA8B,EAAO,GACtC,MAGf,SAAS,GAA0B,GAC/B,IACI,IAAI,EAAU,EACV,EAAiB,GAAW,6EAA8E,EAAO,GACjH,EAAc,EACd,EAAc,EAAe,KAAI,SAAU,EAAO,GAClD,IAAI,EAAc,EACd,EAAa,EAAM,QAAQ,EAAO,GAClC,EAAW,EAAa,EAAM,OAClC,EAAU,EACV,IAAI,EAAM,GAAc,GACxB,OAAK,EAIE,SAAU,GAAU,MAAO,GAAK,EAAM,UAAU,EAAa,GA3tBhF,SAA2B,EAAK,GAC5B,OAAO,GAAsB,EAAK,GA0tBwD,CAAkB,EAAK,IAAW,IAAM,EAAe,OAAS,EAAI,EAAM,UAAU,GAAY,MAH9K,IACO,WAAc,OAAO,EAAM,UAAU,EAAa,QAIjE,OAAO,SAAU,GACb,IAAI,EAAW,EAAY,KAAI,SAAU,GAAU,OAAO,EAAO,MAAY,KAAK,IAClF,MAAO,CACH,cAAe,EAAe,OAC9B,yBAA0B,EAC1B,OAAQ,IAIpB,MAAO,GAEH,OADA,EAAQ,0BAA4B,EAAO,GACpC,MAsBf,SAAS,KACL,GAAgB,QA/7BhB,GAAuB,QACvB,GAAkB,QAg8BlB,GAAkB,QAClB,KACA,GAAwB,QAG5B,IAwcI,GAAiB,IApcC,WAClB,SAAS,IACL,KAAK,SAAW,IAAI,IACpB,KAAK,WAAa,GAClB,KAAK,YAAc,IAAI,IACvB,KAAK,QAAU,IAAI,IACnB,KAAK,iBAAmB,IAAI,IAC5B,KAAK,cAAgB,IAAI,IACzB,KAAK,cAAgB,IAAI,IACzB,KAAK,gBAAkB,IAAI,IAC3B,KAAK,gBAAkB,IAAI,IAC3B,KAAK,wBAA0B,IAAI,IACnC,KAAK,kBAAoB,IAAI,IAsbjC,OApbA,EAAe,UAAU,MAAQ,WAC7B,KAAK,SAAS,QACd,KAAK,WAAW,OAAO,GACvB,KAAK,YAAY,QACjB,KAAK,QAAQ,QACb,KAAK,iBAAiB,QACtB,KAAK,cAAc,QACnB,KAAK,cAAc,QACnB,KAAK,gBAAgB,QACrB,KAAK,gBAAgB,QACrB,KAAK,wBAAwB,QAC7B,KAAK,kBAAkB,SAE3B,EAAe,UAAU,UAAY,SAAU,EAAS,GACpD,OAAQ,KAAK,SAAS,IAAI,KACrB,KAAK,SAAS,IAAI,GAAW,GAAW,GAEjD,EAAe,UAAU,oBAAsB,SAAU,GACrD,KAAK,WAAW,KAAK,IAEzB,EAAe,UAAU,4BAA8B,WACnD,IAAI,EAAQ,KACZ,KAAK,gBAAgB,QACrB,KAAK,gBAAkB,IAAI,IAAI,KAAK,UACpC,KAAK,uBACL,KAAK,0BAA0B,KAAK,YACpC,KAAK,WAAW,OAAO,GACvB,KAAK,2BACL,KAAK,QAAQ,SAAQ,SAAU,EAAM,GACjC,EAAK,SAAQ,SAAU,GACf,EAAM,SAAS,IAAI,IACnB,EAAM,oBAAoB,EAAG,EAAM,SAAS,IAAI,UAI5D,KAAK,iBAAiB,SAAQ,SAAU,GAChC,EAAM,cAAc,IAAI,IACxB,EAAM,iBAAiB,OAAO,GAC9B,EAAM,cAAc,OAAO,GAC3B,EAAM,oBAAoB,EAzDnB,IA2DF,EAAM,UAAU,EAAG,GACxB,EAAM,iBAAiB,OAAO,GAG9B,EAAM,cAAc,IAAI,MAGhC,KAAK,cAAc,SAAQ,SAAU,GAI3B,MAHS,EAAM,WAAW,GAAG,SAAU,GACzC,OAAQ,EAAM,iBAAiB,IAAI,IAC/B,EAAM,UAAU,EAAK,MAGzB,EAAM,eAAe,GAAG,SAAU,GAC9B,EAAM,oBAAoB,EAzEvB,MA4EF,EAAM,UAAU,EAAG,GACxB,EAAM,cAAc,OAAO,GAG3B,EAAM,cAAc,IAAI,MAGhC,KAAK,gBAAgB,SAAQ,SAAU,GAC/B,EAAM,wBAAwB,IAAI,IAClC,EAAM,wBACD,IAAI,GACJ,SAAQ,SAAU,GACnB,UAIZ,KAAK,gBAAgB,SAEzB,EAAe,UAAU,uBAAyB,SAAU,GACxD,IAAI,EAAQ,KACZ,OAAO,SAAU,GACb,IAAI,EAAU,EAAQ,QAAS,EAAc,EAAQ,YAAa,EAAO,EAAQ,KAAM,EAAsB,EAAQ,oBAAqB,EAAc,EAAQ,YAC5J,EAAkB,WAClB,IAAI,EAAe,GACf,EAAmB,SAAU,EAAS,EAAgB,GACtD,GAAK,EAAM,UAAU,EAAS,GAA9B,CAGA,IACI,EADA,EAAW,EAAe,GAE9B,GAAI,GAAe,GACf,GAAI,GAAsB,GAAc,CACpC,IAAI,EAAQ,GAAgB,EAAa,EAAM,mBAC1C,IACD,EA9GT,IA8GiB,EAA+B,UAAY,WAEvD,EAAgB,EAAc,EAAO,QAGrC,EAAgB,GAAyB,GAAa,SAAU,GAAK,OAAO,EAAe,MAAO,SAAU,GAAY,OAAO,EAAc,EAAU,WAI3J,EAAgB,EAAc,EAAa,GAE/C,EAAa,KAAK,CACd,SAAU,EACV,MAAO,MAMf,GAHA,EA9HO,EA8H4B,GAAyB,IAC5D,EA9HS,EA8H4B,GAA2B,IAChE,EA9HW,EA8H4B,GAA6B,IAChE,EAAM,UAAU,EA9Hf,GA8HyC,CAC1C,IAAI,EAAW,GAAsB,GACjC,EAAgB,EAChB,GAAe,KACf,EAAgB,GAAyB,GAAa,SAAU,GAAK,OAAO,GAAwB,MAAO,SAAU,GAAY,OAAO,GAAiB,EAAU,OAEvK,IAAI,EAAa,GAAmB,EAAe,EAAM,EAAqB,GAC9E,EAAsC,mBAAf,EAA4B,EAAW,GAAS,EACvE,EAAa,KAAK,CACd,SAAU,EACV,MAAO,IAGf,OAAO,GAEP,EAAY,IAAI,IAcpB,MAAO,CACH,aAAc,IACd,aAAc,CAAE,YAfF,SAAU,GACxB,IAAI,EAAW,WACX,IAAI,EAAO,IACX,EAAa,IAEjB,EAAU,IAAI,GACd,EAAM,0BAA0B,EAAS,IASC,gBAPxB,WAClB,EAAU,SAAQ,SAAU,GACxB,EAAM,mCAAmC,EAAS,WASlE,EAAe,UAAU,2BAA6B,SAAU,EAAU,GACtE,IAAI,EAAQ,KACZ,GAAI,EAAY,MAAM,qBAAsB,CACxC,IAAI,EAAS,EAAS,WAAW,cAC7B,EAAyB,UAAb,GAAqC,gBAAb,EACxC,OAAO,SAAU,GACb,IAAI,EAAQ,GAAgB,EAAa,EAAM,mBAK/C,OAJK,IACD,EAAQ,EAAS,UAAY,YAElB,EAAS,GAAmB,EAAW,GAAqB,IAC3D,EAAO,IAG/B,GAAiB,qBAAb,EACA,OAAO,SAAU,GACb,OAAO,GAAyB,GAAa,SAAU,GAAK,OAAO,GAAwB,MAAO,SAAU,GAAY,OAAO,GAAiB,EAAU,OAGlK,GAAiB,UAAb,GAAqC,gBAAb,EACxB,OAAO,SAAU,GACb,OAAO,GAAyB,GAAa,SAAU,GAAK,OAAO,GAA0B,MAAO,SAAU,GAAY,OAAO,GAAmB,EAAU,OAGtK,GAAiB,eAAb,GAA0C,qBAAb,GAAgD,eAAb,EAChE,OAAO,SAAU,GACb,IAAI,EAAc,IAAI,IAClB,EAAS,WACT,IAAI,EAAmB,GAAyB,GAAa,SAAU,GACnE,OAAI,EAAM,UAAU,EAjMrB,GAkMY,GAAwB,GAE/B,EAAM,UAAU,EAjMvB,GAkMc,GAAsB,IAEjC,EAAY,IAAI,GACT,MACR,SAAU,GAAY,OAAO,GAAiB,EAAU,MAC3D,GAAiB,eAAb,EAA2B,CAC3B,IACI,EADiB,GAA0B,EAC1B,CAAe,GACpC,GAAI,EAAe,2BAA6B,EAAe,cAC3D,OAAO,EAAe,OAG9B,OAAO,GAEP,EAAW,IACf,OAAI,EAAY,KAAO,EACZ,IAAI,SAAQ,SAAU,GACzB,IAAI,EAAkB,EAAY,SAAS,OAAO,MAC9C,EAAW,WACX,EAAM,mCAAmC,EAAiB,GAC1D,IAAI,EAAW,IACf,EAAQ,IAEZ,EAAM,0BAA0B,EAAiB,MAGlD,GAGf,GAAI,EAAS,WAAW,WAAa,EAAS,WAAW,WAAY,CACjE,GAAI,EAAY,SAAS,KAAM,CAC3B,IAAI,EAAiB,EAAY,MAAM,mBACvC,GAAI,EAAgB,CAChB,IAAI,EAAU,EAAe,MAC7B,OAAO,SAAU,GAEb,OADY,GAAgB,EAAa,EAAM,mBAQxC,GAJS,EAAY,UAAU,EAAG,GAG1B,GADA,GADH,EAAY,UAAU,EAAS,EAAY,QACjB,EAAM,mBACE,GALnC,IAUvB,OAAO,SAAU,GACb,OAAO,GAAyB,GAAa,SAAU,GAAK,OAAO,GAA4B,MAAO,SAAU,GAAY,OAAO,GAAmB,EAAU,OAGxK,OAAO,MAEX,EAAe,UAAU,0BAA4B,SAAU,EAAS,GAC/D,KAAK,wBAAwB,IAAI,IAClC,KAAK,wBAAwB,IAAI,EAAS,IAAI,KAElD,IAAI,EAAY,KAAK,wBAAwB,IAAI,GAC5C,EAAU,IAAI,IACf,EAAU,IAAI,IAGtB,EAAe,UAAU,mCAAqC,SAAU,EAAS,GACzE,KAAK,wBAAwB,IAAI,IACjC,KAAK,wBAAwB,IAAI,GAAS,OAAO,IAGzD,EAAe,UAAU,0BAA4B,SAAU,GAC3D,IAAI,EAAQ,KACZ,EAAS,SAAQ,SAAU,GACvB,GAAgB,GAAO,SAAU,GAC7B,EAAK,OAAS,GAAuB,EAAK,OAAO,SAAU,EAAU,GAC7D,GAAW,IACX,EAAM,gBAAgB,EAAU,GAEhC,GAAe,IACf,EAAM,oBAAoB,EAAU,aAMxD,EAAe,UAAU,qBAAuB,WAC5C,IAAI,EAAQ,KACZ,GAAuB,SAAS,gBAAgB,OAAO,SAAU,EAAU,GACnE,GAAW,IACX,EAAM,gBAAgB,EAAU,OAI5C,EAAe,UAAU,gBAAkB,SAAU,EAAS,IAC1D,KAAK,kBAAkB,IAAI,EAAS,GAChC,GAAe,IAAU,GAAsB,KAC/C,KAAK,iBAAiB,IAAI,GAC1B,KAAK,YAAY,IAAI,IAErB,KAAK,YAAY,IAAI,MAGzB,KAAK,YAAY,IAAI,GACT,GAAc,GAEtB,KAAK,iBAAiB,IAAI,IAErB,EAAM,SAAS,SACpB,EAAM,SAAS,qBACf,EAAM,SAAS,sBACf,KAAK,oBAAoB,EA7ShB,KAgTjB,EAAe,UAAU,oBAAsB,SAAU,EAAS,GAC9D,IAAI,EAAc,KAAK,gBAAgB,IAAI,IAAY,EAEnD,GADc,KAAK,SAAS,IAAI,IAAY,GACpB,EAC5B,KAAK,SAAS,IAAI,EAAS,IACvB,IAAY,GAAe,KAAK,cAAc,IAAI,MAClD,KAAK,gBAAgB,IAAI,GACzB,KAAK,cAAc,OAAO,IAE9B,KAAK,iBAAiB,OAAO,GAC7B,KAAK,cAAc,OAAO,IAE9B,EAAe,UAAU,yBAA2B,WAChD,IAAI,EAAQ,KACZ,GAAuB,SAAS,gBAAgB,OAAO,SAAU,EAAU,GACnE,GAAe,IACf,EAAM,oBAAoB,EAAU,OAIhD,EAAe,UAAU,oBAAsB,SAAU,EAAU,GAC/D,IAAI,EAAQ,KACR,GAAW,GACX,KAAK,eAAe,GAAO,SAAU,GAC5B,EAAM,QAAQ,IAAI,IACnB,EAAM,QAAQ,IAAI,EAAU,IAAI,KAEpC,EAAM,QAAQ,IAAI,GAAU,IAAI,MAGlB,qBAAb,GAAgD,eAAb,EACxC,KAAK,eAAe,GAAO,SAAU,GAAK,OAAO,EAAM,oBAAoB,EAlVhE,MAoVO,UAAb,GAAqC,gBAAb,EAC7B,KAAK,eAAe,GAAO,SAAU,GAAK,OAAO,EAAM,oBAAoB,EApV9D,MAsVR,EAAS,WAAW,WAAa,EAAS,WAAW,WAC1D,KAAK,eAAe,GAAO,SAAU,GAAK,OAAO,EAAM,oBAAoB,EAtV5D,MAwVG,eAAb,GAA0C,qBAAb,GAClC,KAAK,eAAe,GAAO,SAAU,GACjC,IAAI,EAAM,UAAU,EAAG,GAAvB,CAGA,IAAI,EAGE,MAHU,EAAM,WAAW,GAAG,SAAU,GAC1C,OAAQ,EAAM,iBAAiB,IAAI,IAC/B,EAAM,UAAU,EAAK,MAE7B,EAAM,eAAe,GAAG,SAAU,GAC1B,EACA,EAAM,oBAAoB,EArW3B,GAwWC,EAAM,cAAc,IAAI,WAM5C,EAAe,UAAU,eAAiB,SAAU,EAAO,GACvD,IAAI,EAAU,IAAI,KAqK1B,SAAgC,EAAO,GACnC,GAAyB,GAAO,SAAU,GAEtC,OADA,EAAS,GACF,KAvKP,CAAuB,GAAO,SAAU,GAAK,OAAO,EAAQ,IAAI,MAChE,EAAQ,SAAQ,SAAU,GAAK,OAAO,EAAS,OAEnD,EAAe,UAAU,WAAa,SAAU,EAAS,EAAU,GAC/D,IAAI,EAAK,EAET,QADc,IAAV,IAAoB,EAAQ,IAAI,KAChC,EAAM,IAAI,GACV,OAAO,KAIX,GAFA,EAAM,IAAI,GACG,EAAS,GAElB,OAAO,EAEX,IAAI,EAAO,KAAK,QAAQ,IAAI,GAC5B,IAAK,GAAsB,IAAd,EAAK,KACd,OAAO,KAEX,IACI,IAAK,IAAI,EAAS,EAAS,GAAO,EAAW,EAAO,QAAS,EAAS,KAAM,EAAW,EAAO,OAAQ,CAClG,IAAI,EAAM,EAAS,MACf,EAAQ,KAAK,WAAW,EAAK,EAAU,GAC3C,GAAI,EACA,OAAO,GAInB,MAAO,GAAS,EAAM,CAAE,MAAO,GAC/B,QACI,IACQ,IAAa,EAAS,OAAS,EAAK,EAAO,SAAS,EAAG,KAAK,GAEpE,QAAU,GAAI,EAAK,MAAM,EAAI,OAEjC,OAAO,MAEX,EAAe,UAAU,eAAiB,SAAU,EAAS,GACzD,KAAK,WAAW,GAAS,SAAU,GAE/B,OADA,EAAS,IACF,MAGf,EAAe,UAAU,wBAA0B,SAAU,GACzD,KAAK,sBAAwB,GAEjC,EAAe,UAAU,YAAc,SAAU,EAAc,GAC3D,IAAI,EAAK,EACL,EAAQ,KACR,EAAQ,EAAa,MACrB,EAAM,SAAS,OAAS,GACxB,EAAM,WAAW,GAErB,IAAI,EAAe,IAAI,IACvB,GAAuB,SAAS,gBAAgB,OAAO,SAAU,EAAU,GACnE,GAAW,KACP,EAAM,UAAU,EAvab,IAwaH,EAAa,IAAI,GAAwB,GAAW,GAAiB,EAAO,IAE5E,EAAM,UAAU,EAzaX,IA0aL,EAAa,IAAI,GAA0B,GAAW,GAAmB,EAAO,IAEhF,EAAM,UAAU,EA3aT,IA4aP,EAAa,IAAI,GAA4B,GAAW,GAAqB,EAAO,IAExF,EAAM,0BAA0B,EAAU,EAAM,2BAGxD,IAAI,EAAW,GACf,EAAS,KAAK,WACd,IACI,IAAK,IAAI,EAAiB,EAAS,GAAe,EAAmB,EAAe,QAAS,EAAiB,KAAM,EAAmB,EAAe,OAAQ,CAC1J,IAAI,EAAK,EAAO,EAAiB,MAAO,GAAI,EAAW,EAAG,GAAI,EAAQ,EAAG,GACzE,EAAS,KAAK,OAAS,EAAW,KAAO,EAAQ,MAGzD,MAAO,GAAS,EAAM,CAAE,MAAO,GAC/B,QACI,IACQ,IAAqB,EAAiB,OAAS,EAAK,EAAe,SAAS,EAAG,KAAK,GAE5F,QAAU,GAAI,EAAK,MAAM,EAAI,OAEjC,EAAS,KAAK,KACd,IAAI,EAAU,EAAS,KAAK,MAC5B,EAAM,WAAW,IAEd,EAlcU,IAqcrB,SAAS,GAAiB,EAAO,QACT,IAAhB,IAA0B,EAAc,GAC5C,IAAI,EAAQ,EAAM,QAAQ,OAAQ,GAClC,GAAI,GAAS,EAAG,CACZ,IAAI,EAjiDZ,SAA6B,EAAO,QACP,IAArB,IAA+B,EAAmB,GAItD,IAHA,IAAI,EAAS,EAAM,OACf,EAAQ,EACR,GAAkB,EACb,EAAI,EAAkB,EAAI,EAAQ,IACvC,GAAc,IAAV,EAAa,CAEb,IADI,EAAY,EAAM,QAAQ,IAAK,IACnB,EACZ,MAEJ,EAAiB,EACjB,IACA,EAAI,MAEH,CACD,IAII,EAJA,EAAe,EAAM,QAAQ,IAAK,GACtC,GAAI,EAAe,EACf,MAGJ,IADI,EAAY,EAAM,QAAQ,IAAK,IACnB,GAAK,EAAe,EAAW,CAE3C,GAAc,KADd,EAEI,MAAO,CAAE,MAAO,EAAgB,IAAK,EAAe,GAExD,EAAI,OAGJ,IACA,EAAI,EAIhB,OAAO,KA+/CS,CAAoB,EAAO,EAAQ,GAC/C,OAAI,EACO,CAAE,MAAO,EAAO,IAAK,EAAM,KAE/B,MAcf,SAAS,GAAwB,EAAO,GACpC,IAAI,EAZR,SAA6B,GAIzB,IAHA,IAEI,EAFA,EAAS,GACT,EAAI,EAEA,EAAQ,GAAiB,EAAO,IAAK,CACzC,IAAI,EAAQ,EAAM,MAAO,EAAM,EAAM,IACrC,EAAO,KAAK,CAAE,MAAO,EAAO,IAAK,EAAK,MAAO,EAAM,UAAU,EAAO,KACpE,EAAI,EAAM,IAAM,EAEpB,OAAO,EAGO,CAAoB,GAC9B,EAAe,EAAQ,OAC3B,GAAqB,IAAjB,EACA,OAAO,EAEX,IAAI,EAAc,EAAM,OACpB,EAAe,EAAQ,KAAI,SAAU,GAAK,OAAO,EAAS,EAAE,UAC5D,EAAQ,GACZ,EAAM,KAAK,EAAM,UAAU,EAAG,EAAQ,GAAG,QACzC,IAAK,IAAI,EAAI,EAAG,EAAI,EAAc,IAAK,CACnC,EAAM,KAAK,EAAa,IACxB,IAAI,EAAQ,EAAQ,GAAG,IACnB,EAAM,EAAI,EAAe,EAAI,EAAQ,EAAI,GAAG,MAAQ,EACxD,EAAM,KAAK,EAAM,UAAU,EAAO,IAEtC,OAAO,EAAM,KAAK,IAEtB,SAAS,GAA2B,GAChC,IACI,EACA,EAFA,EAAa,EAAM,QAAQ,KAW/B,OARI,GAAc,GACd,EAAO,EAAM,UAAU,EAAG,GAAY,OACtC,EAAW,EAAM,UAAU,EAAa,EAAG,EAAM,OAAS,GAAG,SAG7D,EAAO,EAAM,UAAU,EAAG,EAAM,OAAS,GAAG,OAC5C,EAAW,IAER,CAAE,KAAM,EAAM,SAAU,GAEnC,SAAS,GAAyB,EAAO,EAAc,GAmBnD,OAAO,GAAwB,GAlBX,SAAU,GAC1B,IAAI,EAAK,GAA2B,GAAQ,EAAO,EAAG,KAAM,EAAW,EAAG,SACtE,EAAU,EAAa,GAC3B,OAAK,EAaE,OAAS,EAAU,MATtB,GAAe,GACD,GAAyB,EAAU,EAAc,GAE1D,EACS,EAAiB,GAGjB,GAE6B,IAZpC,OAAS,EAAU,OAsBtC,SAAS,GAAwB,GAC7B,MAAO,kBAAoB,EAE/B,SAAS,GAA0B,GAC/B,MAAO,oBAAsB,EAEjC,SAAS,GAA4B,GACjC,MAAO,sBAAwB,EAEnC,SAAS,GAAsB,GAC3B,MAAO,qBAAuB,EAElC,SAAS,GAAW,GAChB,OAAO,EAAS,WAAW,MAE/B,SAAS,GAAe,GACpB,OAAO,EAAM,SAAS,QAE1B,SAAS,GAAsB,GAC3B,OAAO,EAAM,MAAM,qBAEvB,SAAS,GAAiB,EAAO,GAC7B,IAAI,EAAM,GAAc,GACxB,OAAO,EAAM,GAAsB,EAAK,GAAS,EAErD,SAAS,GAAmB,EAAO,GAC/B,IAAI,EAAM,GAAc,GACxB,OAAO,EAAM,GAAsB,EAAK,GAAS,EAErD,SAAS,GAAqB,EAAO,GACjC,IAAI,EAAM,GAAc,GACxB,OAAO,EAAM,GAAkB,EAAK,GAAS,EAEjD,SAAS,GAAgB,EAAQ,EAAW,QAC1B,IAAV,IAAoB,EAAQ,IAAI,KACpC,IAAI,GAAwB,EAwBxB,EAAW,GAAwB,GAvBnB,SAAU,GAC1B,IAAI,EAAK,GAA2B,GAAQ,EAAO,EAAG,KAAM,EAAW,EAAG,SAC1E,GAAI,EAAM,IAAI,GAEV,OADA,GAAwB,EACjB,KAEX,EAAM,IAAI,GACV,IAAI,EAAW,EAAU,IAAI,IAAS,EAClC,EAAW,KASf,OARI,IAEI,EADA,GAAe,GACJ,GAAgB,EAAU,EAAW,GAGrC,GAGd,IACD,GAAwB,EACjB,SAKf,OAAI,EACO,KAEJ,EAGX,IAAI,GAAY,CACZ,mBAAoB,CAChB,WAAY,8BACZ,QAAS,mBACT,SAAU,kCAEd,mBAAoB,CAChB,WAAY,8BACZ,QAAS,mBACT,SAAU,kCAEd,eAAgB,CACZ,WAAY,6BACZ,QAAS,eACT,SAAU,iCAEd,sBAAuB,CACnB,WAAY,oCACZ,QAAS,sBACT,SAAU,wCAEd,oBAAqB,CACjB,WAAY,kCACZ,QAAS,oBACT,SAAU,sCAEd,qBAAsB,CAClB,WAAY,mCACZ,QAAS,qBACT,SAAU,uCAEd,mBAAoB,CAChB,WAAY,iCACZ,QAAS,mBACT,SAAU,qCAEd,aAAc,CACV,WAAY,gCACZ,QAAS,aACT,SAAU,oCAEd,MAAS,CACL,WAAY,4BACZ,QAAS,QACT,SAAU,gCAEd,KAAQ,CACJ,WAAY,2BACZ,QAAS,OACT,SAAU,+BAEd,OAAU,CACN,WAAY,6BACZ,QAAS,SACT,SAAU,iCAEd,gBAAiB,CACb,WAAY,8BACZ,QAAS,gBACT,SAAU,kCAEd,aAAc,CACV,WAAY,gCACZ,QAAS,aACT,SAAU,qCAGd,GAAgB,OAAO,OAAO,IAC9B,GAAqB,GACzB,GAAc,SAAQ,SAAU,GAC5B,IAAI,EAAU,EAAG,QAAS,EAAa,EAAG,WAC1C,OAAO,GAAmB,GAAc,KAE5C,IAAI,GAAqB,CAAC,QAAS,OAAQ,aAAc,SAAU,UAAW,SAC1E,GAAwB,GAAmB,KAAI,SAAU,GAAQ,MAAO,IAAM,EAAO,OAAQ,KAAK,MACtG,SAAS,KACL,OAAO,GAAc,KAAI,SAAU,GAC/B,IAAI,EAAW,EAAG,SAAU,EAAa,EAAG,WAC5C,MAAO,CACH,IAAM,EAAW,MACjB,KAH8D,EAAG,QAGhD,SAAW,EAAa,gBACzC,KACF,KAAK,SACR,KAAK,MAYZ,IAAI,GAAgB,IAAI,IACpB,GAAgB,IAAI,IAOxB,SAAS,GAAyB,EAAM,EAAuB,GACvD,GAAc,IAAI,KAClB,GAAc,IAAI,GAAM,aACxB,GAAc,IAAI,GAAM,cAE5B,IAAI,EAAkB,IAAI,QAC1B,SAAS,EAAc,IAxB3B,SAAgC,GAC5B,IAAI,EAAU,GAOd,OANI,aAAgB,SAAW,EAAK,QAAQ,KACxC,EAAQ,KAAK,IAEb,aAAgB,SAAY,GAAwB,aAAgB,YAAe,aAAgB,WACnG,EAAK,EAAS,EAAK,iBAAiB,KAEjC,GAiBH,CAAuB,GAAM,SAAQ,SAAU,GACvC,EAAgB,IAAI,KAGxB,EAAgB,IAAI,GACpB,EAAsB,OAE1B,EAAmB,GAAM,SAAU,GAC3B,EAAgB,IAAI,KAGxB,EAAgB,IAAI,GACpB,EAAqB,EAAE,YACvB,GAAyB,EAAE,WAAY,EAAuB,OAGtE,IAAI,EAAe,GAA4B,EAAM,CACjD,iBAAkB,SAAU,GACR,EAAG,UACT,SAAQ,SAAU,GAAS,OAAO,EAAc,OAE9D,gBAAiB,WACb,EAAc,MAGtB,GAAc,IAAI,EAAM,GACxB,IAAI,EAAe,EACf,EAAQ,KACR,EAAoB,EAAY,CAAE,QAAS,KAC3C,EAAgB,EAAY,CAAE,QAAS,IAEvC,EAAQ,GACR,EAAY,KACZ,EAA2B,GAAS,SAAU,GAC9C,EAAU,SAAQ,SAAU,GACpB,GAAmB,SAAS,EAAE,gBAC9B,EAAsB,EAAE,cAIhC,EAAe,IAAI,kBAAiB,SAAU,GAC9C,GAAI,EACA,EAAM,KAAK,MAAM,EAAO,EAAc,GAAI,EAAO,IAAY,QADjE,CAIA,IACA,IAAI,EAAM,KAAK,MACf,GAAa,MAAT,EACA,EAAQ,OAEP,GAAI,GApBY,GAoBwB,CACzC,GAAI,EAAM,EAAQ,EAUd,OATA,EAAY,YAAW,WACnB,EAAQ,KACR,EAAe,EACf,EAAY,KACZ,IAAI,EAAiB,EACrB,EAAQ,GACR,EAAyB,KAC1B,QACH,EAAM,KAAK,MAAM,EAAO,EAAc,GAAI,EAAO,IAAY,IAGjE,EAAQ,EACR,EAAe,EAEnB,EAAyB,OAE7B,EAAa,QAAQ,EAAM,CACvB,YAAY,EACZ,gBAAiB,GAAmB,OAAO,GAAc,KAAI,SAAU,GAEnE,OADe,EAAG,aAGtB,SAAS,IAEb,GAAc,IAAI,EAAM,GAQ5B,IAAI,GAAmB,IAAI,QACvB,GAAc,CAAC,aAAc,WAAY,YAAa,QAAS,QACnE,SAAS,GAAuB,EAAI,GAChC,OAAO,GACF,KAAI,SAAU,GAAQ,OAAO,EAAO,KAAQ,EAAG,aAAa,GAAQ,OACpE,OAAO,GAAY,KAAI,SAAU,GAAQ,OAAO,EAAO,KAAQ,EAAM,GAAQ,QAC7E,KAAK,KAWd,SAAS,GAAoB,EAAS,EAAO,EAAuB,GAEhE,GADe,GAAuB,EAAS,KAC9B,GAAiB,IAAI,GAAtC,CAGA,IAAI,EAAa,IAAI,IAAI,OAAO,KAAK,KAiBrC,GAAI,EAAsB,OAAS,GA/BvC,SAAiC,EAAS,GACtC,IAAK,IAAI,EAAI,EAAG,EAAM,EAAU,OAAQ,EAAI,EAAK,IAAK,CAClD,IAAI,EAAmB,EAAU,GACjC,GAAI,EAAQ,QAAQ,GAChB,OAAO,EAGf,OAAO,EAyBC,CAAwB,EAAS,GACjC,EAAW,SAAQ,SAAU,GACzB,EAAQ,gBAAgB,GAAU,GAAS,iBAHvD,CAQA,GAAI,EAAQ,aAAa,aACjB,EAAQ,EAAQ,aAAa,YACvB,MAAM,mBAAqB,EAAM,MAAM,qBAC7C,EAAQ,IAAM,GAElB,EAAc,mBAAoB,mBAAoB,GAE1D,GAAI,EAAQ,aAAa,UAA4B,cAAhB,EAAQ,MACrC,EAAQ,EAAQ,aAAa,UACvB,MAAM,mBAAqB,EAAM,MAAM,qBAC7C,EAAQ,IAAM,GAElB,EAAc,QAAS,QAAS,GAEpC,GAAI,aAAmB,WAAY,CAC/B,GAAI,EAAQ,aAAa,QAAS,CAC9B,IACI,EAAU,EAAQ,aAAa,QACnC,GAAgB,SAAZ,EACA,GAAM,aAAmB,eAcrB,EAAc,OAAQ,QAAS,OAdO,CACtC,IAAI,EAAmB,WACnB,IAAI,EAAK,EAAQ,wBAAyB,EAAQ,EAAG,MAAO,EAAS,EAAG,OAExE,EAAc,OADF,EANA,IAM6B,EAN7B,GAOiB,mBAAqB,QAAS,IAE3D,IACA,IAGA,EAA8B,IAQ1C,EAAQ,aAAa,eACrB,EAAc,aAAc,mBAAoB,EAAQ,aAAa,eAG7E,GAAI,EAAQ,aAAa,UAAW,CAChC,IAAI,EAAQ,EAAQ,aAAa,UACjC,EAAc,SAAU,aAAmB,gBAAkB,aAAmB,eAAiB,eAAiB,QAAS,GAE/H,EAAQ,OAAS,GAAuB,EAAQ,OAAO,SAAU,EAAU,GACvE,GAAiB,qBAAb,IAAmC,EAAM,SAAS,OAGtD,GAAI,GAAU,eAAe,GACzB,EAAc,EAAU,EAAU,OAEjC,CACD,IAAI,EAAgB,GAAmB,GACvC,GAAI,IACE,EAAQ,MAAM,iBAAiB,KAAmB,EAAQ,aAAa,GAAiB,CAC1F,GAAsB,qBAAlB,GAAwC,EAAQ,aAAa,WAC7D,OAEJ,EAAQ,MAAM,YAAY,EAAU,SAI5C,EAAQ,OAAS,aAAmB,gBAAkB,EAAQ,MAAM,MACpE,EAAc,OAAQ,QAAS,EAAQ,MAAM,iBAAiB,SAElE,EAAQ,GAAY,SAAU,GAC1B,EAAQ,gBAAgB,GAAU,GAAS,aAE/C,GAAiB,IAAI,EAAS,GAAuB,EAAS,KA7F9D,SAAS,EAAc,EAAe,EAAiB,GACnD,IAAI,EAAK,GAAU,GAAgB,EAAa,EAAG,WAAY,EAAW,EAAG,SACzE,EAAM,GAA4B,EAAiB,EAAQ,GAAI,GAAgB,EAAsB,MACzG,GAAK,EAAL,CAGA,IAAI,EAAQ,EAAI,MACK,mBAAV,IACP,EAAQ,EAAM,IAElB,EAAQ,MAAM,YAAY,EAAY,GACjC,EAAQ,aAAa,IACtB,EAAQ,aAAa,EAAU,IAEnC,EAAW,OAAO,KAkF1B,IAAI,GAAqB,cACrB,GAAyB,2BACzB,GAAoB,KACpB,GAAW,KACf,SAAS,GAAqB,EAAM,GAChC,GAAoB,IAAqB,EAAK,QAC9C,IACI,IAAI,EAAQ,GAAM,IAClB,EAAK,QAAU,GAAsB,EAAO,GAEhD,MAAO,GACH,EAAQ,IAwChB,IAAI,GAAiB,CACjB,OACA,aACA,WACA,YACA,QACA,4BACA,sBACA,6BACA,wBAKJ,IAAI,GA9+FJ,WACI,IAAI,EAAQ,GACR,EAAU,KACd,SAAS,IAEL,IADA,IAAI,EACI,EAAO,EAAM,SACjB,IAEJ,EAAU,KAad,MAAO,CAAE,IAXT,SAAa,GACT,EAAM,KAAK,GACN,IACD,EAAU,sBAAsB,KAQrB,OALnB,WACI,EAAM,OAAO,GACb,qBAAqB,GACrB,EAAU,OA29FD,GACjB,SAAS,KACL,IAAI,EAAW,EACX,EAAiB,IAAI,IACrB,EAAgB,IAAI,IACpB,EAAwB,IAAI,IAC5B,EAAgB,KAChB,GAAmB,EACnB,GAAa,EAyNjB,MAAO,CAAE,YArNT,SAAqB,GACjB,IAAI,EAAQ,EAAQ,eAChB,EAAQ,EAAQ,MAAO,EAAsB,EAAQ,oBAAqB,EAAQ,EAAQ,MAAO,EAAe,EAAQ,aAAc,EAAmB,EAAQ,iBACjK,EAAuC,IAAvB,EAAc,KAC9B,EAAoB,IAAI,IAAI,EAAc,QAC1C,EApBZ,SAAqB,GACjB,OAAO,GAAe,KAAI,SAAU,GAAK,OAAO,EAAI,IAAM,EAAM,MAAO,KAAK,KAmBzD,CAAY,GACvB,EAAgB,IAAa,EAC7B,IACA,GAAa,GAEjB,IAAI,EAAW,GAyCf,GAxCA,GAAgB,GAAO,SAAU,GAC7B,IAAI,EAAU,EAAK,QACf,GAAsB,EAS1B,GARA,EAAkB,OAAO,GACrB,EAAK,sBAAsB,eAC3B,GAAW,IAAM,EAAK,WAAW,MAAM,WAEtC,EAAe,IAAI,KACpB,EAAe,IAAI,GACnB,GAAsB,GAEtB,EAAJ,CACI,GAAe,EAMnB,IAAI,EAAU,GACd,EAAK,OAAS,GAAuB,EAAK,OAAO,SAAU,EAAU,GACjE,IAAI,EAAM,GAA4B,EAAU,EAAO,EAAM,GAAgB,EAAqB,GAC9F,GACA,EAAQ,KAAK,MAGrB,IAAI,EAAU,KACd,GAAI,EAAQ,OAAS,EAAG,CACpB,IAAI,EAAa,EAAK,WACtB,EAAU,CAAE,SAAU,EAAK,aAAc,aAAc,EAAS,WAAY,GAC5E,EAAS,KAAK,GAElB,EAAc,IAAI,EAAS,QAhBvB,EAAS,KAAK,EAAc,IAAI,OAiBrC,WACC,GAAmB,KAEvB,EAAkB,SAAQ,SAAU,GAChC,EAAe,OAAO,GACtB,EAAc,OAAO,MAEzB,EAAgB,EACX,GAAU,GAAiB,EAAhC,CAGA,IAUA,IAAI,EAAoB,IAAI,IACxB,EAAkB,IAAI,IACtB,EAA0B,EAC1B,EAAwB,EACxB,EAAiB,CAAE,KAAM,KAAM,MAAO,GAAI,SAAS,GACnD,EAAY,IAAI,QAcpB,EAAsB,SAAQ,SAAU,GAAS,OAAO,OACxD,EAAsB,QACtB,EAAS,QAAO,SAAU,GAAK,OAAO,KAAM,SAAQ,SAAU,GAC1D,IAAI,EAAW,EAAG,SAAU,EAAe,EAAG,aAC1C,EAAQ,EAD6D,EAAG,YAExE,EAAiB,CAAE,SAAU,EAAU,aAAc,GAAI,SAAS,GAClE,EAAoB,EAAe,aAEvC,SAAS,EAAuB,EAAU,EAAU,EAAW,GAC3D,IAAI,IAAa,EACb,EAAmB,CAAE,SAAU,EAAU,MAAO,KAAM,UAAW,EAAW,SAAU,EAAU,YAAa,GACjH,EAAkB,KAAK,GACvB,IAAI,EAAkB,EACtB,EAAS,MAAK,SAAU,GACf,IAAc,KAAsB,IAAoB,IAG7D,EAAiB,MAAQ,EACzB,GAAW,KAAI,WACP,KAAsB,IAAoB,GAkG9D,SAA0B,GACtB,IAAI,EAAK,EAAkB,IAAI,GAAM,EAAO,EAAG,KAAM,EAAS,EAAG,OAAQ,EAAQ,EAAG,MACpF,EAAO,WAAW,GAClB,EAAQ,EAAQ,EAAO,GACvB,EAAkB,OAAO,GAnGb,CAAiB,UAI7B,SAAS,EAAsB,EAAU,EAAU,EAAW,GAC1D,IAAI,EAAK,EAAU,EAAU,EAAG,aAAc,EAAe,EAAG,aAC5D,IAAW,EACX,EAAkB,EAClB,EAAe,EAAkB,OACjC,EAAU,GACd,GAAuB,IAAnB,EAAQ,OAAc,CACtB,IAAI,EAAU,CAAE,SAAU,EAAU,MAAO,EAAa,UAAW,EAAW,YAAa,EAAa,OAAQ,GAChH,EAAkB,KAAK,GACvB,EAAU,CAAC,GAEf,EAAQ,SAAQ,SAAU,GACtB,GAAI,EAAI,iBAAiB,QACrB,EAAuB,EAAI,SAAU,EAAI,MAAO,EAAW,OAE1D,CACD,IAAI,EAAW,CAAE,SAAU,EAAI,SAAU,MAAO,EAAI,MAAO,UAAW,EAAW,YAAa,EAAa,OAAQ,GACnH,EAAkB,KAAK,GACvB,EAAQ,KAAK,OAGrB,EAAa,aAAY,SAAU,GAC/B,IAAI,KAAsB,IAAoB,EAA9C,CAGA,IAAI,EAAe,EAAQ,KAAI,SAAU,GACrC,MAAO,CAAE,SAAU,EAAI,SAAU,MAAO,EAAI,MAAO,UAAW,EAAW,YAAa,EAAa,OAAQ,MAE3G,EAAQ,EAAkB,QAAQ,EAAQ,GAAI,GAClD,EAAkB,OAAO,MAAM,EAAmB,EAAc,CAAC,EAAO,EAAQ,QAAS,EAAO,IAAe,IAC/G,EAAU,EAmEtB,SAAwB,GACpB,IAAI,EAAK,EAAgB,IAAI,GAAM,EAAO,EAAG,KAAM,EAAS,EAAG,OAAQ,EAAQ,EAAG,MAClF,EAAO,WAAW,GAClB,EAAQ,EAAQ,EAAO,GArEf,CAAe,OAEnB,EAAsB,KAAI,WAAc,OAAO,EAAa,qBApDhE,EAAM,MAAM,KAAK,GAsDjB,EAAa,SAAQ,SAAU,GAC3B,IAAI,EAAW,EAAG,SAAU,EAAQ,EAAG,MAAO,EAAY,EAAG,UAAW,EAAc,EAAG,YACzF,GAAqB,mBAAV,EAAsB,CAC7B,IAAI,EAAW,EAAM,GACjB,aAAoB,QACpB,EAAuB,EAAU,EAAU,EAAW,GAEjD,EAAS,WAAW,MACzB,EAAsB,EAAU,EAAU,EAAW,GAGrD,EAAkB,KAAK,CAAE,SAAU,EAAU,MAAO,EAAU,UAAW,EAAW,YAAa,SAIrG,EAAkB,KAAK,CAAE,SAAU,EAAU,MAAO,EAAO,UAAW,EAAW,YAAa,UAI1G,IAAI,EAAQ,KAYR,SAAS,EAAkB,EAAO,EAAQ,GACtC,EAAM,MAAM,SAAQ,SAAU,GAC1B,GAAI,EAAE,QAAS,CACX,IAAI,EAbhB,SAAsB,EAAO,GACzB,IAAI,EAAO,EAAM,KACjB,GAAI,aAAgB,aAAc,CAC9B,IAAI,EAAQ,EAAK,MACb,EAAQ,EAAO,SAAS,OAE5B,OADA,EAAO,WAAW,UAAY,EAAM,UAAY,MAAO,GAChD,EAAO,SAAS,GAE3B,OAAO,EAKS,CAAa,EAAG,GACxB,EAAkB,EAAG,EAAG,QAGxB,EAAc,EAAG,MAI7B,CAAkB,EAAgB,GAAO,SAAU,EAAM,GACrD,IAAI,EAAQ,EAAO,SAAS,OAC5B,EAAK,aAAa,SAAQ,SAAU,GAChC,IAAI,EAAW,EAAG,SAAU,EAAS,EAAG,OACxB,MAAZ,GACA,EAAkB,IAAI,EAAU,CAAE,KAAM,EAAM,OAAQ,EAAQ,MAAO,IAE3D,MAAV,GACA,EAAgB,IAAI,EAAQ,CAAE,KAAM,EAAM,OAAQ,EAAQ,MAAO,OAGzE,EAAQ,EAAQ,EAAO,MA9I/B,SAAS,EAAQ,EAAQ,EAAO,GAC5B,IAKI,EALW,EAAK,SAKM,MALmB,EAAK,aAKH,KAJtB,SAAU,GAC/B,IAAI,EAAW,EAAI,SAAU,EAAQ,EAAI,MAAO,EAAY,EAAI,UAAW,EAAc,EAAI,YAC7F,OAAO,EAAW,MAAiB,MAAT,EAAgB,EAAc,IAAU,EAAY,cAAgB,IAAM,OAEjC,KAAK,KAAO,KACnF,EAAO,WAAW,EAAU,GAQhC,SAAS,EAAS,GACd,GAAY,MAAR,EACA,OAAO,EAEX,GAAI,EAAU,IAAI,GACd,OAAO,EAAU,IAAI,GAEzB,IAAI,EAAQ,CAAE,KAAM,EAAM,MAAO,GAAI,SAAS,GAI9C,OAHA,EAAU,IAAI,EAAM,GACF,EAAS,EAAK,YACpB,MAAM,KAAK,GAChB,IAoIoB,mBAxNnC,WACI,OAAO,IAAqB,IA2NpC,SAAS,GAAkB,GACvB,OAAU,aAAmB,kBACxB,aAAmB,iBACnB,aAAmB,iBAChB,EAAQ,KACR,EAAQ,IAAI,cAAc,SAAS,gBAClC,EAAQ,YACZ,EAAQ,UAAU,SAAS,eACI,UAAhC,EAAQ,MAAM,gBACb,EAAQ,UAAU,SAAS,UAEpC,SAAS,GAAoB,EAAM,EAAS,GAYxC,YAXgB,IAAZ,IAAsB,EAAU,SACvB,IAAT,IAAmB,GAAO,GAC1B,GAAkB,GAClB,EAAQ,KAAK,IAER,aAAgB,SAAY,GAAwB,aAAgB,YAAe,IAAS,YACjG,EAAQ,EAAK,iBAnBA,qDAmBkC,SAAU,GAAS,OAAO,GAAoB,EAAO,GAAS,MACzG,GACA,EAAmB,GAAM,SAAU,GAAQ,OAAO,GAAoB,EAAK,WAAY,GAAS,OAGjG,EAEX,IAAI,GAAe,IAAI,QACnB,GAAe,IAAI,QACnB,IAA0B,EAC9B,SAAS,iBAAiB,sCAAsC,WAC5D,IAA0B,KAE9B,IAAI,GAAqB,EACrB,GAA2B,IAAI,IAInC,SAAS,GAAY,EAAS,GAI1B,IAHA,IAAI,EAAS,EAAG,OAAQ,EAAe,EAAG,aAAc,EAAa,EAAG,WACpE,EAAa,GACb,EAAO,GACH,EAAO,EAAK,qBAAuB,EAAK,QAAQ,gBACpD,EAAW,KAAK,GAEpB,IAAI,EAAW,EAAW,MAAK,SAAU,GAAM,OAAO,EAAG,QAAQ,uBAAyB,GAAa,IAAI,OAAW,KAClH,EAAY,EAAW,MAAK,SAAU,GAAM,OAAO,EAAG,QAAQ,uBAAyB,GAAa,IAAI,OAAW,KACnH,EAA0B,KAC1B,EAA2B,KAC3B,GAAwB,EACxB,GAAkB,EAClB,EAAgB,KAChB,EAAW,IAAI,kBAAiB,WAChC,OAEA,EAAkB,CAAE,YAAY,EAAM,WAAW,EAAM,SAAS,EAAM,eAAe,GACzF,SAAS,IACL,OAAO,aAAmB,kBAAoB,EAAQ,YAAY,OAAO,MAAM,IAEnF,SAAS,EAAW,EAAU,GAC1B,IAAI,GAAS,EACb,GAAI,EAAU,CACV,IAAI,OAAO,EACX,EAAc,IAAK,IAAI,EAAI,EAAG,EAAM,EAAS,OAAQ,EAAI,EAAK,IAE1D,IADA,EAAO,EAAS,IACP,KAAM,CACX,IAAI,EAMC,CACD,GAAS,EACT,MAAM,EAPN,GAAI,EAAK,KAAK,WAAW,UAAY,EAAK,KAAK,WAAW,SAAS,QAAS,CACxE,GAAS,EACT,MAAM,IAU1B,OAAO,EAEX,SAAS,IACL,GAAI,EAEA,OADA,EAAQ,mCACD,EAAS,MAAM,SAE1B,GAAI,IAEA,OADA,EAAQ,sCACD,KAEX,IAAI,EAAW,IACf,OAAI,aAAmB,kBAClB,GAA6B,EAAQ,OACtC,EAAW,GAAU,IACrB,EAAQ,4DACD,MAEP,EAAW,GAAU,IACrB,EAAQ,uDACD,OAEX,EAAQ,mCACP,GAAY,EAAQ,kDACd,GAEX,SAAS,IACD,GACI,EAAQ,cAAgB,GACxB,EAAQ,WAAW,aAAa,EAAU,EAAQ,aAElD,EAAS,cAAgB,GACzB,EAAQ,WAAW,aAAa,EAAW,EAAS,cAGnD,EAAQ,cAAgB,GAC7B,EAAQ,WAAW,aAAa,EAAW,EAAQ,aAe3D,IAAI,GAAiB,EACjB,GAAkB,EAClB,IAAkB,GACtB,SAAS,IACL,OAAO,EAAU,UAAM,OAAQ,GAAQ,WACnC,IAAI,EAAS,EAAa,EAAI,EAAU,EAAoB,EACxD,EACJ,OAAO,EAAY,MAAM,SAAU,GAC/B,OAAQ,EAAG,OACP,KAAK,EACD,KAAM,aAAmB,iBAAkB,MAAO,CAAC,EAAG,GAKtD,GAJA,EAAK,EAAO,IAAmB,GAAI,EAAW,EAAG,IAAI,EAAc,EAAG,KAElE,EAAQ,MAEJ,IAAa,IAAgB,GAChC,IAAa,EAAQ,QA0KjB,EAzKe,EA0KjC,GAAS,EAAM,SAAW,EAAM,QAAQ,SAAS,aA1KD,MAAO,CAAC,EAAG,GAClD,EAAG,MAAQ,EACf,KAAK,EAGD,OAFA,EAAG,KAAK,KAAK,CAAC,EAAG,EAAG,CAAE,IACtB,EAAQ,eAAiB,EAAgB,gDAAiD,GACnF,CAAC,EAAG,GAAY,EAAS,IACpC,KAAK,EAED,OADA,EAAG,OACI,CAAC,EAAG,GACf,KAAK,EAID,OAFA,EADQ,EAAG,QAEX,GAAkB,EACX,CAAC,EAAG,GACf,KAAK,EACD,GAAI,EACA,MAAO,CAAC,EAAG,MAEf,EAAK,EAAO,IAAmB,GAAI,EAAW,EAAG,IAAI,EAAc,EAAG,KAElE,EAAQ,GAEZ,EAAG,MAAQ,EACf,KAAK,EACD,GAAI,EAAU,CACV,GAAI,GAA6B,EAAQ,MACrC,MAAO,CAAC,EAAG,GAEV,IAAK,EAAW,GAAU,GAC3B,MAAO,CAAC,EAAG,GAGnB,MAAO,CAAC,EAAG,GAAS,EAAQ,OAChC,KAAK,EAGD,OAFA,EAAU,EAAG,OACb,EAAc,GAAe,EAAQ,MACjC,EACO,CAAC,EAAG,MAER,CAAC,EAAG,GACf,KAAK,EACD,IAAI,IAKA,MAAO,CAAC,EAAG,MAJX,EAAU,EAAQ,YAAY,OAC9B,EAAc,GAAe,SAAS,MAK1C,EAAG,MAAQ,EACf,KAAK,EACD,IAAK,EAAS,MAAO,CAAC,EAAG,IACzB,EAAG,MAAQ,EACf,KAAK,EAED,OADA,EAAG,KAAK,KAAK,CAAC,EAAG,GAAI,CAAE,KAChB,CAAC,EAAG,GAAkB,EAAS,IAC1C,KAAK,GAGD,OAFA,EAAc,EAAG,OACjB,EAoWxB,SAAwB,EAAY,GAChC,IAAK,EACD,OAAO,KAEX,IAAI,EAAO,SAAS,cAAc,SAQlC,OAPA,EAAK,UAAU,IAAI,cACnB,EAAK,UAAU,IAAI,oBACnB,EAAK,MAAQ,SACb,EAAK,YAAc,EACnB,EAAW,WAAW,aAAa,EAAM,EAAW,aACpD,EAAK,MAAM,UAAW,EACtB,GAAa,IAAI,GACV,EAhXwB,CAAe,EAAS,GAC5B,CAAC,EAAG,IACf,KAAK,GAGD,OADA,EADQ,EAAG,QAEJ,CAAC,EAAG,IACf,KAAK,GACD,GAAI,EAEA,OADA,EAA0B,EAAqB,EAAU,gBAClD,CAAC,EAAG,EAAS,MAAM,UAE9B,EAAG,MAAQ,GACf,KAAK,GAAI,MAAO,CAAC,EAAG,MAoGpC,IAA6B,QAxE7B,IAAI,GAAmB,EA6DvB,SAAS,IACL,IACI,OAAqB,MAAjB,EAAQ,MACD,CAAC,KAAM,MAEX,CAAC,EAAQ,MAAM,SAAU,MAEpC,MAAO,GACH,MAAO,CAAC,KAAM,IAMtB,SAAS,IACL,IAAI,EAAK,EAAO,IAAmB,GAAI,EAAW,EAAG,GAAI,EAAM,EAAG,GAClE,OAAI,GACA,EAAQ,GACD,MAEJ,EAEX,SAAS,IAyDL,EAAQ,iBAAiB,4BAA6B,GAvDjD,GAAmB,IAA2B,EAAQ,OAa/D,WACI,EAAiB,IACjB,IACA,IAAI,EAAiB,WALd,MAAwB,IAOvB,EAAiB,IACjB,KAEA,IAA2B,EAAQ,MACnC,IAGJ,EAAoB,sBAAsB,IAE9C,IA1BI,GAGR,IAAI,EAAiB,KACjB,EAAoB,KACxB,SAAS,IACL,IAAI,EAAQ,IACZ,OAAO,EAAQ,EAAM,OAAS,KAqBlC,SAAS,IACL,qBAAqB,GAEzB,IAAI,GAAyB,EAC7B,SAAS,IAML,SAAS,IACL,GAAyB,EACrB,GAGJ,IAVJ,IAA0B,EAC1B,IACI,IAUJ,GAAyB,EACK,mBAAnB,eACP,eAAe,GAGf,sBAAsB,IAS9B,SAAS,IAFL,EAAQ,oBAAoB,4BAA6B,GAIzD,IAEJ,SAAS,IACL,EAAS,aACT,GAAwB,EACxB,GAA2B,EAAwB,OACnD,GAA4B,EAAyB,OACrD,IAmBJ,IACI,EAAY,EAmBhB,MAAO,CACH,QAzNJ,WACI,IAAI,EAAQ,IACZ,OAAK,EAmBE,CAAE,MAAO,IAlBR,GAAkB,IAGtB,GAAiB,EACjB,IACA,IAAgB,MAAK,SAAU,GAC3B,GAAiB,EACjB,IACI,GACA,OAEL,OAAM,SAAU,GACf,EAAQ,GACR,GAAiB,EACjB,QAbO,OAsNf,OAlMJ,SAAgB,EAAO,GACnB,IAAI,EAAQ,IAmBZ,SAAS,IAoBL,OAnBK,KAnJT,EAAY,aAAmB,gBAC3B,SAAS,gBAAgB,6BAA8B,SACvD,SAAS,cAAc,UACjB,UAAU,IAAI,cACxB,EAAU,UAAU,IAAI,oBACxB,EAAU,MAAQ,UACb,GAAc,EAAQ,QACvB,EAAU,MAAQ,EAAQ,OAE9B,GAAa,IAAI,IA6Ib,GAA4B,EAAyB,OACrD,IACuB,MAAnB,EAAU,QACV,EAAU,YAAc,IArBhC,SAAiC,GAC7B,IACI,GAAI,EAAM,YAEN,YADA,EAAM,YAAY,IAI1B,MAAO,GACH,EAAQ,4DAA6D,GAEzE,IAAK,IAAI,EAAI,EAAM,SAAS,OAAS,EAAG,GAAK,EAAG,IAC5C,EAAM,WAAW,GAarB,CADY,EAAU,OAElB,EACA,EAAyB,MAGzB,EAA2B,EAAqB,EAAW,gBAAgB,WACvE,GAAmB,EACnB,OAGD,EAAU,MAErB,SAAS,IACL,IAAI,EAAQ,EACZ,GAAmB,EACnB,EAAc,YAAY,CACtB,aAAc,EACd,eAAgB,EAChB,MAAO,EACP,oBAAqB,EACrB,MAAO,EACP,iBAAkB,WAAc,OAAO,KAE3C,EAAsD,IAApC,EAAU,MAAM,SAAS,OACvC,EAAc,sBACd,GAA8B,WAAc,OAAO,OArDtD,IAGL,GAAwB,EAqDxB,MAyIA,MAAO,EACP,QAzCJ,WAKI,GAJA,IACA,EAAW,GACX,EAAW,GACX,IACI,GAAyB,IAAI,GAAgB,CAC7C,IAAI,EAAS,GAAyB,IAAI,GAC1C,GAAyB,OAAO,GAChC,GAAU,MAkCd,MA/BJ,WACI,EAAS,QAAQ,EAAS,GACtB,aAAmB,kBACnB,KA6BJ,QAxBJ,WACS,MAGL,EANe,GAQX,EAAQ,uCAAwC,IAGpD,EAAQ,gBAAiB,EAAW,GACpC,IACA,GAA2B,EAAwB,OACnD,GAA4B,EAAyB,OAChD,IACD,GAAmB,EACnB,SAYZ,SAAS,GAAY,EAAM,GACvB,OAAO,EAAU,UAAM,OAAQ,GAAQ,WACnC,OAAO,EAAY,MAAM,SAAU,GAC/B,MAAO,CAAC,EAAG,IAAI,SAAQ,SAAU,EAAS,GAClC,IAAI,EAAU,WACV,EAAK,oBAAoB,OAAQ,GACjC,EAAK,oBAAoB,QAAS,GAClC,GAAyB,OAAO,IAEhC,EAAS,WACT,IACA,EAAQ,eAAiB,EAAY,oBACrC,KAEA,EAAU,WACV,IACA,EAAO,eAAiB,EAAY,wBAA0B,EAAK,OAEvE,GAAyB,IAAI,GAAW,WACpC,IACA,OAEJ,EAAK,iBAAiB,OAAQ,GAC9B,EAAK,iBAAiB,QAAS,GAC1B,EAAK,MACN,cASxB,SAAS,GAAS,GACd,OAAO,EAAU,UAAM,OAAQ,GAAQ,WACnC,OAAO,EAAY,MAAM,SAAU,GAC/B,OAAQ,EAAG,OACP,KAAK,EACD,OAAK,EAAI,WAAW,SACb,CAAC,EAAG,MAAM,IADoB,CAAC,EAAG,GAE7C,KAAK,EAAG,MAAO,CAAC,EAAI,EAAG,OAAQ,QAC/B,KAAK,EAEL,KAAK,EAAG,MAAO,CAAC,EAAG,EAAG,QADtB,KAAK,EAAG,MAAO,CAAC,EAAG,GAAQ,CAAE,IAAK,EAAK,aAAc,OAAQ,SAAU,WAAY,OAAQ,OAAO,SAAS,iBAM3H,SAAS,GAAkB,EAAS,EAAU,GAE1C,YADc,IAAV,IAAoB,EAAQ,IAAI,KAC7B,EAAU,UAAM,OAAQ,GAAQ,WACnC,IAAI,EAAe,EAAiB,EAAmB,EAAO,EAAW,EAAa,EAAoB,EACtG,EAAK,EACT,OAAO,EAAY,MAAM,SAAU,GAC/B,OAAQ,EAAG,OACP,KAAK,EAGD,EA1xGpB,SAA4C,EAAM,GAC9C,OAAO,EAAK,QAAQ,IAAa,SAAU,GACvC,IAAI,EAAY,GAAe,GAC/B,MAAO,QAAW,GAAe,EAAa,GAAa,QAuxGrC,CADV,EA9wGpB,SAA4B,GACxB,OAAO,EAAK,QAAQ,GAAe,IA6wGT,CADV,EAA4B,EAhxGhC,QAAQ,GAAkB,KAkxGgC,GACtD,EAAgB,GAAW,GAAgB,GAC3C,EAAG,MAAQ,EACf,KAAK,EACD,EAAG,KAAK,KAAK,CAAC,EAAG,GAAI,GAAI,KACzB,EAAkB,EAAS,GAAgB,EAAoB,EAAgB,OAC/E,EAAG,MAAQ,EACf,KAAK,EACD,OAAM,EAAkB,KAAa,CAAC,EAAG,IACzC,EAAQ,EAAkB,MAC1B,EArCT,GAqCqC,EArCJ,UAAU,GAAG,OAAO,QAAQ,KAAM,KAsC1D,EAAc,GAAe,EAAU,GACvC,OAAc,EACT,EAAM,IAAI,IACf,EAAc,EAAM,IAAI,GACjB,CAAC,EAAG,IAFyB,CAAC,EAAG,IAG5C,KAAK,EAED,OADA,EAAG,KAAK,KAAK,CAAC,EAAG,EAAG,CAAE,IACf,CAAC,EAAG,GAAS,IACxB,KAAK,EAGD,OAFA,EAAc,EAAG,OACjB,EAAM,IAAI,EAAa,GAChB,CAAC,EAAG,GAAkB,EAAa,GAAe,GAAc,IAC3E,KAAK,EAED,OADA,EAAc,EAAG,OACV,CAAC,EAAG,GACf,KAAK,EAID,OAFA,EADQ,EAAG,QAEX,EAAc,GACP,CAAC,EAAG,GACf,KAAK,EACD,EAAU,EAAQ,MAAM,GAAO,KAAK,GACpC,EAAG,MAAQ,EACf,KAAK,EAED,OADA,EAAoB,EAAgB,OAC7B,CAAC,EAAG,GACf,KAAK,EAAG,MAAO,CAAC,EAAG,IACnB,KAAK,GAGD,OAFA,EAAQ,EAAG,OACX,EAAM,CAAE,MAAO,GACR,CAAC,EAAG,IACf,KAAK,GACD,IACQ,IAAsB,EAAkB,OAAS,EAAK,EAAgB,SAAS,EAAG,KAAK,GAE/F,QAAU,GAAI,EAAK,MAAM,EAAI,MAC7B,MAAO,CAAC,GACZ,KAAK,GAED,MAAO,CAAC,EADR,EAAU,EAAQ,eAqBtC,IACI,GAEA,GAHA,GAAY,GAEZ,GAAkB,IAAI,IAE1B,SAAS,GAAyB,GACzB,GAGL,EAAQ,EAAK,iBAAiB,mBAAmB,SAAU,GACvD,IAAI,EAAM,EAAG,QAAQ,cACrB,IAAK,EAAI,SAAS,KAAM,CACpB,IAAI,EAAc,EAAG,aAAa,MAClC,IAAI,EAIA,OAHA,EAAM,EAMT,GAAgB,IAAI,KACrB,GAAgB,IAAI,EAAK,IAAI,KAwBzC,SAAmC,GAC/B,OAAO,EAAU,UAAM,OAAQ,GAAQ,WACnC,OAAO,EAAY,MAAM,SAAU,GAC/B,MAAO,CAAC,EAAG,IAAI,SAAQ,SAAU,GACzB,GAAI,OAAO,gBAAwD,mBAA/B,eAAe,YAC/C,eAAe,YAAY,GAAK,MAAK,WAAc,OAAO,YAEzD,GAAI,GACL,GAAU,IAAI,EAAK,GACnB,SAAS,cAAc,IAAI,YAAY,qCAAsC,CAAE,OAAQ,CAAE,IAAK,UAE7F,CACD,IAAI,EAAmB,WACnB,IAAI,EAAW,GAAgB,IAAI,GAC/B,GAAY,EAAS,KAAO,IACxB,EAAS,SAAS,OAAO,MAAM,QAAQ,YACvC,IAGA,sBAAsB,KAIlC,sBAAsB,cA9ClC,CAA0B,GAAK,MAAK,WAChC,GAAI,GAA4B,CAC5B,IAAI,EAAW,GAAgB,IAAI,GACnC,GAAgB,OAAO,GACvB,GAA2B,MAAM,KAAK,SAIlD,GAAgB,IAAI,GAAK,IAAI,MAGrC,IAAI,IAAwB,EAC5B,SAAS,iBAAiB,sCAAsC,WAC5D,IAAwB,KAE5B,IAAI,GAAY,IAAI,IACpB,SAAS,GAAgB,IACrB,IAAwB,EACpB,GAAU,IAAI,EAAE,OAAO,OACT,GAAU,IAAI,EAAE,OAAO,IACrC,GAwCR,SAAS,GAAqB,EAAe,EAAQ,GACjD,KACA,IAAI,EAAa,IAAI,IAAI,GACrB,EAAoB,IAAI,QACxB,EAAoB,IAAI,QAC5B,SAAS,EAAkB,GACvB,EAAkB,IAAI,EAAO,EAAM,wBACnC,EAAkB,IAAI,EAAO,EAAM,oBAWvC,SAAS,EAAsB,GAC3B,IAAI,EAAgB,EAAW,cAAe,EAAgB,EAAW,cAAe,EAAc,EAAW,YACjH,EAAc,SAAQ,SAAU,GAAK,OAAO,EAAkB,MAC9D,EAAY,SAAQ,SAAU,GAAK,OAAO,EAAkB,MAC5D,EAAc,SAAQ,SAAU,GAAK,OAbZ,EAauC,EAZhE,EAAkB,OAAO,QACzB,EAAkB,OAAO,GAF7B,IAA6B,KAczB,EAAc,SAAQ,SAAU,GAAK,OAAO,EAAW,IAAI,MAC3D,EAAc,SAAQ,SAAU,GAAK,OAAO,EAAW,OAAO,MAC1D,EAAc,KAAO,EAAc,KAAO,EAAY,KAAO,GAC7D,EAAO,CACH,QAAS,MAAM,KAAK,GACpB,QAAS,MAAM,KAAK,GACpB,MAAO,MAAM,KAAK,GAClB,QAAS,KAIrB,SAAS,EAAyB,GAC9B,IAAI,EAAY,EAAG,UAAW,EAAQ,EAAG,MAAO,EAAY,EAAG,UAC3D,EAAgB,IAAI,IACpB,EAAgB,IAAI,IACpB,EAAc,IAAI,IACtB,EAAU,SAAQ,SAAU,GAAQ,OAAO,GAAoB,GAAM,SAAQ,SAAU,GAAS,OAAO,EAAc,IAAI,SACzH,EAAU,SAAQ,SAAU,GAAQ,OAAO,GAAoB,GAAM,SAAQ,SAAU,GAAS,OAAO,EAAc,IAAI,SACzH,EAAM,SAAQ,SAAU,GAAQ,OAAO,GAAoB,GAAM,SAAQ,SAAU,GAAS,OAAO,EAAY,IAAI,SACnH,EAAsB,CAAE,cAAe,EAAe,cAAe,EAAe,YAAa,IACjG,EAAU,SAAQ,SAAU,GACxB,EAAmB,EAAG,GACtB,GAAyB,MAGjC,SAAS,EAAwB,GAC7B,IAAI,EAAS,IAAI,IAAI,GAAoB,IACrC,EAAgB,IAAI,IACpB,EAAgB,IAAI,IACpB,EAAc,IAAI,IACtB,EAAO,SAAQ,SAAU,GAChB,EAAW,IAAI,IAChB,EAAc,IAAI,MAG1B,EAAW,SAAQ,SAAU,GACpB,EAAO,IAAI,IACZ,EAAc,IAAI,MAG1B,EAAO,SAAQ,SAAU,GAlD7B,IAAgC,EAmDnB,EAAc,IAAI,IAAO,EAAc,IAAI,KAnDxB,EAmDqD,GAlDnE,yBAA2B,EAAkB,IAAI,IAC3D,EAAM,qBAAuB,EAAkB,IAAI,IAkD/C,EAAY,IAAI,MAGxB,EAAsB,CAAE,cAAe,EAAe,cAAe,EAAe,YAAa,IACjG,EAAmB,EAAM,GACzB,GAAyB,GAE7B,SAAS,EAAyB,GAC9B,IAAI,EAAgB,IAAI,IACpB,EAAgB,IAAI,IACxB,EAAU,SAAQ,SAAU,GACxB,IAAI,EAAS,EAAE,OACX,EAAO,cACH,GAAkB,GAClB,EAAc,IAAI,GAEb,aAAkB,iBAAmB,EAAO,UACjD,EAAc,IAAI,OAI1B,EAAc,KAAO,EAAc,KAAO,GAC1C,EAAO,CACH,QAAS,MAAM,KAAK,GACpB,QAAS,GACT,QAAS,MAAM,KAAK,GACpB,MAAO,KAInB,SAAS,EAAQ,GACb,IAAI,EAAe,GAA4B,EAAM,CACjD,iBAAkB,EAClB,gBAAiB,IAEjB,EAAe,IAAI,iBAAiB,GACxC,EAAa,QAAQ,EAAM,CAAE,YAAY,EAAM,gBAAiB,CAAC,MAAO,WAAY,SAAU,SAAS,IACvG,GAAU,KAAK,EAAc,GAC7B,GAAc,IAAI,GAEtB,SAAS,EAA8B,GACnC,IAAI,EAAa,EAAK,WACJ,MAAd,GAAsB,GAAc,IAAI,KAG5C,EAAQ,GACR,EAAqB,IA9FzB,EAAc,QAAQ,GAgGtB,EAAQ,UACR,EAAmB,SAAS,gBAAiB,GAzH7C,GA0H+B,SAAU,GACrC,IAAI,EAAY,GAChB,EAAM,SAAQ,SAAU,GAAQ,OAAO,EAAK,EAAW,GAAoB,EAAK,gBAChF,EAAO,CAAE,QAAS,EAAW,QAAS,GAAI,QAAS,GAAI,MAAO,KAC9D,EAAM,SAAQ,SAAU,GACpB,IAAI,EAAa,EAAK,WACJ,MAAd,IAGJ,EAA8B,GAC9B,EAAmB,EAAY,GAC/B,GAAyB,QAGjC,SAAS,iBAAiB,0BAA2B,IACrD,GAAyB,UAO7B,SAAS,KAJL,GAAU,SAAQ,SAAU,GAAK,OAAO,EAAE,gBAC1C,GAAU,OAAO,EAAG,GAAU,QAC9B,GAAgB,IAAI,QA3IpB,GAA6B,KAC7B,GAAgB,QAChB,SAAS,oBAAoB,0BAA2B,IA2J5D,IAAI,GAAwB,IAAI,QAC5B,GAAe,IAAI,QACvB,SAAS,GAAgC,GACrC,IAAI,GAAwB,EAwD5B,MAAO,CACH,OA5BJ,SAAgB,EAAO,GACnB,EAAK,mBAAmB,SAAQ,SAAU,GACtC,IAAI,GAAa,IAAI,GAArB,CAGA,IAAI,EAAQ,EAAM,MACd,EAAW,IAAI,cAUC,KACN,YAAY,CACtB,aAXJ,WACI,IAAK,IAAI,EAAI,EAAS,SAAS,OAAS,EAAG,GAAK,EAAG,IAC/C,EAAS,WAAW,GAKxB,OA1CZ,SAAqB,EAAO,GACxB,IAAI,EAAY,EAAc,GAAI,EAAO,EAAK,qBAAqB,GAC/D,EAAa,EAAU,QAAQ,GAC/B,EAAgB,EAAU,QAAQ,GAClC,IAAe,EAAgB,IAG/B,GAAiB,GACjB,EAAU,OAAO,EAAe,GAEpC,EAAU,OAAO,EAAa,EAAG,EAAG,GACpC,EAAK,mBAAqB,GA4BlB,CAAY,EAAO,GACnB,GAAsB,IAAI,EAAO,GACjC,GAAa,IAAI,GACV,GAKP,eAAgB,EAChB,MAAO,EACP,oBAAqB,EACrB,OAAO,EACP,iBAAkB,WAAc,OAAO,UAM/C,QA5CJ,WACI,GAAwB,EACxB,IAAI,EAAY,EAAc,GAAI,EAAO,EAAK,qBAAqB,GACnE,EAAK,mBAAmB,SAAQ,SAAU,GACtC,GAAI,GAAa,IAAI,GAAoB,CACrC,IAAI,EAAgB,EAAU,QAAQ,GAClC,GAAiB,GACjB,EAAU,OAAO,EAAe,GAEpC,GAAsB,OAAO,GAC7B,GAAa,OAAO,OAG5B,EAAK,mBAAqB,IAmClC,SAAS,KACL,SAAS,cAAc,IAAI,YAAY,uCACvC,IAAI,EAAoB,OAAO,yBAAyB,cAAc,UAAW,WAC7E,EAAuB,OAAO,yBAAyB,cAAc,UAAW,cAChF,EAAuB,OAAO,yBAAyB,cAAc,UAAW,cAChF,EAAuB,OAAO,yBAAyB,cAAc,UAAW,cAChF,EAAgC,OAAO,yBAAyB,SAAS,UAAW,eACpF,EAAwB,SAAS,SAAS,SAAS,aACnD,EAAiC,EACjC,OAAO,yBAAyB,QAAQ,UAAW,wBAA0B,KAC7E,EAAU,WACV,OAAO,eAAe,cAAc,UAAW,UAAW,GAC1D,OAAO,eAAe,cAAc,UAAW,aAAc,GAC7D,OAAO,eAAe,cAAc,UAAW,aAAc,GAC7D,OAAO,eAAe,cAAc,UAAW,aAAc,GAC7D,SAAS,oBAAoB,wBAAyB,GACtD,SAAS,oBAAoB,qCAAsC,GACnE,OAAO,eAAe,SAAS,UAAW,cAAe,GACrD,GACA,OAAO,eAAe,QAAQ,UAAW,uBAAwB,IAGrE,EAAuB,SAAU,GACjC,eAAe,YAAY,EAAE,OAAO,KAAK,MAAK,WAC1C,SAAS,cAAc,IAAI,YAAY,0BAA2B,CAAE,OAAQ,CAAE,IAAK,EAAE,OAAO,YAGpG,SAAS,iBAAiB,wBAAyB,GACnD,SAAS,iBAAiB,qCAAsC,GAChE,IAAI,EAAmB,IAAI,MAAM,6BAsDjC,OAAO,eAAe,cAAc,UAAW,UAAW,OAAO,OAAO,GAAI,EAAmB,CAAE,MArDjG,SAAsB,EAAU,EAAO,GAKnC,OAJA,EAAkB,MAAM,KAAK,KAAM,EAAU,EAAO,GAChD,KAAK,YAAc,KAAK,UAAU,UAAU,SAAS,eACrD,KAAK,UAAU,cAAc,IAEzB,MAiDZ,OAAO,eAAe,cAAc,UAAW,aAAc,OAAO,OAAO,GAAI,EAAsB,CAAE,MA/CvG,SAAyB,EAAM,GAC3B,IAAI,EAAc,EAAqB,MAAM,KAAK,KAAM,EAAM,GAI9D,OAHI,KAAK,YAAc,KAAK,UAAU,UAAU,SAAS,eACrD,KAAK,UAAU,cAAc,GAE1B,MA2CX,OAAO,eAAe,cAAc,UAAW,aAAc,OAAO,OAAO,GAAI,EAAsB,CAAE,MAzCvG,SAAyB,GACrB,EAAqB,MAAM,KAAK,KAAM,GAClC,KAAK,YAAc,KAAK,UAAU,UAAU,SAAS,eACrD,KAAK,UAAU,cAAc,OAuCrC,OAAO,eAAe,cAAc,UAAW,aAAc,OAAO,OAAO,GAAI,EAAsB,CAAE,MApCvG,SAAyB,GACrB,EAAqB,MAAM,KAAK,KAAM,GAClC,KAAK,YAAc,KAAK,UAAU,UAAU,SAAS,eACrD,KAAK,UAAU,cAAc,OAkCrC,OAAO,eAAe,SAAS,UAAW,cAAe,OAAO,OAAO,GAAI,EAA+B,CAAE,IA/B5G,WACI,IACI,EAAW,EAAc,GAAI,EADjB,EAA8B,IAAI,KAAK,QACH,GAAO,QAAO,SAAU,GACxE,OAAQ,EAAW,UAAU,UAAU,SAAS,iBAEpD,OAAO,OAAO,eAAe,EAAU,eAAe,eA2BtD,GACA,OAAO,eAAe,QAAQ,UAAW,uBAAwB,OAAO,OAAO,GAAI,EAAgC,CAAE,MA1BzH,SAAmC,GAC/B,IAAI,EAAQ,KACR,EAAyB,WACzB,IAAI,EAAW,EAA+B,MAAM,KAAK,EAAO,GAMhE,MALgB,UAAZ,IACA,EAAW,OAAO,eAAe,EAAc,GAAI,EAAO,IAAW,GAAO,QAAO,SAAU,GACzF,OAAQ,EAAQ,UAAU,SAAS,iBACnC,SAAS,YAEV,GAEP,EAAW,IAOf,OADW,IAAI,MAAM,EALE,CACnB,IAAK,SAAU,EAAG,GACd,OAAO,IAAyB,OAAO,WAgBvD,IAAI,GAtKJ,WACI,GAAI,eAAgB,OAAQ,CACxB,IAAI,EAAO,OAAO,aAClB,OAAO,EAAK,UAAU,EAAG,GAAK,EAAK,UAAU,EAAG,IAAM,EAAK,UAAU,GAAI,IAAM,EAAK,UAAU,GAAI,IAAM,EAAK,UAAU,IAE3H,OAAO,MAAM,KAAK,OAAO,gBAAgB,IAAI,WAAW,MAAM,KAAI,SAAU,GAAK,QARrE,EAQmF,GAP7E,GAAK,IAAM,IAAM,EAAO,SAAS,IADvD,IAAgB,KAQ0F,KAAK,IAiK7F,GACd,GAAgB,IAAI,IACpB,GAAuB,GACvB,GAAS,KACT,GAAQ,KACR,GAAa,KACb,GAAgC,KAChC,GAAyB,KAC7B,SAAS,GAAoB,EAAW,QACvB,IAAT,IAAmB,EAAO,SAAS,MAAQ,UAC/C,IAAI,EAAU,EAAK,cAAc,IAAM,GAQvC,OAPK,KACD,EAAU,SAAS,cAAc,UACzB,UAAU,IAAI,cACtB,EAAQ,UAAU,IAAI,GACtB,EAAQ,MAAQ,SAChB,EAAQ,YAAc,IAEnB,EAYX,IAAI,GAAuB,IAAI,IAC/B,SAAS,GAAyB,EAAM,GACpC,GAAqB,IAAI,IAAU,GAAqB,IAAI,GAAO,OACnE,GAAqB,IAAI,EAAO,EAAqB,EAAM,WAM/D,SAAS,KACL,IAAI,EAAgB,GAAoB,uBAAwB,UAChE,EAAc,YAAc,GAAyB,GAAQ,CAAE,QAAQ,IACvE,SAAS,KAAK,aAAa,EAAe,SAAS,KAAK,YACxD,GAAyB,EAAe,YACxC,IAAI,EAAiB,GAAoB,0BACzC,EAAe,YAAc,GAA0B,GAAQ,GAAY,GAAO,qBAClF,SAAS,KAAK,aAAa,EAAgB,EAAc,aACzD,GAAyB,EAAgB,cACzC,IA/6FqB,EACjB,EA86FA,EAAY,GAAoB,oBAChC,GAAO,SAAW,GAAO,WAAa,EACtC,EAAU,aAj7FO,EAi7FuB,IAh7FxC,EAAQ,IACN,KAAK,uKACP,EAAO,SAAW,EAAO,YACzB,EAAM,KAAK,kBAAoB,EAAO,WAAa,gBAEnD,EAAO,WAAa,IACpB,EAAM,KAAK,0BAA4B,EAAO,WAAa,kBAC3D,EAAM,KAAK,kBAAoB,EAAO,WAAa,mBAEvD,EAAM,KAAK,KACJ,EAAM,KAAK,OAy6Fd,EAAU,YAAc,GAE5B,SAAS,KAAK,aAAa,EAAW,EAAc,aACpD,GAAyB,EAAW,QACpC,IAAI,EAAc,GAAoB,sBAClC,IAAS,MAAM,QAAQ,GAAM,SAAW,GAAM,OAAO,OAAS,EAC9D,EAAY,YAAc,CACtB,GAAM,OAAO,KAAK,MAAQ,KAC1B,eAAiB,GAAkB,EAAS,EAAS,GAAI,IAAS,CAAE,SAA0B,IAAhB,GAAO,KAAa,GAAO,SAAW,GAAM,GAAO,SAAW,GAAI,EAAG,QAAW,eAC9J,KACF,KAAK,MAGP,EAAY,YAAc,GAE9B,SAAS,KAAK,aAAa,EAAa,EAAU,aAClD,GAAyB,EAAa,UACtC,IAAI,EAAc,GAAoB,sBACtC,EAAY,YAAc,KAC1B,SAAS,KAAK,aAAa,EAAa,EAAY,aACpD,GAAyB,EAAa,UACtC,IAAI,EAAgB,GAAoB,wBACxC,EAAc,YAAc,IAAS,GAAM,IAAM,GAAoB,GAAM,KAAO,GAClF,SAAS,KAAK,YAAY,GAC1B,GAAyB,EAAe,YACxC,IAAI,EAAgB,GAAoB,yBACpC,EAAkB,GAAkB,IACpC,EAA4B,GAAO,0BAA2B,EAAsB,GAAO,oBAAqB,EAA6B,GAAO,2BAA4B,EAAuB,GAAO,qBAAsB,EAAO,GAAO,KAClP,EAAiC,IAAT,EAAa,EAA6B,EAClE,EAA2B,IAAT,EAAa,EAAuB,EAC1D,EAAwB,GAAsB,GAAM,GAAwB,IAC5E,EAAkB,GAAsB,GAAM,GAAkB,IAChE,EAAc,YAAc,CACxB,UACA,uCAAyC,EAAwB,IACjE,iCAAmC,EAAkB,IACrD,yCAA2C,EAAgB,yBAA2B,IACtF,mCAAqC,EAAgB,yBAA2B,IAChF,KACF,KAAK,MACP,SAAS,KAAK,aAAa,EAAe,EAAY,aACtD,GAAyB,EAAe,aACxC,IAAI,EAAgB,GAAoB,yBACxC,SAAS,KAAK,aAAa,EAAe,EAAc,aACxD,IAAI,EA7ER,SAA8B,EAAW,QACxB,IAAT,IAAmB,EAAO,SAAS,MAAQ,UAC/C,IAAI,EAAU,EAAK,cAAc,IAAM,GAMvC,OALK,KACD,EAAU,SAAS,cAAc,WACzB,UAAU,IAAI,cACtB,EAAQ,UAAU,IAAI,IAEnB,EAqEW,CAAqB,qBACvC,EAAY,OAAO,IAAM,GAAc,OACvC,SAAS,KAAK,aAAa,EAAa,EAAc,aACtD,EAAY,SAEhB,IAAI,GAA2B,IAAI,IACnC,SAAS,GAAiC,GACtC,IAAI,EAAc,GAAoB,qBAAsB,GAC5D,EAAY,YAAc,KAC1B,EAAK,aAAa,EAAa,EAAK,YACpC,IAAI,EAAgB,GAAoB,uBAAwB,GAChE,EAAc,YAAc,IAAS,GAAM,IAAM,GAAoB,GAAM,KAAO,GAClF,EAAK,aAAa,EAAe,EAAY,aAC7C,IAAI,EAAc,GAAoB,qBAAsB,GACxD,IAAS,MAAM,QAAQ,GAAM,SAAW,GAAM,OAAO,OAAS,EAC9D,EAAY,YAAc,CACtB,GAAM,OAAO,KAAK,MAAQ,KAC1B,eAAiB,GAAkB,EAAS,EAAS,GAAI,IAAS,CAAE,SAA0B,IAAhB,GAAO,KAAa,GAAO,SAAW,GAAM,GAAO,SAAW,GAAI,EAAG,QAAW,eAC9J,KACF,KAAK,MAGP,EAAY,YAAc,GAE9B,EAAK,aAAa,EAAa,EAAc,aAC7C,GAAyB,IAAI,GAEjC,SAAS,GAAoB,GACzB,OAAO,EAAS,QAAQ,cAAc,SAAU,EAAG,GAC/C,IAAI,EAAQ,GAAc,GAC1B,OAAI,EAxpGD,GAypGoB,EAAO,GAzpGM,KA2pGpC,EAAQ,uCACD,MAGf,SAAS,KACL,IAAI,EAAW,SAAS,cAAc,yBAClC,IACA,EAAS,YAAc,IAoC/B,IAAI,GAAuB,EACvB,GAAgB,IAAI,IACxB,SAAS,GAAc,GACnB,IAAI,IAAmB,GACvB,EAAQ,gDAAkD,EAAgB,GA4B1E,IAAI,EAAU,GAAY,EAAS,CAAE,OATrC,WACI,IAAI,EAAU,EAAQ,UACjB,IAGL,GAAe,oBAAoB,EAAQ,OAC3C,GAAe,8BACf,EAAQ,OAAO,GAAQ,MAE0B,aA3BrD,WACI,IAAK,MAAiB,GAAmB,CACrC,GAAc,IAAI,GAClB,EAAQ,qCAAuC,GAAc,MAC7D,IAAI,EAAgB,SAAS,cAAc,yBACtC,EAAc,cACf,EAAc,YAAc,GAAyB,GAAQ,CAAE,QAAQ,OAqBF,WAjBjF,WACI,GAAc,OAAO,GACrB,EAAQ,wBAA0B,EAAiB,mBAAqB,GAAc,MACtF,EAAQ,qBAAsB,IACH,IAAvB,GAAc,MAAc,KAC5B,QAcR,OADA,GAAc,IAAI,EAAS,GACpB,EAEX,SAAS,GAAc,GACnB,IAAI,EAAU,GAAc,IAAI,GAC5B,IACA,EAAQ,UACR,GAAc,OAAO,IAG7B,IAAI,GAA2B,GAAS,SAAU,GAC9C,GAAc,SAAQ,SAAU,GAAW,OAAO,EAAQ,OAAO,GAAQ,OACzE,GAAqB,SAAQ,SAAU,GAAW,OAAO,EAAQ,OAAO,GAAQ,OAChF,GAAY,OAEZ,GAAkB,WAClB,GAAyB,UAE7B,SAAS,KACsB,IAAvB,GAAc,KAIlB,EAAQ,oDAAqD,IAHzD,KAKR,IAAI,GAA6B,KAC7B,IAAqB,SAAS,OAclC,SAAS,KACL,SAAS,oBAAoB,mBAAoB,IACjD,GAA6B,KAEjC,SAAS,KAEL,SAAS,IAqBb,IAptD8B,EAAuB,GA+kDrD,WACI,KACA,IACI,EADY,GAAoB,UAE/B,QAAO,SAAU,GAAS,OAAQ,GAAc,IAAI,MACpD,KAAI,SAAU,GAAS,OAAO,GAAc,MACjD,EACK,KAAI,SAAU,GAAW,OAAO,EAAQ,aACxC,QAAO,SAAU,GAAU,OAAO,GAAU,EAAO,MAAM,OAAS,KAClE,SAAQ,SAAU,GACnB,GAAe,oBAAoB,EAAO,UAE9C,GAAe,8BACf,GAAe,yBAAwB,WACnC,GAAe,YAAY,SAAS,KAAK,cAAc,0BAA2B,OAEtF,GAAe,YAAY,SAAS,KAAK,cAAc,0BAA2B,IAClF,GAAc,SAAQ,SAAU,GAAW,OAAO,EAAQ,OAAO,GAAQ,OAC9C,IAAvB,GAAc,MACd,KAEJ,EAAY,SAAQ,SAAU,GAAW,OAAO,EAAQ,WACxD,IAAI,EA92IR,SAAiB,GAEb,IADA,IAAI,EAAU,GACL,EAAI,EAAG,EAAM,EAAM,OAAQ,EAAI,EAAK,IACzC,EAAQ,KAAK,EAAM,IAEvB,OAAO,EAy2ImB,CAAQ,SAAS,iBAAiB,KAC5D,EAAmB,SAAS,iBAAiB,SAAU,GACnD,GAAiC,EAAK,YACtC,IAAI,EAAW,EAAK,WAAW,iBAAiB,IAC5C,EAAS,OAAS,GAClB,EAAK,EAAqB,MAGlC,EAAoB,SAAQ,SAAU,GAAM,OAAO,GAAoB,EAAI,GAAQ,GAAwB,OAC3G,GAAyB,UAkFrB,GAsBJ,GADoB,MAAM,KAAK,GAAc,SACT,SAAU,GAC1C,IAAI,EAAU,EAAG,QAAS,EAAU,EAAG,QAAS,EAAU,EAAG,QAAS,EAAQ,EAAG,MAC7E,EAAiB,EACjB,EAAiB,EAAQ,OAAO,GAAS,OAAO,GAC/C,QAAO,SAAU,GAAS,OAAQ,GAAc,IAAI,MACrD,EAAkB,EACjB,QAAO,SAAU,GAAS,OAAO,GAAc,IAAI,MACxD,EAAQ,wBAAyB,GACjC,EAAe,SAAQ,SAAU,GAAS,OAAO,GAAc,MAC/D,IAAI,EAAc,EACb,KAAI,SAAU,GAAS,OAAO,GAAc,MACjD,EACK,KAAI,SAAU,GAAW,OAAO,EAAQ,aACxC,QAAO,SAAU,GAAU,OAAO,GAAU,EAAO,MAAM,OAAS,KAClE,SAAQ,SAAU,GACnB,GAAe,oBAAoB,EAAO,UAE9C,GAAe,8BACf,EAAY,SAAQ,SAAU,GAAW,OAAO,EAAQ,OAAO,GAAQ,OACvE,EAAY,SAAQ,SAAU,GAAW,OAAO,EAAQ,WACxD,EAAgB,SAAQ,SAAU,GAAS,OAAO,GAAc,IAAI,GAAO,gBAC5E,SAAU,GACT,GAAiC,GACjC,GAAyB,MA7uDH,EA+uDL,SAAU,GAC3B,GAAoB,EAAS,GAAQ,GAAwB,IACzD,IAAY,SAAS,iBACL,EAAQ,aAAa,SACvB,SAAS,QACnB,GAAe,8BACf,GAAe,YAAY,SAAS,KAAK,cAAc,0BAA2B,MArvD7C,EAwvD9C,SAAU,GACT,GAAiC,GACjC,IAAI,EAAsB,EAAK,iBAAiB,IAC5C,EAAoB,OAAS,GAC7B,EAAQ,GAAqB,SAAU,GAAM,OAAO,GAAoB,EAAI,GAAQ,GAAwB,QA3vDpH,GAAyB,SAAU,EAAuB,GAC1D,EAAmB,SAAS,iBAAiB,SAAU,GACnD,GAAyB,EAAK,WAAY,EAAuB,MA4vDrE,EAAoB,IAnFxB,IAAoC,EAC5B,EAv8CmC,EACnC,EAu9CJ,KAKI,SAAS,QAvBmB,EAwBD,EAvB3B,EAAkB,QAAQ,IAC9B,GAA6B,WACpB,SAAS,SACV,KACA,IACA,IAAoB,IAGvB,GACD,SAAS,iBAAiB,mBAAoB,KAiB9C,IAj+CmC,EAm+CL,IAl+C9B,EAAO,SAAS,cAAc,KAE9B,GAAqB,EAAM,IAGvB,IACA,GAAS,cAEb,GAAW,IAAI,kBAAiB,SAAU,GACtC,EAAM,IAAK,IAAI,EAAI,EAAG,EAAI,EAAU,OAAQ,IAExC,IADA,IAAI,EAAa,EAAU,GAAG,WACrB,EAAI,EAAG,EAAI,EAAW,OAAQ,IAAK,CACxC,IAAI,EAAO,EAAW,GACtB,GAAI,aAAgB,iBAAmB,EAAK,OAAS,GAAoB,CACrE,GAAS,aACT,GAAW,KACX,GAAqB,EAAM,GAC3B,MAAM,QAKb,QAAQ,SAAS,KAAM,CAAE,WAAW,KA88CrD,SAAS,GAAyB,GAC9B,GAAI,MAAM,QAAQ,EAAK,qBACf,EAAK,mBAAmB,OAAS,EAAG,CACpC,IAAI,EAAY,GAAgC,GAChD,GAAqB,KAAK,GAC1B,EAAU,OAAO,GAAQ,KAiDrC,SAAS,KACL,GAAc,SAAQ,SAAU,GAAW,OAAO,EAAQ,WA3R1D,EAAQ,GAAqB,UAAU,SAAU,GAAW,OAAO,EAAQ,UAC3E,GAAqB,QA4RrB,KAxqDA,GAAc,SAAQ,SAAU,GAAK,OAAO,EAAE,gBAC9C,GAAc,SAAQ,SAAU,GAAK,OAAO,EAAE,gBAC9C,GAAc,QACd,GAAc,QAuqDd,EAAuB,IAxzIvB,EAA4B,QAi0IhC,SAAS,KACL,IANI,EAMA,EAAO,SAAS,cAAc,2BAClC,OAAI,EACI,EAAK,UAAY,KARrB,EAAc,SAAS,cAAc,SAC7B,KAAO,aACnB,EAAY,QAAU,GACtB,SAAS,KAAK,YAAY,IAWnB,GAEX,SAAS,GAA2B,EAAc,EAAmB,GAYjE,GAXA,GAAS,GACT,GAAQ,IAEJ,GAAgC,MAAM,QAAQ,GAAM,qBAAuB,GAAM,oBAAsB,GACvG,GAAyB,MAAM,QAAQ,GAAM,mBAAqB,GAAM,kBAAoB,KAG5F,GAAgC,GAChC,GAAyB,IAE7B,GAAa,EACT,SAAS,KAAM,CACf,GAAI,KACA,OAEJ,SAAS,gBAAgB,aAAa,uBAAwB,WAC9D,SAAS,gBAAgB,aAAa,yBAA0B,GAAO,KAAO,OAAS,UACvF,SAEC,CACD,IAAK,EAAW,CACZ,IAAI,EAAgB,GAAoB,wBACxC,SAAS,gBAAgB,YAAY,GACrC,EAAc,YAAc,GAAyB,GAAQ,CAAE,QAAQ,IAE3E,IAAI,EAAiB,IAAI,kBAAiB,WACtC,GAAI,SAAS,KAAM,CAEf,GADA,EAAe,aACX,KAEA,YADA,KAGJ,SAGR,EAAe,QAAQ,SAAU,CAAE,WAAW,EAAM,SAAS,KAOrE,SAAS,KACL,SAAS,gBAAgB,gBAAgB,wBACzC,SAAS,gBAAgB,gBAAgB,0BA8BzC,GAAe,QACf,GAAe,QACf,KACA,KACA,KACA,KAjCA,EAAW,SAAS,cAAc,0BAC9B,SAAS,QA1kDjB,WACQ,KACA,GAAS,aACT,GAAW,MAEf,IAAI,EAAO,SAAS,cAAc,IAC9B,GAAQ,KACR,EAAK,QAAU,IAokDf,GACA,EAAW,SAAS,KAAK,cAAc,4BACvC,EAAW,SAAS,KAAK,cAAc,sBACvC,EAAW,SAAS,KAAK,cAAc,wBACvC,EAAW,SAAS,KAAK,cAAc,wBACvC,EAAW,SAAS,KAAK,cAAc,0BACvC,EAAW,SAAS,KAAK,cAAc,2BACvC,EAAW,SAAS,KAAK,cAAc,2BACvC,EAAW,SAAS,KAAK,cAAc,4BAjB3C,SAAS,cAAc,IAAI,YAAY,0BACvC,EAAW,SAAS,KAAK,cAAc,wBAmBvC,GAAyB,SAAQ,SAAU,GACvC,EAAW,EAAK,cAAc,wBAC9B,EAAW,EAAK,cAAc,6BAElC,GAAyB,QACzB,EAAQ,GAAc,QAAQ,SAAU,GAAM,OAAO,GAAc,MACnE,GAAc,QA5zCd,GAAyB,QA8zCzB,EAAQ,SAAS,iBAAiB,eAAgB,GAClD,GAAqB,SAAQ,SAAU,GACnC,EAAQ,aAEZ,GAAqB,OAAO,GAWhC,IAAI,GAAY,0BAChB,SAAS,GAAa,GAClB,OAAO,EAAU,UAAM,OAAQ,GAAQ,WACnC,IAAI,EAAU,EACd,OAAO,EAAY,MAAM,SAAU,GAC/B,OAAQ,EAAG,OACP,KAAK,EAMD,OALA,EAAW,GACX,GAAW,GAAW,EAAM,GAAG,SAAQ,SAAU,GAC7C,IAAI,EAAU,EAAc,GAC5B,EAAS,KAAK,MAEX,CAAC,EAAG,QAAQ,IAAI,IAC3B,KAAK,EAED,OADA,EAAO,EAAG,OACH,CAAC,EAAG,EAAK,QAAQ,IAAW,WAAc,MAAO,QAAW,EAAK,QAAU,gBAMtG,SAAS,KACL,OAAO,EAAU,UAAM,OAAQ,GAAQ,WACnC,SAAS,EAAa,EAAU,GAC5B,IAAI,EAAc,SAAS,cAAc,GACrC,GAAe,EAAY,cAC3B,EAAI,KAAK,MAAQ,EAAU,OAC3B,EAAI,KAAK,EAAY,aACrB,EAAI,KAAK,KAGjB,IAAI,EAAK,EAAa,EAAc,EAAI,EACxC,OAAO,EAAY,MAAM,SAAU,GAC/B,OAAQ,EAAG,OACP,KAAK,EAaD,OAZA,EAAM,CAfb,6/BAgBO,EAAa,wBAAyB,kBACtC,EAAa,0BAA2B,oBACxC,EAAa,oBAAqB,cAClC,EAAa,sBAAuB,gBACpC,EAAa,yBAA0B,mBACvC,EAAc,GACd,SAAS,iBAAiB,qBAAqB,SAAQ,SAAU,GAC7D,EAAQ,EAAQ,MAAM,UAAU,SAAU,GACtC,GAAQ,EAAK,SAAW,EAAY,KAAK,EAAK,eAGjD,EAAY,QACjB,EAttHpB,SAAmB,GACf,SAAS,EAAS,GACd,OAAO,EAAK,QAAQ,OAAQ,IAEhC,SAAS,EAAU,GACf,OAAc,IAAV,EACO,GAEJ,IAAI,OAAO,EAAI,GAE1B,GAAI,EAAK,OAAS,IAEd,IADA,IAAI,EAAkB,cACf,EAAgB,KAAK,IACxB,EAAO,EAAK,QAAQ,EAAiB,IAa7C,IAVA,IAAI,EAAO,EACN,QAAQ,UAAW,KACnB,QAAQ,MAAO,OACf,QAAQ,MAAO,SACf,QAAQ,0BAA2B,OACnC,QAAQ,0BAA2B,OACnC,QAAQ,WAAY,MACpB,MAAM,MACP,EAAQ,EACR,EAAY,GACP,EAAI,EAAG,EAAM,EAAI,OAAQ,EAAI,EAAK,IAAK,CAC5C,IAAI,EAAO,EAAI,GAAK,KAChB,EAAK,SAAS,KACd,EAAU,KAAK,EAAU,KAAW,EAAS,IAExC,EAAK,SAAS,KACnB,EAAU,KAAK,IAAY,GAAS,EAAS,IAG7C,EAAU,KAAK,EAAU,GAAS,EAAS,IAGnD,OAAO,EAAU,KAAK,IAAI,OAgrHK,CAAU,EAAY,KAAK,OAC1C,EAAI,KAAK,sBACT,GAAM,EAAK,GAAK,KACT,CAAC,EAAG,GAAa,KAJQ,CAAC,EAAG,GAKxC,KAAK,EACD,EAAG,MAAM,EAAI,CAAC,EAAG,SACjB,EAAI,KAAK,IACT,EAAG,MAAQ,EACf,KAAK,EAED,OADA,EAAa,wBAAyB,kBAC/B,CAAC,EAAG,EAAI,KAAK,cAMxC,IAAI,IAAsB,EACtB,GAAW,WACX,IACI,OAAO,OAAO,OAAS,OAAO,IAElC,MAAO,GAEH,OADA,QAAQ,KAAK,IACN,GANA,GASf,SAAS,GAAO,EAAc,QACL,IAAjB,IAA2B,EAAe,SAChC,IAAV,IAAoB,EAAQ,MAChC,IAAI,EAAQ,EAAS,EAAS,GAAI,GAAgB,GAClD,GAAI,EAAM,SAAW,EACjB,MAAM,IAAI,MAAM,kCAEpB,GAA2B,EAAO,EAAO,IACzC,IAAsB,EAK1B,SAAS,KACL,KACA,IAAsB,EAE1B,IAAI,GAAa,WAAW,gCACxB,GAAQ,CACR,aAAc,KACd,MAAO,MAEX,SAAS,KACD,GAAW,QACX,GAAO,GAAM,aAAc,GAAM,OAGjC,KAoCR,IAAI,GA/6JJ,SAA0B,GAElB,EADA,GAIU,GA46JlB,EAAQ,KAnCR,SAAc,EAAc,QACH,IAAjB,IAA2B,EAAe,SAChC,IAAV,IAAoB,EAAQ,MAC5B,GACA,GAAQ,CAAE,aAAc,EAAc,MAAO,GAC7C,KACI,EACA,GAAW,iBAAiB,SAAU,IAGtC,GAAW,YAAY,MAIvB,EACA,GAAW,oBAAoB,SAAU,IAGzC,GAAW,eAAe,IAE9B,OAgBR,EAAQ,QAAU,GAClB,EAAQ,OAAS,GACjB,EAAQ,mBAfR,WACI,OAAO,EAAU,UAAM,OAAQ,GAAQ,WACnC,OAAO,EAAY,MAAM,SAAU,GAC/B,OAAQ,EAAG,OACP,KAAK,EAAG,MAAO,CAAC,EAAG,MACnB,KAAK,EAAG,MAAO,CAAC,EAAG,EAAG,gBAWtC,EAAQ,UA3DR,WACI,OAAO,IA2DX,EAAQ,eAAiB,GAEzB,OAAO,eAAe,EAAS,aAAc,CAAE,OAAO","file":"/npm/darkreader@4.9.40/darkreader.js","sourceRoot":"","sourcesContent":["/**\n * Minified by jsDelivr using Terser v5.9.0.\n * Original file: /npm/darkreader@4.9.40/darkreader.js\n *\n * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files\n */\n","/**\n * Dark Reader v4.9.40\n * https://darkreader.org/\n */\n\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n    typeof define === 'function' && define.amd ? define(['exports'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.DarkReader = {}));\n})(this, (function (exports) { 'use strict';\n\n    /*! *****************************************************************************\r\n    Copyright (c) Microsoft Corporation.\r\n\r\n    Permission to use, copy, modify, and/or distribute this software for any\r\n    purpose with or without fee is hereby granted.\r\n\r\n    THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\n    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\n    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\n    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\n    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\n    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\n    PERFORMANCE OF THIS SOFTWARE.\r\n    ***************************************************************************** */\r\n\r\n    var __assign = function() {\r\n        __assign = Object.assign || function __assign(t) {\r\n            for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n                s = arguments[i];\r\n                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n            }\r\n            return t;\r\n        };\r\n        return __assign.apply(this, arguments);\r\n    };\r\n\r\n    function __awaiter(thisArg, _arguments, P, generator) {\r\n        function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n        return new (P || (P = Promise))(function (resolve, reject) {\r\n            function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n            function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n            function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n            step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n        });\r\n    }\r\n\r\n    function __generator(thisArg, body) {\r\n        var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n        return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n        function verb(n) { return function (v) { return step([n, v]); }; }\r\n        function step(op) {\r\n            if (f) throw new TypeError(\"Generator is already executing.\");\r\n            while (_) try {\r\n                if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n                if (y = 0, t) op = [op[0] & 2, t.value];\r\n                switch (op[0]) {\r\n                    case 0: case 1: t = op; break;\r\n                    case 4: _.label++; return { value: op[1], done: false };\r\n                    case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                    case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                    default:\r\n                        if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                        if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                        if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                        if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                        if (t[2]) _.ops.pop();\r\n                        _.trys.pop(); continue;\r\n                }\r\n                op = body.call(thisArg, _);\r\n            } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n            if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n        }\r\n    }\r\n\r\n    function __values(o) {\r\n        var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n        if (m) return m.call(o);\r\n        if (o && typeof o.length === \"number\") return {\r\n            next: function () {\r\n                if (o && i >= o.length) o = void 0;\r\n                return { value: o && o[i++], done: !o };\r\n            }\r\n        };\r\n        throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n    }\r\n\r\n    function __read(o, n) {\r\n        var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n        if (!m) return o;\r\n        var i = m.call(o), r, ar = [], e;\r\n        try {\r\n            while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n        }\r\n        catch (error) { e = { error: error }; }\r\n        finally {\r\n            try {\r\n                if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n            }\r\n            finally { if (e) throw e.error; }\r\n        }\r\n        return ar;\r\n    }\r\n\r\n    function __spreadArray(to, from, pack) {\r\n        if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n            if (ar || !(i in from)) {\r\n                if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n                ar[i] = from[i];\r\n            }\r\n        }\r\n        return to.concat(ar || Array.prototype.slice.call(from));\r\n    }\n\n    var MessageType = {\r\n        UI_GET_DATA: 'ui-get-data',\r\n        UI_GET_ACTIVE_TAB_INFO: 'ui-get-active-tab-info',\r\n        UI_SUBSCRIBE_TO_CHANGES: 'ui-subscribe-to-changes',\r\n        UI_UNSUBSCRIBE_FROM_CHANGES: 'ui-unsubscribe-from-changes',\r\n        UI_CHANGE_SETTINGS: 'ui-change-settings',\r\n        UI_SET_THEME: 'ui-set-theme',\r\n        UI_SET_SHORTCUT: 'ui-set-shortcut',\r\n        UI_TOGGLE_URL: 'ui-toggle-url',\r\n        UI_MARK_NEWS_AS_READ: 'ui-mark-news-as-read',\r\n        UI_LOAD_CONFIG: 'ui-load-config',\r\n        UI_APPLY_DEV_DYNAMIC_THEME_FIXES: 'ui-apply-dev-dynamic-theme-fixes',\r\n        UI_RESET_DEV_DYNAMIC_THEME_FIXES: 'ui-reset-dev-dynamic-theme-fixes',\r\n        UI_APPLY_DEV_INVERSION_FIXES: 'ui-apply-dev-inversion-fixes',\r\n        UI_RESET_DEV_INVERSION_FIXES: 'ui-reset-dev-inversion-fixes',\r\n        UI_APPLY_DEV_STATIC_THEMES: 'ui-apply-dev-static-themes',\r\n        UI_RESET_DEV_STATIC_THEMES: 'ui-reset-dev-static-themes',\r\n        UI_SAVE_FILE: 'ui-save-file',\r\n        UI_REQUEST_EXPORT_CSS: 'ui-request-export-css',\r\n        BG_CHANGES: 'bg-changes',\r\n        BG_ADD_CSS_FILTER: 'bg-add-css-filter',\r\n        BG_ADD_STATIC_THEME: 'bg-add-static-theme',\r\n        BG_ADD_SVG_FILTER: 'bg-add-svg-filter',\r\n        BG_ADD_DYNAMIC_THEME: 'bg-add-dynamic-theme',\r\n        BG_EXPORT_CSS: 'bg-export-css',\r\n        BG_UNSUPPORTED_SENDER: 'bg-unsupported-sender',\r\n        BG_CLEAN_UP: 'bg-clean-up',\r\n        BG_RELOAD: 'bg-reload',\r\n        BG_FETCH_RESPONSE: 'bg-fetch-response',\r\n        BG_UI_UPDATE: 'bg-ui-update',\r\n        BG_CSS_UPDATE: 'bg-css-update',\r\n        CS_COLOR_SCHEME_CHANGE: 'cs-color-scheme-change',\r\n        CS_FRAME_CONNECT: 'cs-frame-connect',\r\n        CS_FRAME_FORGET: 'cs-frame-forget',\r\n        CS_FRAME_FREEZE: 'cs-frame-freeze',\r\n        CS_FRAME_RESUME: 'cs-frame-resume',\r\n        CS_EXPORT_CSS_RESPONSE: 'cs-export-css-response',\r\n        CS_FETCH: 'cs-fetch',\r\n    };\n\n    var userAgent = typeof navigator === 'undefined' ? 'some useragent' : navigator.userAgent.toLowerCase();\r\n    var platform = typeof navigator === 'undefined' ? 'some platform' : navigator.platform.toLowerCase();\r\n    var isChromium = userAgent.includes('chrome') || userAgent.includes('chromium');\r\n    var isThunderbird = userAgent.includes('thunderbird');\r\n    var isFirefox = userAgent.includes('firefox') || isThunderbird;\r\n    userAgent.includes('vivaldi');\r\n    userAgent.includes('yabrowser');\r\n    userAgent.includes('opr') || userAgent.includes('opera');\r\n    userAgent.includes('edg');\r\n    var isSafari = userAgent.includes('safari') && !isChromium;\r\n    var isWindows = platform.startsWith('win');\r\n    var isMacOS = platform.startsWith('mac');\r\n    userAgent.includes('mobile');\r\n    var isShadowDomSupported = typeof ShadowRoot === 'function';\r\n    var isMatchMediaChangeEventListenerSupported = (typeof MediaQueryList === 'function' &&\r\n        typeof MediaQueryList.prototype.addEventListener === 'function');\r\n    ((function () {\r\n        var m = userAgent.match(/chrom[e|ium]\\/([^ ]+)/);\r\n        if (m && m[1]) {\r\n            return m[1];\r\n        }\r\n        return '';\r\n    }))();\r\n    var isDefinedSelectorSupported = (function () {\r\n        try {\r\n            document.querySelector(':defined');\r\n            return true;\r\n        }\r\n        catch (err) {\r\n            return false;\r\n        }\r\n    })();\r\n    globalThis.chrome && globalThis.chrome.runtime && globalThis.chrome.runtime.getManifest && globalThis.chrome.runtime.getManifest().manifest_version === 3;\n\n    function getOKResponse(url, mimeType, origin) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var response;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4, fetch(url, {\r\n                            cache: 'force-cache',\r\n                            credentials: 'omit',\r\n                            referrer: origin\r\n                        })];\r\n                    case 1:\r\n                        response = _a.sent();\r\n                        if (isFirefox && mimeType === 'text/css' && url.startsWith('moz-extension://') && url.endsWith('.css')) {\r\n                            return [2, response];\r\n                        }\r\n                        if (mimeType && !response.headers.get('Content-Type').startsWith(mimeType)) {\r\n                            throw new Error(\"Mime type mismatch when loading \" + url);\r\n                        }\r\n                        if (!response.ok) {\r\n                            throw new Error(\"Unable to load \" + url + \" \" + response.status + \" \" + response.statusText);\r\n                        }\r\n                        return [2, response];\r\n                }\r\n            });\r\n        });\r\n    }\r\n    function loadAsDataURL(url, mimeType) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var response;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4, getOKResponse(url, mimeType)];\r\n                    case 1:\r\n                        response = _a.sent();\r\n                        return [4, readResponseAsDataURL(response)];\r\n                    case 2: return [2, _a.sent()];\r\n                }\r\n            });\r\n        });\r\n    }\r\n    function readResponseAsDataURL(response) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var blob, dataURL;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4, response.blob()];\r\n                    case 1:\r\n                        blob = _a.sent();\r\n                        return [4, (new Promise(function (resolve) {\r\n                                var reader = new FileReader();\r\n                                reader.onloadend = function () { return resolve(reader.result); };\r\n                                reader.readAsDataURL(blob);\r\n                            }))];\r\n                    case 2:\r\n                        dataURL = _a.sent();\r\n                        return [2, dataURL];\r\n                }\r\n            });\r\n        });\r\n    }\n\n    var throwCORSError = function (url) { return __awaiter(void 0, void 0, void 0, function () {\r\n        return __generator(this, function (_a) {\r\n            return [2, Promise.reject(new Error([\r\n                    'Embedded Dark Reader cannot access a cross-origin resource',\r\n                    url,\r\n                    'Overview your URLs and CORS policies or use',\r\n                    '`DarkReader.setFetchMethod(fetch: (url) => Promise<Response>))`.',\r\n                    'See if using `DarkReader.setFetchMethod(window.fetch)`',\r\n                    'before `DarkReader.enable()` works.'\r\n                ].join(' ')))];\r\n        });\r\n    }); };\r\n    var fetcher = throwCORSError;\r\n    function setFetchMethod$1(fetch) {\r\n        if (fetch) {\r\n            fetcher = fetch;\r\n        }\r\n        else {\r\n            fetcher = throwCORSError;\r\n        }\r\n    }\r\n    function callFetchMethod(url) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4, fetcher(url)];\r\n                    case 1: return [2, _a.sent()];\r\n                }\r\n            });\r\n        });\r\n    }\n\n    if (!window.chrome) {\r\n        window.chrome = {};\r\n    }\r\n    if (!chrome.runtime) {\r\n        chrome.runtime = {};\r\n    }\r\n    var messageListeners = new Set();\r\n    function sendMessage() {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var id_1, _a, url, responseType, response, text_1, error_1;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        if (!(args[0] && args[0].type === MessageType.CS_FETCH)) return [3, 8];\r\n                        id_1 = args[0].id;\r\n                        _b.label = 1;\r\n                    case 1:\r\n                        _b.trys.push([1, 7, , 8]);\r\n                        _a = args[0].data, url = _a.url, responseType = _a.responseType;\r\n                        return [4, callFetchMethod(url)];\r\n                    case 2:\r\n                        response = _b.sent();\r\n                        if (!(responseType === 'data-url')) return [3, 4];\r\n                        return [4, readResponseAsDataURL(response)];\r\n                    case 3:\r\n                        text_1 = _b.sent();\r\n                        return [3, 6];\r\n                    case 4: return [4, response.text()];\r\n                    case 5:\r\n                        text_1 = _b.sent();\r\n                        _b.label = 6;\r\n                    case 6:\r\n                        messageListeners.forEach(function (cb) { return cb({ type: MessageType.BG_FETCH_RESPONSE, data: text_1, error: null, id: id_1 }); });\r\n                        return [3, 8];\r\n                    case 7:\r\n                        error_1 = _b.sent();\r\n                        console.error(error_1);\r\n                        messageListeners.forEach(function (cb) { return cb({ type: MessageType.BG_FETCH_RESPONSE, data: null, error: error_1, id: id_1 }); });\r\n                        return [3, 8];\r\n                    case 8: return [2];\r\n                }\r\n            });\r\n        });\r\n    }\r\n    function addMessageListener(callback) {\r\n        messageListeners.add(callback);\r\n    }\r\n    if (typeof chrome.runtime.sendMessage === 'function') {\r\n        var nativeSendMessage_1 = chrome.runtime.sendMessage;\r\n        chrome.runtime.sendMessage = function () {\r\n            var args = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                args[_i] = arguments[_i];\r\n            }\r\n            sendMessage.apply(void 0, __spreadArray([], __read(args), false));\r\n            nativeSendMessage_1.apply(chrome.runtime, args);\r\n        };\r\n    }\r\n    else {\r\n        chrome.runtime.sendMessage = sendMessage;\r\n    }\r\n    if (!chrome.runtime.onMessage) {\r\n        chrome.runtime.onMessage = {};\r\n    }\r\n    if (typeof chrome.runtime.onMessage.addListener === 'function') {\r\n        var nativeAddListener_1 = chrome.runtime.onMessage.addListener;\r\n        chrome.runtime.onMessage.addListener = function () {\r\n            var args = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                args[_i] = arguments[_i];\r\n            }\r\n            addMessageListener(args[0]);\r\n            nativeAddListener_1.apply(chrome.runtime.onMessage, args);\r\n        };\r\n    }\r\n    else {\r\n        chrome.runtime.onMessage.addListener = function () {\r\n            var args = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                args[_i] = arguments[_i];\r\n            }\r\n            return addMessageListener(args[0]);\r\n        };\r\n    }\n\n    var ThemeEngines = {\r\n        cssFilter: 'cssFilter',\r\n        svgFilter: 'svgFilter',\r\n        staticTheme: 'staticTheme',\r\n        dynamicTheme: 'dynamicTheme',\r\n    };\n\n    var DEFAULT_COLORS = {\r\n        darkScheme: {\r\n            background: '#181a1b',\r\n            text: '#e8e6e3',\r\n        },\r\n        lightScheme: {\r\n            background: '#dcdad7',\r\n            text: '#181a1b',\r\n        },\r\n    };\r\n    var DEFAULT_THEME = {\r\n        mode: 1,\r\n        brightness: 100,\r\n        contrast: 100,\r\n        grayscale: 0,\r\n        sepia: 0,\r\n        useFont: false,\r\n        fontFamily: isMacOS ? 'Helvetica Neue' : isWindows ? 'Segoe UI' : 'Open Sans',\r\n        textStroke: 0,\r\n        engine: ThemeEngines.dynamicTheme,\r\n        stylesheet: '',\r\n        darkSchemeBackgroundColor: DEFAULT_COLORS.darkScheme.background,\r\n        darkSchemeTextColor: DEFAULT_COLORS.darkScheme.text,\r\n        lightSchemeBackgroundColor: DEFAULT_COLORS.lightScheme.background,\r\n        lightSchemeTextColor: DEFAULT_COLORS.lightScheme.text,\r\n        scrollbarColor: isMacOS ? '' : 'auto',\r\n        selectionColor: 'auto',\r\n        styleSystemControls: true,\r\n        lightColorScheme: 'Default',\r\n        darkColorScheme: 'Default',\r\n    };\n\n    function isArrayLike(items) {\r\n        return items.length != null;\r\n    }\r\n    function forEach(items, iterator) {\r\n        var e_1, _a;\r\n        if (isArrayLike(items)) {\r\n            for (var i = 0, len = items.length; i < len; i++) {\r\n                iterator(items[i]);\r\n            }\r\n        }\r\n        else {\r\n            try {\r\n                for (var items_1 = __values(items), items_1_1 = items_1.next(); !items_1_1.done; items_1_1 = items_1.next()) {\r\n                    var item = items_1_1.value;\r\n                    iterator(item);\r\n                }\r\n            }\r\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n            finally {\r\n                try {\r\n                    if (items_1_1 && !items_1_1.done && (_a = items_1.return)) _a.call(items_1);\r\n                }\r\n                finally { if (e_1) throw e_1.error; }\r\n            }\r\n        }\r\n    }\r\n    function push(array, addition) {\r\n        forEach(addition, function (a) { return array.push(a); });\r\n    }\r\n    function toArray(items) {\r\n        var results = [];\r\n        for (var i = 0, len = items.length; i < len; i++) {\r\n            results.push(items[i]);\r\n        }\r\n        return results;\r\n    }\n\n    function logInfo() {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n    }\r\n    function logWarn() {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n    }\n\n    function throttle(callback) {\r\n        var pending = false;\r\n        var frameId = null;\r\n        var lastArgs;\r\n        var throttled = (function () {\r\n            var args = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                args[_i] = arguments[_i];\r\n            }\r\n            lastArgs = args;\r\n            if (frameId) {\r\n                pending = true;\r\n            }\r\n            else {\r\n                callback.apply(void 0, __spreadArray([], __read(lastArgs), false));\r\n                frameId = requestAnimationFrame(function () {\r\n                    frameId = null;\r\n                    if (pending) {\r\n                        callback.apply(void 0, __spreadArray([], __read(lastArgs), false));\r\n                        pending = false;\r\n                    }\r\n                });\r\n            }\r\n        });\r\n        var cancel = function () {\r\n            cancelAnimationFrame(frameId);\r\n            pending = false;\r\n            frameId = null;\r\n        };\r\n        return Object.assign(throttled, { cancel: cancel });\r\n    }\r\n    function createAsyncTasksQueue() {\r\n        var tasks = [];\r\n        var frameId = null;\r\n        function runTasks() {\r\n            var task;\r\n            while ((task = tasks.shift())) {\r\n                task();\r\n            }\r\n            frameId = null;\r\n        }\r\n        function add(task) {\r\n            tasks.push(task);\r\n            if (!frameId) {\r\n                frameId = requestAnimationFrame(runTasks);\r\n            }\r\n        }\r\n        function cancel() {\r\n            tasks.splice(0);\r\n            cancelAnimationFrame(frameId);\r\n            frameId = null;\r\n        }\r\n        return { add: add, cancel: cancel };\r\n    }\n\n    function getDuration(time) {\r\n        var duration = 0;\r\n        if (time.seconds) {\r\n            duration += time.seconds * 1000;\r\n        }\r\n        if (time.minutes) {\r\n            duration += time.minutes * 60 * 1000;\r\n        }\r\n        if (time.hours) {\r\n            duration += time.hours * 60 * 60 * 1000;\r\n        }\r\n        if (time.days) {\r\n            duration += time.days * 24 * 60 * 60 * 1000;\r\n        }\r\n        return duration;\r\n    }\n\n    function removeNode(node) {\r\n        node && node.parentNode && node.parentNode.removeChild(node);\r\n    }\r\n    function watchForNodePosition(node, mode, onRestore) {\r\n        if (onRestore === void 0) { onRestore = Function.prototype; }\r\n        var MAX_ATTEMPTS_COUNT = 10;\r\n        var RETRY_TIMEOUT = getDuration({ seconds: 2 });\r\n        var ATTEMPTS_INTERVAL = getDuration({ seconds: 10 });\r\n        var prevSibling = node.previousSibling;\r\n        var parent = node.parentNode;\r\n        if (!parent) {\r\n            throw new Error('Unable to watch for node position: parent element not found');\r\n        }\r\n        if (mode === 'prev-sibling' && !prevSibling) {\r\n            throw new Error('Unable to watch for node position: there is no previous sibling');\r\n        }\r\n        var attempts = 0;\r\n        var start = null;\r\n        var timeoutId = null;\r\n        var restore = throttle(function () {\r\n            if (timeoutId) {\r\n                return;\r\n            }\r\n            attempts++;\r\n            var now = Date.now();\r\n            if (start == null) {\r\n                start = now;\r\n            }\r\n            else if (attempts >= MAX_ATTEMPTS_COUNT) {\r\n                if (now - start < ATTEMPTS_INTERVAL) {\r\n                    logWarn(\"Node position watcher paused: retry in \" + RETRY_TIMEOUT + \"ms\", node, prevSibling);\r\n                    timeoutId = setTimeout(function () {\r\n                        start = null;\r\n                        attempts = 0;\r\n                        timeoutId = null;\r\n                        restore();\r\n                    }, RETRY_TIMEOUT);\r\n                    return;\r\n                }\r\n                start = now;\r\n                attempts = 1;\r\n            }\r\n            if (mode === 'parent') {\r\n                if (prevSibling && prevSibling.parentNode !== parent) {\r\n                    logWarn('Unable to restore node position: sibling parent changed', node, prevSibling, parent);\r\n                    stop();\r\n                    return;\r\n                }\r\n            }\r\n            if (mode === 'prev-sibling') {\r\n                if (prevSibling.parentNode == null) {\r\n                    logWarn('Unable to restore node position: sibling was removed', node, prevSibling, parent);\r\n                    stop();\r\n                    return;\r\n                }\r\n                if (prevSibling.parentNode !== parent) {\r\n                    logWarn('Style was moved to another parent', node, prevSibling, parent);\r\n                    updateParent(prevSibling.parentNode);\r\n                }\r\n            }\r\n            logWarn('Restoring node position', node, prevSibling, parent);\r\n            parent.insertBefore(node, prevSibling ? prevSibling.nextSibling : parent.firstChild);\r\n            observer.takeRecords();\r\n            onRestore && onRestore();\r\n        });\r\n        var observer = new MutationObserver(function () {\r\n            if ((mode === 'parent' && node.parentNode !== parent) ||\r\n                (mode === 'prev-sibling' && node.previousSibling !== prevSibling)) {\r\n                restore();\r\n            }\r\n        });\r\n        var run = function () {\r\n            observer.observe(parent, { childList: true });\r\n        };\r\n        var stop = function () {\r\n            clearTimeout(timeoutId);\r\n            observer.disconnect();\r\n            restore.cancel();\r\n        };\r\n        var skip = function () {\r\n            observer.takeRecords();\r\n        };\r\n        var updateParent = function (parentNode) {\r\n            parent = parentNode;\r\n            stop();\r\n            run();\r\n        };\r\n        run();\r\n        return { run: run, stop: stop, skip: skip };\r\n    }\r\n    function iterateShadowHosts(root, iterator) {\r\n        if (root == null) {\r\n            return;\r\n        }\r\n        var walker = document.createTreeWalker(root, NodeFilter.SHOW_ELEMENT, {\r\n            acceptNode: function (node) {\r\n                return node.shadowRoot == null ? NodeFilter.FILTER_SKIP : NodeFilter.FILTER_ACCEPT;\r\n            }\r\n        });\r\n        for (var node = (root.shadowRoot ? walker.currentNode : walker.nextNode()); node != null; node = walker.nextNode()) {\r\n            iterator(node);\r\n            iterateShadowHosts(node.shadowRoot, iterator);\r\n        }\r\n    }\r\n    function isDOMReady() {\r\n        return document.readyState === 'complete' || document.readyState === 'interactive';\r\n    }\r\n    var readyStateListeners = new Set();\r\n    function addDOMReadyListener(listener) {\r\n        readyStateListeners.add(listener);\r\n    }\r\n    function removeDOMReadyListener(listener) {\r\n        readyStateListeners.delete(listener);\r\n    }\r\n    function isReadyStateComplete() {\r\n        return document.readyState === 'complete';\r\n    }\r\n    var readyStateCompleteListeners = new Set();\r\n    function addReadyStateCompleteListener(listener) {\r\n        readyStateCompleteListeners.add(listener);\r\n    }\r\n    function cleanReadyStateCompleteListeners() {\r\n        readyStateCompleteListeners.clear();\r\n    }\r\n    if (!isDOMReady()) {\r\n        var onReadyStateChange_1 = function () {\r\n            if (isDOMReady()) {\r\n                readyStateListeners.forEach(function (listener) { return listener(); });\r\n                readyStateListeners.clear();\r\n                if (isReadyStateComplete()) {\r\n                    document.removeEventListener('readystatechange', onReadyStateChange_1);\r\n                    readyStateCompleteListeners.forEach(function (listener) { return listener(); });\r\n                    readyStateCompleteListeners.clear();\r\n                }\r\n            }\r\n        };\r\n        document.addEventListener('readystatechange', onReadyStateChange_1);\r\n    }\r\n    var HUGE_MUTATIONS_COUNT = 1000;\r\n    function isHugeMutation(mutations) {\r\n        if (mutations.length > HUGE_MUTATIONS_COUNT) {\r\n            return true;\r\n        }\r\n        var addedNodesCount = 0;\r\n        for (var i = 0; i < mutations.length; i++) {\r\n            addedNodesCount += mutations[i].addedNodes.length;\r\n            if (addedNodesCount > HUGE_MUTATIONS_COUNT) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    function getElementsTreeOperations(mutations) {\r\n        var additions = new Set();\r\n        var deletions = new Set();\r\n        var moves = new Set();\r\n        mutations.forEach(function (m) {\r\n            forEach(m.addedNodes, function (n) {\r\n                if (n instanceof Element && n.isConnected) {\r\n                    additions.add(n);\r\n                }\r\n            });\r\n            forEach(m.removedNodes, function (n) {\r\n                if (n instanceof Element) {\r\n                    if (n.isConnected) {\r\n                        moves.add(n);\r\n                        additions.delete(n);\r\n                    }\r\n                    else {\r\n                        deletions.add(n);\r\n                    }\r\n                }\r\n            });\r\n        });\r\n        var duplicateAdditions = [];\r\n        var duplicateDeletions = [];\r\n        additions.forEach(function (node) {\r\n            if (additions.has(node.parentElement)) {\r\n                duplicateAdditions.push(node);\r\n            }\r\n        });\r\n        deletions.forEach(function (node) {\r\n            if (deletions.has(node.parentElement)) {\r\n                duplicateDeletions.push(node);\r\n            }\r\n        });\r\n        duplicateAdditions.forEach(function (node) { return additions.delete(node); });\r\n        duplicateDeletions.forEach(function (node) { return deletions.delete(node); });\r\n        return { additions: additions, moves: moves, deletions: deletions };\r\n    }\r\n    var optimizedTreeObservers = new Map();\r\n    var optimizedTreeCallbacks = new WeakMap();\r\n    function createOptimizedTreeObserver(root, callbacks) {\r\n        var observer;\r\n        var observerCallbacks;\r\n        var domReadyListener;\r\n        if (optimizedTreeObservers.has(root)) {\r\n            observer = optimizedTreeObservers.get(root);\r\n            observerCallbacks = optimizedTreeCallbacks.get(observer);\r\n        }\r\n        else {\r\n            var hadHugeMutationsBefore_1 = false;\r\n            var subscribedForReadyState_1 = false;\r\n            observer = new MutationObserver(function (mutations) {\r\n                if (isHugeMutation(mutations)) {\r\n                    if (!hadHugeMutationsBefore_1 || isDOMReady()) {\r\n                        observerCallbacks.forEach(function (_a) {\r\n                            var onHugeMutations = _a.onHugeMutations;\r\n                            return onHugeMutations(root);\r\n                        });\r\n                    }\r\n                    else if (!subscribedForReadyState_1) {\r\n                        domReadyListener = function () { return observerCallbacks.forEach(function (_a) {\r\n                            var onHugeMutations = _a.onHugeMutations;\r\n                            return onHugeMutations(root);\r\n                        }); };\r\n                        addDOMReadyListener(domReadyListener);\r\n                        subscribedForReadyState_1 = true;\r\n                    }\r\n                    hadHugeMutationsBefore_1 = true;\r\n                }\r\n                else {\r\n                    var elementsOperations_1 = getElementsTreeOperations(mutations);\r\n                    observerCallbacks.forEach(function (_a) {\r\n                        var onMinorMutations = _a.onMinorMutations;\r\n                        return onMinorMutations(elementsOperations_1);\r\n                    });\r\n                }\r\n            });\r\n            observer.observe(root, { childList: true, subtree: true });\r\n            optimizedTreeObservers.set(root, observer);\r\n            observerCallbacks = new Set();\r\n            optimizedTreeCallbacks.set(observer, observerCallbacks);\r\n        }\r\n        observerCallbacks.add(callbacks);\r\n        return {\r\n            disconnect: function () {\r\n                observerCallbacks.delete(callbacks);\r\n                if (domReadyListener) {\r\n                    removeDOMReadyListener(domReadyListener);\r\n                }\r\n                if (observerCallbacks.size === 0) {\r\n                    observer.disconnect();\r\n                    optimizedTreeCallbacks.delete(observer);\r\n                    optimizedTreeObservers.delete(root);\r\n                }\r\n            },\r\n        };\r\n    }\n\n    var anchor;\r\n    var parsedURLCache = new Map();\r\n    function fixBaseURL($url) {\r\n        if (!anchor) {\r\n            anchor = document.createElement('a');\r\n        }\r\n        anchor.href = $url;\r\n        return anchor.href;\r\n    }\r\n    function parseURL($url, $base) {\r\n        if ($base === void 0) { $base = null; }\r\n        var key = \"\" + $url + ($base ? \";\" + $base : '');\r\n        if (parsedURLCache.has(key)) {\r\n            return parsedURLCache.get(key);\r\n        }\r\n        if ($base) {\r\n            var parsedURL_1 = new URL($url, fixBaseURL($base));\r\n            parsedURLCache.set(key, parsedURL_1);\r\n            return parsedURL_1;\r\n        }\r\n        var parsedURL = new URL(fixBaseURL($url));\r\n        parsedURLCache.set($url, parsedURL);\r\n        return parsedURL;\r\n    }\r\n    function getAbsoluteURL($base, $relative) {\r\n        if ($relative.match(/^data\\\\?\\:/)) {\r\n            return $relative;\r\n        }\r\n        if (/^\\/\\//.test($relative)) {\r\n            return \"\" + location.protocol + $relative;\r\n        }\r\n        var b = parseURL($base);\r\n        var a = parseURL($relative, b.href);\r\n        return a.href;\r\n    }\r\n    function isRelativeHrefOnAbsolutePath(href) {\r\n        if (href.startsWith('data:')) {\r\n            return true;\r\n        }\r\n        var url = parseURL(href);\r\n        var base = parseURL(location.href);\r\n        if (url.protocol !== base.protocol) {\r\n            return false;\r\n        }\r\n        if (url.hostname !== base.hostname) {\r\n            return false;\r\n        }\r\n        if (url.port !== base.port) {\r\n            return false;\r\n        }\r\n        var path = /.*\\//.exec(url.pathname)[0];\r\n        var basePath = /.*\\//.exec(base.pathname)[0];\r\n        return path === basePath;\r\n    }\n\n    function iterateCSSRules(rules, iterate, onMediaRuleError) {\r\n        forEach(rules, function (rule) {\r\n            if (rule.selectorText) {\r\n                iterate(rule);\r\n            }\r\n            else if (rule.href) {\r\n                try {\r\n                    iterateCSSRules(rule.styleSheet.cssRules, iterate, onMediaRuleError);\r\n                }\r\n                catch (err) {\r\n                    logInfo(\"Found a non-loaded link.\");\r\n                    onMediaRuleError && onMediaRuleError();\r\n                }\r\n            }\r\n            else if (rule.media) {\r\n                var media = Array.from(rule.media);\r\n                var isScreenOrAll = media.some(function (m) { return m.startsWith('screen') || m.startsWith('all'); });\r\n                var isPrintOrSpeech = media.some(function (m) { return m.startsWith('print') || m.startsWith('speech'); });\r\n                if (isScreenOrAll || !isPrintOrSpeech) {\r\n                    iterateCSSRules(rule.cssRules, iterate, onMediaRuleError);\r\n                }\r\n            }\r\n            else if (rule.conditionText) {\r\n                if (CSS.supports(rule.conditionText)) {\r\n                    iterateCSSRules(rule.cssRules, iterate, onMediaRuleError);\r\n                }\r\n            }\r\n            else {\r\n                logWarn(\"CSSRule type not supported\", rule);\r\n            }\r\n        });\r\n    }\r\n    var shorthandVarDependantProperties = [\r\n        'background',\r\n        'border',\r\n        'border-color',\r\n        'border-bottom',\r\n        'border-left',\r\n        'border-right',\r\n        'border-top',\r\n        'outline',\r\n        'outline-color',\r\n    ];\r\n    var shorthandVarDepPropRegexps = isSafari ? shorthandVarDependantProperties.map(function (prop) {\r\n        var regexp = new RegExp(prop + \":\\\\s*(.*?)\\\\s*;\");\r\n        return [prop, regexp];\r\n    }) : null;\r\n    function iterateCSSDeclarations(style, iterate) {\r\n        forEach(style, function (property) {\r\n            var value = style.getPropertyValue(property).trim();\r\n            if (!value) {\r\n                return;\r\n            }\r\n            iterate(property, value);\r\n        });\r\n        var cssText = style.cssText;\r\n        if (cssText.includes('var(')) {\r\n            if (isSafari) {\r\n                shorthandVarDepPropRegexps.forEach(function (_a) {\r\n                    var _b = __read(_a, 2), prop = _b[0], regexp = _b[1];\r\n                    var match = cssText.match(regexp);\r\n                    if (match && match[1]) {\r\n                        var val = match[1].trim();\r\n                        iterate(prop, val);\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                shorthandVarDependantProperties.forEach(function (prop) {\r\n                    var val = style.getPropertyValue(prop);\r\n                    if (val && val.includes('var(')) {\r\n                        iterate(prop, val);\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    }\r\n    var cssURLRegex = /url\\((('.+?')|(\".+?\")|([^\\)]*?))\\)/g;\r\n    var cssImportRegex = /@import\\s*(url\\()?(('.+?')|(\".+?\")|([^\\)]*?))\\)?;?/g;\r\n    function getCSSURLValue(cssURL) {\r\n        return cssURL.replace(/^url\\((.*)\\)$/, '$1').trim().replace(/^\"(.*)\"$/, '$1').replace(/^'(.*)'$/, '$1');\r\n    }\r\n    function getCSSBaseBath(url) {\r\n        var cssURL = parseURL(url);\r\n        return \"\" + cssURL.origin + cssURL.pathname.replace(/\\?.*$/, '').replace(/(\\/)([^\\/]+)$/i, '$1');\r\n    }\r\n    function replaceCSSRelativeURLsWithAbsolute($css, cssBasePath) {\r\n        return $css.replace(cssURLRegex, function (match) {\r\n            var pathValue = getCSSURLValue(match);\r\n            return \"url(\\\"\" + getAbsoluteURL(cssBasePath, pathValue) + \"\\\")\";\r\n        });\r\n    }\r\n    var cssCommentsRegex = /\\/\\*[\\s\\S]*?\\*\\//g;\r\n    function removeCSSComments($css) {\r\n        return $css.replace(cssCommentsRegex, '');\r\n    }\r\n    var fontFaceRegex = /@font-face\\s*{[^}]*}/g;\r\n    function replaceCSSFontFace($css) {\r\n        return $css.replace(fontFaceRegex, '');\r\n    }\n\n    function hslToRGB(_a) {\r\n        var h = _a.h, s = _a.s, l = _a.l, _b = _a.a, a = _b === void 0 ? 1 : _b;\r\n        if (s === 0) {\r\n            var _c = __read([l, l, l].map(function (x) { return Math.round(x * 255); }), 3), r_1 = _c[0], b_1 = _c[1], g_1 = _c[2];\r\n            return { r: r_1, g: g_1, b: b_1, a: a };\r\n        }\r\n        var c = (1 - Math.abs(2 * l - 1)) * s;\r\n        var x = c * (1 - Math.abs((h / 60) % 2 - 1));\r\n        var m = l - c / 2;\r\n        var _d = __read((h < 60 ? [c, x, 0] :\r\n            h < 120 ? [x, c, 0] :\r\n                h < 180 ? [0, c, x] :\r\n                    h < 240 ? [0, x, c] :\r\n                        h < 300 ? [x, 0, c] :\r\n                            [c, 0, x]).map(function (n) { return Math.round((n + m) * 255); }), 3), r = _d[0], g = _d[1], b = _d[2];\r\n        return { r: r, g: g, b: b, a: a };\r\n    }\r\n    function rgbToHSL(_a) {\r\n        var r255 = _a.r, g255 = _a.g, b255 = _a.b, _b = _a.a, a = _b === void 0 ? 1 : _b;\r\n        var r = r255 / 255;\r\n        var g = g255 / 255;\r\n        var b = b255 / 255;\r\n        var max = Math.max(r, g, b);\r\n        var min = Math.min(r, g, b);\r\n        var c = max - min;\r\n        var l = (max + min) / 2;\r\n        if (c === 0) {\r\n            return { h: 0, s: 0, l: l, a: a };\r\n        }\r\n        var h = (max === r ? (((g - b) / c) % 6) :\r\n            max === g ? ((b - r) / c + 2) :\r\n                ((r - g) / c + 4)) * 60;\r\n        if (h < 0) {\r\n            h += 360;\r\n        }\r\n        var s = c / (1 - Math.abs(2 * l - 1));\r\n        return { h: h, s: s, l: l, a: a };\r\n    }\r\n    function toFixed(n, digits) {\r\n        if (digits === void 0) { digits = 0; }\r\n        var fixed = n.toFixed(digits);\r\n        if (digits === 0) {\r\n            return fixed;\r\n        }\r\n        var dot = fixed.indexOf('.');\r\n        if (dot >= 0) {\r\n            var zerosMatch = fixed.match(/0+$/);\r\n            if (zerosMatch) {\r\n                if (zerosMatch.index === dot + 1) {\r\n                    return fixed.substring(0, dot);\r\n                }\r\n                return fixed.substring(0, zerosMatch.index);\r\n            }\r\n        }\r\n        return fixed;\r\n    }\r\n    function rgbToString(rgb) {\r\n        var r = rgb.r, g = rgb.g, b = rgb.b, a = rgb.a;\r\n        if (a != null && a < 1) {\r\n            return \"rgba(\" + toFixed(r) + \", \" + toFixed(g) + \", \" + toFixed(b) + \", \" + toFixed(a, 2) + \")\";\r\n        }\r\n        return \"rgb(\" + toFixed(r) + \", \" + toFixed(g) + \", \" + toFixed(b) + \")\";\r\n    }\r\n    function rgbToHexString(_a) {\r\n        var r = _a.r, g = _a.g, b = _a.b, a = _a.a;\r\n        return \"#\" + (a != null && a < 1 ? [r, g, b, Math.round(a * 255)] : [r, g, b]).map(function (x) {\r\n            return \"\" + (x < 16 ? '0' : '') + x.toString(16);\r\n        }).join('');\r\n    }\r\n    function hslToString(hsl) {\r\n        var h = hsl.h, s = hsl.s, l = hsl.l, a = hsl.a;\r\n        if (a != null && a < 1) {\r\n            return \"hsla(\" + toFixed(h) + \", \" + toFixed(s * 100) + \"%, \" + toFixed(l * 100) + \"%, \" + toFixed(a, 2) + \")\";\r\n        }\r\n        return \"hsl(\" + toFixed(h) + \", \" + toFixed(s * 100) + \"%, \" + toFixed(l * 100) + \"%)\";\r\n    }\r\n    var rgbMatch = /^rgba?\\([^\\(\\)]+\\)$/;\r\n    var hslMatch = /^hsla?\\([^\\(\\)]+\\)$/;\r\n    var hexMatch = /^#[0-9a-f]+$/i;\r\n    function parse($color) {\r\n        var c = $color.trim().toLowerCase();\r\n        if (c.match(rgbMatch)) {\r\n            return parseRGB(c);\r\n        }\r\n        if (c.match(hslMatch)) {\r\n            return parseHSL(c);\r\n        }\r\n        if (c.match(hexMatch)) {\r\n            return parseHex(c);\r\n        }\r\n        if (knownColors.has(c)) {\r\n            return getColorByName(c);\r\n        }\r\n        if (systemColors.has(c)) {\r\n            return getSystemColor(c);\r\n        }\r\n        if ($color === 'transparent') {\r\n            return { r: 0, g: 0, b: 0, a: 0 };\r\n        }\r\n        throw new Error(\"Unable to parse \" + $color);\r\n    }\r\n    function getNumbers($color) {\r\n        var numbers = [];\r\n        var prevPos = 0;\r\n        var isMining = false;\r\n        var startIndex = $color.indexOf('(');\r\n        $color = $color.substring(startIndex + 1, $color.length - 1);\r\n        for (var i = 0; i < $color.length; i++) {\r\n            var c = $color[i];\r\n            if (c >= '0' && c <= '9' || c === '.' || c === '+' || c === '-') {\r\n                isMining = true;\r\n            }\r\n            else if (isMining && (c === ' ' || c === ',')) {\r\n                numbers.push($color.substring(prevPos, i));\r\n                isMining = false;\r\n                prevPos = i + 1;\r\n            }\r\n            else if (!isMining) {\r\n                prevPos = i + 1;\r\n            }\r\n        }\r\n        if (isMining) {\r\n            numbers.push($color.substring(prevPos, $color.length));\r\n        }\r\n        return numbers;\r\n    }\r\n    function getNumbersFromString(str, range, units) {\r\n        var raw = getNumbers(str);\r\n        var unitsList = Object.entries(units);\r\n        var numbers = raw.map(function (r) { return r.trim(); }).map(function (r, i) {\r\n            var n;\r\n            var unit = unitsList.find(function (_a) {\r\n                var _b = __read(_a, 1), u = _b[0];\r\n                return r.endsWith(u);\r\n            });\r\n            if (unit) {\r\n                n = parseFloat(r.substring(0, r.length - unit[0].length)) / unit[1] * range[i];\r\n            }\r\n            else {\r\n                n = parseFloat(r);\r\n            }\r\n            if (range[i] > 1) {\r\n                return Math.round(n);\r\n            }\r\n            return n;\r\n        });\r\n        return numbers;\r\n    }\r\n    var rgbRange = [255, 255, 255, 1];\r\n    var rgbUnits = { '%': 100 };\r\n    function parseRGB($rgb) {\r\n        var _a = __read(getNumbersFromString($rgb, rgbRange, rgbUnits), 4), r = _a[0], g = _a[1], b = _a[2], _b = _a[3], a = _b === void 0 ? 1 : _b;\r\n        return { r: r, g: g, b: b, a: a };\r\n    }\r\n    var hslRange = [360, 1, 1, 1];\r\n    var hslUnits = { '%': 100, 'deg': 360, 'rad': 2 * Math.PI, 'turn': 1 };\r\n    function parseHSL($hsl) {\r\n        var _a = __read(getNumbersFromString($hsl, hslRange, hslUnits), 4), h = _a[0], s = _a[1], l = _a[2], _b = _a[3], a = _b === void 0 ? 1 : _b;\r\n        return hslToRGB({ h: h, s: s, l: l, a: a });\r\n    }\r\n    function parseHex($hex) {\r\n        var h = $hex.substring(1);\r\n        switch (h.length) {\r\n            case 3:\r\n            case 4: {\r\n                var _a = __read([0, 1, 2].map(function (i) { return parseInt(\"\" + h[i] + h[i], 16); }), 3), r = _a[0], g = _a[1], b = _a[2];\r\n                var a = h.length === 3 ? 1 : (parseInt(\"\" + h[3] + h[3], 16) / 255);\r\n                return { r: r, g: g, b: b, a: a };\r\n            }\r\n            case 6:\r\n            case 8: {\r\n                var _b = __read([0, 2, 4].map(function (i) { return parseInt(h.substring(i, i + 2), 16); }), 3), r = _b[0], g = _b[1], b = _b[2];\r\n                var a = h.length === 6 ? 1 : (parseInt(h.substring(6, 8), 16) / 255);\r\n                return { r: r, g: g, b: b, a: a };\r\n            }\r\n        }\r\n        throw new Error(\"Unable to parse \" + $hex);\r\n    }\r\n    function getColorByName($color) {\r\n        var n = knownColors.get($color);\r\n        return {\r\n            r: (n >> 16) & 255,\r\n            g: (n >> 8) & 255,\r\n            b: (n >> 0) & 255,\r\n            a: 1\r\n        };\r\n    }\r\n    function getSystemColor($color) {\r\n        var n = systemColors.get($color);\r\n        return {\r\n            r: (n >> 16) & 255,\r\n            g: (n >> 8) & 255,\r\n            b: (n >> 0) & 255,\r\n            a: 1\r\n        };\r\n    }\r\n    var isCharDigit = function (char) { return char >= '0' && char <= '9'; };\r\n    var getAmountOfDigits = function (number) { return Math.floor(Math.log10(number)) + 1; };\r\n    function lowerCalcExpression(color) {\r\n        var searchIndex = 0;\r\n        var replaceBetweenIndices = function (start, end, replacement) {\r\n            color = color.substring(0, start) + replacement + color.substring(end);\r\n        };\r\n        var getNumber = function () {\r\n            var resultNumber = 0;\r\n            for (var i = 1; i < 4; i++) {\r\n                var char = color[searchIndex + i];\r\n                if (char === ' ') {\r\n                    break;\r\n                }\r\n                if (isCharDigit(char)) {\r\n                    resultNumber *= 10;\r\n                    resultNumber += Number(char);\r\n                }\r\n                else {\r\n                    break;\r\n                }\r\n            }\r\n            var lenDigits = getAmountOfDigits(resultNumber);\r\n            searchIndex += lenDigits;\r\n            var possibleType = color[searchIndex + 1];\r\n            if (possibleType !== '%') {\r\n                return;\r\n            }\r\n            searchIndex++;\r\n            return resultNumber;\r\n        };\r\n        while ((searchIndex = color.indexOf('calc(')) !== 0) {\r\n            var startIndex = searchIndex;\r\n            searchIndex += 4;\r\n            var firstNumber = getNumber();\r\n            if (!firstNumber) {\r\n                break;\r\n            }\r\n            if (color[searchIndex + 1] !== ' ') {\r\n                break;\r\n            }\r\n            searchIndex++;\r\n            var operation = color[searchIndex + 1];\r\n            if (operation !== '+' && operation !== '-') {\r\n                break;\r\n            }\r\n            searchIndex++;\r\n            if (color[searchIndex + 1] !== ' ') {\r\n                break;\r\n            }\r\n            searchIndex++;\r\n            var secondNumber = getNumber();\r\n            if (!secondNumber) {\r\n                break;\r\n            }\r\n            var replacement = void 0;\r\n            if (operation === '+') {\r\n                replacement = firstNumber + secondNumber + \"%\";\r\n            }\r\n            else {\r\n                replacement = firstNumber - secondNumber + \"%\";\r\n            }\r\n            replaceBetweenIndices(startIndex, searchIndex + 2, replacement);\r\n        }\r\n        return color;\r\n    }\r\n    var knownColors = new Map(Object.entries({\r\n        aliceblue: 0xf0f8ff,\r\n        antiquewhite: 0xfaebd7,\r\n        aqua: 0x00ffff,\r\n        aquamarine: 0x7fffd4,\r\n        azure: 0xf0ffff,\r\n        beige: 0xf5f5dc,\r\n        bisque: 0xffe4c4,\r\n        black: 0x000000,\r\n        blanchedalmond: 0xffebcd,\r\n        blue: 0x0000ff,\r\n        blueviolet: 0x8a2be2,\r\n        brown: 0xa52a2a,\r\n        burlywood: 0xdeb887,\r\n        cadetblue: 0x5f9ea0,\r\n        chartreuse: 0x7fff00,\r\n        chocolate: 0xd2691e,\r\n        coral: 0xff7f50,\r\n        cornflowerblue: 0x6495ed,\r\n        cornsilk: 0xfff8dc,\r\n        crimson: 0xdc143c,\r\n        cyan: 0x00ffff,\r\n        darkblue: 0x00008b,\r\n        darkcyan: 0x008b8b,\r\n        darkgoldenrod: 0xb8860b,\r\n        darkgray: 0xa9a9a9,\r\n        darkgrey: 0xa9a9a9,\r\n        darkgreen: 0x006400,\r\n        darkkhaki: 0xbdb76b,\r\n        darkmagenta: 0x8b008b,\r\n        darkolivegreen: 0x556b2f,\r\n        darkorange: 0xff8c00,\r\n        darkorchid: 0x9932cc,\r\n        darkred: 0x8b0000,\r\n        darksalmon: 0xe9967a,\r\n        darkseagreen: 0x8fbc8f,\r\n        darkslateblue: 0x483d8b,\r\n        darkslategray: 0x2f4f4f,\r\n        darkslategrey: 0x2f4f4f,\r\n        darkturquoise: 0x00ced1,\r\n        darkviolet: 0x9400d3,\r\n        deeppink: 0xff1493,\r\n        deepskyblue: 0x00bfff,\r\n        dimgray: 0x696969,\r\n        dimgrey: 0x696969,\r\n        dodgerblue: 0x1e90ff,\r\n        firebrick: 0xb22222,\r\n        floralwhite: 0xfffaf0,\r\n        forestgreen: 0x228b22,\r\n        fuchsia: 0xff00ff,\r\n        gainsboro: 0xdcdcdc,\r\n        ghostwhite: 0xf8f8ff,\r\n        gold: 0xffd700,\r\n        goldenrod: 0xdaa520,\r\n        gray: 0x808080,\r\n        grey: 0x808080,\r\n        green: 0x008000,\r\n        greenyellow: 0xadff2f,\r\n        honeydew: 0xf0fff0,\r\n        hotpink: 0xff69b4,\r\n        indianred: 0xcd5c5c,\r\n        indigo: 0x4b0082,\r\n        ivory: 0xfffff0,\r\n        khaki: 0xf0e68c,\r\n        lavender: 0xe6e6fa,\r\n        lavenderblush: 0xfff0f5,\r\n        lawngreen: 0x7cfc00,\r\n        lemonchiffon: 0xfffacd,\r\n        lightblue: 0xadd8e6,\r\n        lightcoral: 0xf08080,\r\n        lightcyan: 0xe0ffff,\r\n        lightgoldenrodyellow: 0xfafad2,\r\n        lightgray: 0xd3d3d3,\r\n        lightgrey: 0xd3d3d3,\r\n        lightgreen: 0x90ee90,\r\n        lightpink: 0xffb6c1,\r\n        lightsalmon: 0xffa07a,\r\n        lightseagreen: 0x20b2aa,\r\n        lightskyblue: 0x87cefa,\r\n        lightslategray: 0x778899,\r\n        lightslategrey: 0x778899,\r\n        lightsteelblue: 0xb0c4de,\r\n        lightyellow: 0xffffe0,\r\n        lime: 0x00ff00,\r\n        limegreen: 0x32cd32,\r\n        linen: 0xfaf0e6,\r\n        magenta: 0xff00ff,\r\n        maroon: 0x800000,\r\n        mediumaquamarine: 0x66cdaa,\r\n        mediumblue: 0x0000cd,\r\n        mediumorchid: 0xba55d3,\r\n        mediumpurple: 0x9370db,\r\n        mediumseagreen: 0x3cb371,\r\n        mediumslateblue: 0x7b68ee,\r\n        mediumspringgreen: 0x00fa9a,\r\n        mediumturquoise: 0x48d1cc,\r\n        mediumvioletred: 0xc71585,\r\n        midnightblue: 0x191970,\r\n        mintcream: 0xf5fffa,\r\n        mistyrose: 0xffe4e1,\r\n        moccasin: 0xffe4b5,\r\n        navajowhite: 0xffdead,\r\n        navy: 0x000080,\r\n        oldlace: 0xfdf5e6,\r\n        olive: 0x808000,\r\n        olivedrab: 0x6b8e23,\r\n        orange: 0xffa500,\r\n        orangered: 0xff4500,\r\n        orchid: 0xda70d6,\r\n        palegoldenrod: 0xeee8aa,\r\n        palegreen: 0x98fb98,\r\n        paleturquoise: 0xafeeee,\r\n        palevioletred: 0xdb7093,\r\n        papayawhip: 0xffefd5,\r\n        peachpuff: 0xffdab9,\r\n        peru: 0xcd853f,\r\n        pink: 0xffc0cb,\r\n        plum: 0xdda0dd,\r\n        powderblue: 0xb0e0e6,\r\n        purple: 0x800080,\r\n        rebeccapurple: 0x663399,\r\n        red: 0xff0000,\r\n        rosybrown: 0xbc8f8f,\r\n        royalblue: 0x4169e1,\r\n        saddlebrown: 0x8b4513,\r\n        salmon: 0xfa8072,\r\n        sandybrown: 0xf4a460,\r\n        seagreen: 0x2e8b57,\r\n        seashell: 0xfff5ee,\r\n        sienna: 0xa0522d,\r\n        silver: 0xc0c0c0,\r\n        skyblue: 0x87ceeb,\r\n        slateblue: 0x6a5acd,\r\n        slategray: 0x708090,\r\n        slategrey: 0x708090,\r\n        snow: 0xfffafa,\r\n        springgreen: 0x00ff7f,\r\n        steelblue: 0x4682b4,\r\n        tan: 0xd2b48c,\r\n        teal: 0x008080,\r\n        thistle: 0xd8bfd8,\r\n        tomato: 0xff6347,\r\n        turquoise: 0x40e0d0,\r\n        violet: 0xee82ee,\r\n        wheat: 0xf5deb3,\r\n        white: 0xffffff,\r\n        whitesmoke: 0xf5f5f5,\r\n        yellow: 0xffff00,\r\n        yellowgreen: 0x9acd32,\r\n    }));\r\n    var systemColors = new Map(Object.entries({\r\n        ActiveBorder: 0x3b99fc,\r\n        ActiveCaption: 0x000000,\r\n        AppWorkspace: 0xaaaaaa,\r\n        Background: 0x6363ce,\r\n        ButtonFace: 0xffffff,\r\n        ButtonHighlight: 0xe9e9e9,\r\n        ButtonShadow: 0x9fa09f,\r\n        ButtonText: 0x000000,\r\n        CaptionText: 0x000000,\r\n        GrayText: 0x7f7f7f,\r\n        Highlight: 0xb2d7ff,\r\n        HighlightText: 0x000000,\r\n        InactiveBorder: 0xffffff,\r\n        InactiveCaption: 0xffffff,\r\n        InactiveCaptionText: 0x000000,\r\n        InfoBackground: 0xfbfcc5,\r\n        InfoText: 0x000000,\r\n        Menu: 0xf6f6f6,\r\n        MenuText: 0xffffff,\r\n        Scrollbar: 0xaaaaaa,\r\n        ThreeDDarkShadow: 0x000000,\r\n        ThreeDFace: 0xc0c0c0,\r\n        ThreeDHighlight: 0xffffff,\r\n        ThreeDLightShadow: 0xffffff,\r\n        ThreeDShadow: 0x000000,\r\n        Window: 0xececec,\r\n        WindowFrame: 0xaaaaaa,\r\n        WindowText: 0x000000,\r\n        '-webkit-focus-ring-color': 0xe59700\r\n    }).map(function (_a) {\r\n        var _b = __read(_a, 2), key = _b[0], value = _b[1];\r\n        return [key.toLowerCase(), value];\r\n    }));\n\n    function scale(x, inLow, inHigh, outLow, outHigh) {\r\n        return (x - inLow) * (outHigh - outLow) / (inHigh - inLow) + outLow;\r\n    }\r\n    function clamp(x, min, max) {\r\n        return Math.min(max, Math.max(min, x));\r\n    }\r\n    function multiplyMatrices(m1, m2) {\r\n        var result = [];\r\n        for (var i = 0, len = m1.length; i < len; i++) {\r\n            result[i] = [];\r\n            for (var j = 0, len2 = m2[0].length; j < len2; j++) {\r\n                var sum = 0;\r\n                for (var k = 0, len3 = m1[0].length; k < len3; k++) {\r\n                    sum += m1[i][k] * m2[k][j];\r\n                }\r\n                result[i][j] = sum;\r\n            }\r\n        }\r\n        return result;\r\n    }\n\n    function getMatches(regex, input, group) {\r\n        if (group === void 0) { group = 0; }\r\n        var matches = [];\r\n        var m;\r\n        while ((m = regex.exec(input))) {\r\n            matches.push(m[group]);\r\n        }\r\n        return matches;\r\n    }\r\n    function formatCSS(text) {\r\n        function trimLeft(text) {\r\n            return text.replace(/^\\s+/, '');\r\n        }\r\n        function getIndent(depth) {\r\n            if (depth === 0) {\r\n                return '';\r\n            }\r\n            return ' '.repeat(4 * depth);\r\n        }\r\n        if (text.length < 50000) {\r\n            var emptyRuleRegexp = /[^{}]+{\\s*}/;\r\n            while (emptyRuleRegexp.test(text)) {\r\n                text = text.replace(emptyRuleRegexp, '');\r\n            }\r\n        }\r\n        var css = (text\r\n            .replace(/\\s{2,}/g, ' ')\r\n            .replace(/\\{/g, '{\\n')\r\n            .replace(/\\}/g, '\\n}\\n')\r\n            .replace(/\\;(?![^\\(|\\\"]*(\\)|\\\"))/g, ';\\n')\r\n            .replace(/\\,(?![^\\(|\\\"]*(\\)|\\\"))/g, ',\\n')\r\n            .replace(/\\n\\s*\\n/g, '\\n')\r\n            .split('\\n'));\r\n        var depth = 0;\r\n        var formatted = [];\r\n        for (var x = 0, len = css.length; x < len; x++) {\r\n            var line = css[x] + \"\\n\";\r\n            if (line.includes('{')) {\r\n                formatted.push(getIndent(depth++) + trimLeft(line));\r\n            }\r\n            else if (line.includes('\\}')) {\r\n                formatted.push(getIndent(--depth) + trimLeft(line));\r\n            }\r\n            else {\r\n                formatted.push(getIndent(depth) + trimLeft(line));\r\n            }\r\n        }\r\n        return formatted.join('').trim();\r\n    }\r\n    function getParenthesesRange(input, searchStartIndex) {\r\n        if (searchStartIndex === void 0) { searchStartIndex = 0; }\r\n        var length = input.length;\r\n        var depth = 0;\r\n        var firstOpenIndex = -1;\r\n        for (var i = searchStartIndex; i < length; i++) {\r\n            if (depth === 0) {\r\n                var openIndex = input.indexOf('(', i);\r\n                if (openIndex < 0) {\r\n                    break;\r\n                }\r\n                firstOpenIndex = openIndex;\r\n                depth++;\r\n                i = openIndex;\r\n            }\r\n            else {\r\n                var closingIndex = input.indexOf(')', i);\r\n                if (closingIndex < 0) {\r\n                    break;\r\n                }\r\n                var openIndex = input.indexOf('(', i);\r\n                if (openIndex < 0 || closingIndex < openIndex) {\r\n                    depth--;\r\n                    if (depth === 0) {\r\n                        return { start: firstOpenIndex, end: closingIndex + 1 };\r\n                    }\r\n                    i = closingIndex;\r\n                }\r\n                else {\r\n                    depth++;\r\n                    i = openIndex;\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    }\n\n    function createFilterMatrix(config) {\r\n        var m = Matrix.identity();\r\n        if (config.sepia !== 0) {\r\n            m = multiplyMatrices(m, Matrix.sepia(config.sepia / 100));\r\n        }\r\n        if (config.grayscale !== 0) {\r\n            m = multiplyMatrices(m, Matrix.grayscale(config.grayscale / 100));\r\n        }\r\n        if (config.contrast !== 100) {\r\n            m = multiplyMatrices(m, Matrix.contrast(config.contrast / 100));\r\n        }\r\n        if (config.brightness !== 100) {\r\n            m = multiplyMatrices(m, Matrix.brightness(config.brightness / 100));\r\n        }\r\n        if (config.mode === 1) {\r\n            m = multiplyMatrices(m, Matrix.invertNHue());\r\n        }\r\n        return m;\r\n    }\r\n    function applyColorMatrix(_a, matrix) {\r\n        var _b = __read(_a, 3), r = _b[0], g = _b[1], b = _b[2];\r\n        var rgb = [[r / 255], [g / 255], [b / 255], [1], [1]];\r\n        var result = multiplyMatrices(matrix, rgb);\r\n        return [0, 1, 2].map(function (i) { return clamp(Math.round(result[i][0] * 255), 0, 255); });\r\n    }\r\n    var Matrix = {\r\n        identity: function () {\r\n            return [\r\n                [1, 0, 0, 0, 0],\r\n                [0, 1, 0, 0, 0],\r\n                [0, 0, 1, 0, 0],\r\n                [0, 0, 0, 1, 0],\r\n                [0, 0, 0, 0, 1]\r\n            ];\r\n        },\r\n        invertNHue: function () {\r\n            return [\r\n                [0.333, -0.667, -0.667, 0, 1],\r\n                [-0.667, 0.333, -0.667, 0, 1],\r\n                [-0.667, -0.667, 0.333, 0, 1],\r\n                [0, 0, 0, 1, 0],\r\n                [0, 0, 0, 0, 1]\r\n            ];\r\n        },\r\n        brightness: function (v) {\r\n            return [\r\n                [v, 0, 0, 0, 0],\r\n                [0, v, 0, 0, 0],\r\n                [0, 0, v, 0, 0],\r\n                [0, 0, 0, 1, 0],\r\n                [0, 0, 0, 0, 1]\r\n            ];\r\n        },\r\n        contrast: function (v) {\r\n            var t = (1 - v) / 2;\r\n            return [\r\n                [v, 0, 0, 0, t],\r\n                [0, v, 0, 0, t],\r\n                [0, 0, v, 0, t],\r\n                [0, 0, 0, 1, 0],\r\n                [0, 0, 0, 0, 1]\r\n            ];\r\n        },\r\n        sepia: function (v) {\r\n            return [\r\n                [(0.393 + 0.607 * (1 - v)), (0.769 - 0.769 * (1 - v)), (0.189 - 0.189 * (1 - v)), 0, 0],\r\n                [(0.349 - 0.349 * (1 - v)), (0.686 + 0.314 * (1 - v)), (0.168 - 0.168 * (1 - v)), 0, 0],\r\n                [(0.272 - 0.272 * (1 - v)), (0.534 - 0.534 * (1 - v)), (0.131 + 0.869 * (1 - v)), 0, 0],\r\n                [0, 0, 0, 1, 0],\r\n                [0, 0, 0, 0, 1]\r\n            ];\r\n        },\r\n        grayscale: function (v) {\r\n            return [\r\n                [(0.2126 + 0.7874 * (1 - v)), (0.7152 - 0.7152 * (1 - v)), (0.0722 - 0.0722 * (1 - v)), 0, 0],\r\n                [(0.2126 - 0.2126 * (1 - v)), (0.7152 + 0.2848 * (1 - v)), (0.0722 - 0.0722 * (1 - v)), 0, 0],\r\n                [(0.2126 - 0.2126 * (1 - v)), (0.7152 - 0.7152 * (1 - v)), (0.0722 + 0.9278 * (1 - v)), 0, 0],\r\n                [0, 0, 0, 1, 0],\r\n                [0, 0, 0, 0, 1]\r\n            ];\r\n        },\r\n    };\n\n    function getBgPole(theme) {\r\n        var isDarkScheme = theme.mode === 1;\r\n        var prop = isDarkScheme ? 'darkSchemeBackgroundColor' : 'lightSchemeBackgroundColor';\r\n        return theme[prop];\r\n    }\r\n    function getFgPole(theme) {\r\n        var isDarkScheme = theme.mode === 1;\r\n        var prop = isDarkScheme ? 'darkSchemeTextColor' : 'lightSchemeTextColor';\r\n        return theme[prop];\r\n    }\r\n    var colorModificationCache = new Map();\r\n    var colorParseCache$1 = new Map();\r\n    function parseToHSLWithCache(color) {\r\n        if (colorParseCache$1.has(color)) {\r\n            return colorParseCache$1.get(color);\r\n        }\r\n        var rgb = parse(color);\r\n        var hsl = rgbToHSL(rgb);\r\n        colorParseCache$1.set(color, hsl);\r\n        return hsl;\r\n    }\r\n    function clearColorModificationCache() {\r\n        colorModificationCache.clear();\r\n        colorParseCache$1.clear();\r\n    }\r\n    var rgbCacheKeys = ['r', 'g', 'b', 'a'];\r\n    var themeCacheKeys$1 = ['mode', 'brightness', 'contrast', 'grayscale', 'sepia', 'darkSchemeBackgroundColor', 'darkSchemeTextColor', 'lightSchemeBackgroundColor', 'lightSchemeTextColor'];\r\n    function getCacheId(rgb, theme) {\r\n        var resultId = '';\r\n        rgbCacheKeys.forEach(function (key) {\r\n            resultId += rgb[key] + \";\";\r\n        });\r\n        themeCacheKeys$1.forEach(function (key) {\r\n            resultId += theme[key] + \";\";\r\n        });\r\n        return resultId;\r\n    }\r\n    function modifyColorWithCache(rgb, theme, modifyHSL, poleColor, anotherPoleColor) {\r\n        var fnCache;\r\n        if (colorModificationCache.has(modifyHSL)) {\r\n            fnCache = colorModificationCache.get(modifyHSL);\r\n        }\r\n        else {\r\n            fnCache = new Map();\r\n            colorModificationCache.set(modifyHSL, fnCache);\r\n        }\r\n        var id = getCacheId(rgb, theme);\r\n        if (fnCache.has(id)) {\r\n            return fnCache.get(id);\r\n        }\r\n        var hsl = rgbToHSL(rgb);\r\n        var pole = poleColor == null ? null : parseToHSLWithCache(poleColor);\r\n        var anotherPole = anotherPoleColor == null ? null : parseToHSLWithCache(anotherPoleColor);\r\n        var modified = modifyHSL(hsl, pole, anotherPole);\r\n        var _a = hslToRGB(modified), r = _a.r, g = _a.g, b = _a.b, a = _a.a;\r\n        var matrix = createFilterMatrix(theme);\r\n        var _b = __read(applyColorMatrix([r, g, b], matrix), 3), rf = _b[0], gf = _b[1], bf = _b[2];\r\n        var color = (a === 1 ?\r\n            rgbToHexString({ r: rf, g: gf, b: bf }) :\r\n            rgbToString({ r: rf, g: gf, b: bf, a: a }));\r\n        fnCache.set(id, color);\r\n        return color;\r\n    }\r\n    function noopHSL(hsl) {\r\n        return hsl;\r\n    }\r\n    function modifyColor(rgb, theme) {\r\n        return modifyColorWithCache(rgb, theme, noopHSL);\r\n    }\r\n    function modifyLightSchemeColor(rgb, theme) {\r\n        var poleBg = getBgPole(theme);\r\n        var poleFg = getFgPole(theme);\r\n        return modifyColorWithCache(rgb, theme, modifyLightModeHSL, poleFg, poleBg);\r\n    }\r\n    function modifyLightModeHSL(_a, poleFg, poleBg) {\r\n        var h = _a.h, s = _a.s, l = _a.l, a = _a.a;\r\n        var isDark = l < 0.5;\r\n        var isNeutral;\r\n        if (isDark) {\r\n            isNeutral = l < 0.2 || s < 0.12;\r\n        }\r\n        else {\r\n            var isBlue = h > 200 && h < 280;\r\n            isNeutral = s < 0.24 || (l > 0.8 && isBlue);\r\n        }\r\n        var hx = h;\r\n        var sx = l;\r\n        if (isNeutral) {\r\n            if (isDark) {\r\n                hx = poleFg.h;\r\n                sx = poleFg.s;\r\n            }\r\n            else {\r\n                hx = poleBg.h;\r\n                sx = poleBg.s;\r\n            }\r\n        }\r\n        var lx = scale(l, 0, 1, poleFg.l, poleBg.l);\r\n        return { h: hx, s: sx, l: lx, a: a };\r\n    }\r\n    var MAX_BG_LIGHTNESS = 0.4;\r\n    function modifyBgHSL(_a, pole) {\r\n        var h = _a.h, s = _a.s, l = _a.l, a = _a.a;\r\n        var isDark = l < 0.5;\r\n        var isBlue = h > 200 && h < 280;\r\n        var isNeutral = s < 0.12 || (l > 0.8 && isBlue);\r\n        if (isDark) {\r\n            var lx_1 = scale(l, 0, 0.5, 0, MAX_BG_LIGHTNESS);\r\n            if (isNeutral) {\r\n                var hx_1 = pole.h;\r\n                var sx = pole.s;\r\n                return { h: hx_1, s: sx, l: lx_1, a: a };\r\n            }\r\n            return { h: h, s: s, l: lx_1, a: a };\r\n        }\r\n        var lx = scale(l, 0.5, 1, MAX_BG_LIGHTNESS, pole.l);\r\n        if (isNeutral) {\r\n            var hx_2 = pole.h;\r\n            var sx = pole.s;\r\n            return { h: hx_2, s: sx, l: lx, a: a };\r\n        }\r\n        var hx = h;\r\n        var isYellow = h > 60 && h < 180;\r\n        if (isYellow) {\r\n            var isCloserToGreen = h > 120;\r\n            if (isCloserToGreen) {\r\n                hx = scale(h, 120, 180, 135, 180);\r\n            }\r\n            else {\r\n                hx = scale(h, 60, 120, 60, 105);\r\n            }\r\n        }\r\n        return { h: hx, s: s, l: lx, a: a };\r\n    }\r\n    function modifyBackgroundColor(rgb, theme) {\r\n        if (theme.mode === 0) {\r\n            return modifyLightSchemeColor(rgb, theme);\r\n        }\r\n        var pole = getBgPole(theme);\r\n        return modifyColorWithCache(rgb, __assign(__assign({}, theme), { mode: 0 }), modifyBgHSL, pole);\r\n    }\r\n    var MIN_FG_LIGHTNESS = 0.55;\r\n    function modifyBlueFgHue(hue) {\r\n        return scale(hue, 205, 245, 205, 220);\r\n    }\r\n    function modifyFgHSL(_a, pole) {\r\n        var h = _a.h, s = _a.s, l = _a.l, a = _a.a;\r\n        var isLight = l > 0.5;\r\n        var isNeutral = l < 0.2 || s < 0.24;\r\n        var isBlue = !isNeutral && h > 205 && h < 245;\r\n        if (isLight) {\r\n            var lx_2 = scale(l, 0.5, 1, MIN_FG_LIGHTNESS, pole.l);\r\n            if (isNeutral) {\r\n                var hx_3 = pole.h;\r\n                var sx = pole.s;\r\n                return { h: hx_3, s: sx, l: lx_2, a: a };\r\n            }\r\n            var hx_4 = h;\r\n            if (isBlue) {\r\n                hx_4 = modifyBlueFgHue(h);\r\n            }\r\n            return { h: hx_4, s: s, l: lx_2, a: a };\r\n        }\r\n        if (isNeutral) {\r\n            var hx_5 = pole.h;\r\n            var sx = pole.s;\r\n            var lx_3 = scale(l, 0, 0.5, pole.l, MIN_FG_LIGHTNESS);\r\n            return { h: hx_5, s: sx, l: lx_3, a: a };\r\n        }\r\n        var hx = h;\r\n        var lx;\r\n        if (isBlue) {\r\n            hx = modifyBlueFgHue(h);\r\n            lx = scale(l, 0, 0.5, pole.l, Math.min(1, MIN_FG_LIGHTNESS + 0.05));\r\n        }\r\n        else {\r\n            lx = scale(l, 0, 0.5, pole.l, MIN_FG_LIGHTNESS);\r\n        }\r\n        return { h: hx, s: s, l: lx, a: a };\r\n    }\r\n    function modifyForegroundColor(rgb, theme) {\r\n        if (theme.mode === 0) {\r\n            return modifyLightSchemeColor(rgb, theme);\r\n        }\r\n        var pole = getFgPole(theme);\r\n        return modifyColorWithCache(rgb, __assign(__assign({}, theme), { mode: 0 }), modifyFgHSL, pole);\r\n    }\r\n    function modifyBorderHSL(_a, poleFg, poleBg) {\r\n        var h = _a.h, s = _a.s, l = _a.l, a = _a.a;\r\n        var isDark = l < 0.5;\r\n        var isNeutral = l < 0.2 || s < 0.24;\r\n        var hx = h;\r\n        var sx = s;\r\n        if (isNeutral) {\r\n            if (isDark) {\r\n                hx = poleFg.h;\r\n                sx = poleFg.s;\r\n            }\r\n            else {\r\n                hx = poleBg.h;\r\n                sx = poleBg.s;\r\n            }\r\n        }\r\n        var lx = scale(l, 0, 1, 0.5, 0.2);\r\n        return { h: hx, s: sx, l: lx, a: a };\r\n    }\r\n    function modifyBorderColor(rgb, theme) {\r\n        if (theme.mode === 0) {\r\n            return modifyLightSchemeColor(rgb, theme);\r\n        }\r\n        var poleFg = getFgPole(theme);\r\n        var poleBg = getBgPole(theme);\r\n        return modifyColorWithCache(rgb, __assign(__assign({}, theme), { mode: 0 }), modifyBorderHSL, poleFg, poleBg);\r\n    }\r\n    function modifyShadowColor(rgb, filter) {\r\n        return modifyBackgroundColor(rgb, filter);\r\n    }\r\n    function modifyGradientColor(rgb, filter) {\r\n        return modifyBackgroundColor(rgb, filter);\r\n    }\n\n    function createTextStyle(config) {\r\n        var lines = [];\r\n        lines.push('*:not(pre, pre *, code, .far, .fa, .glyphicon, [class*=\"vjs-\"], .fab, .fa-github, .fas, .material-icons, .icofont, .typcn, mu, [class*=\"mu-\"], .glyphicon, .icon) {');\r\n        if (config.useFont && config.fontFamily) {\r\n            lines.push(\"  font-family: \" + config.fontFamily + \" !important;\");\r\n        }\r\n        if (config.textStroke > 0) {\r\n            lines.push(\"  -webkit-text-stroke: \" + config.textStroke + \"px !important;\");\r\n            lines.push(\"  text-stroke: \" + config.textStroke + \"px !important;\");\r\n        }\r\n        lines.push('}');\r\n        return lines.join('\\n');\r\n    }\n\n    var FilterMode;\r\n    (function (FilterMode) {\r\n        FilterMode[FilterMode[\"light\"] = 0] = \"light\";\r\n        FilterMode[FilterMode[\"dark\"] = 1] = \"dark\";\r\n    })(FilterMode || (FilterMode = {}));\r\n    function getCSSFilterValue(config) {\r\n        var filters = [];\r\n        if (config.mode === FilterMode.dark) {\r\n            filters.push('invert(100%) hue-rotate(180deg)');\r\n        }\r\n        if (config.brightness !== 100) {\r\n            filters.push(\"brightness(\" + config.brightness + \"%)\");\r\n        }\r\n        if (config.contrast !== 100) {\r\n            filters.push(\"contrast(\" + config.contrast + \"%)\");\r\n        }\r\n        if (config.grayscale !== 0) {\r\n            filters.push(\"grayscale(\" + config.grayscale + \"%)\");\r\n        }\r\n        if (config.sepia !== 0) {\r\n            filters.push(\"sepia(\" + config.sepia + \"%)\");\r\n        }\r\n        if (filters.length === 0) {\r\n            return null;\r\n        }\r\n        return filters.join(' ');\r\n    }\n\n    function toSVGMatrix(matrix) {\r\n        return matrix.slice(0, 4).map(function (m) { return m.map(function (m) { return m.toFixed(3); }).join(' '); }).join(' ');\r\n    }\r\n    function getSVGFilterMatrixValue(config) {\r\n        return toSVGMatrix(createFilterMatrix(config));\r\n    }\n\n    var counter = 0;\r\n    var resolvers$1 = new Map();\r\n    var rejectors = new Map();\r\n    function bgFetch(request) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2, new Promise(function (resolve, reject) {\r\n                        var id = ++counter;\r\n                        resolvers$1.set(id, resolve);\r\n                        rejectors.set(id, reject);\r\n                        chrome.runtime.sendMessage({ type: MessageType.CS_FETCH, data: request, id: id });\r\n                    })];\r\n            });\r\n        });\r\n    }\r\n    chrome.runtime.onMessage.addListener(function (_a) {\r\n        var type = _a.type, data = _a.data, error = _a.error, id = _a.id;\r\n        if (type === MessageType.BG_FETCH_RESPONSE) {\r\n            var resolve = resolvers$1.get(id);\r\n            var reject = rejectors.get(id);\r\n            resolvers$1.delete(id);\r\n            rejectors.delete(id);\r\n            if (error) {\r\n                reject && reject(error);\r\n            }\r\n            else {\r\n                resolve && resolve(data);\r\n            }\r\n        }\r\n    });\n\n    var AsyncQueue = (function () {\r\n        function AsyncQueue() {\r\n            this.queue = [];\r\n            this.timerId = null;\r\n            this.frameDuration = 1000 / 60;\r\n        }\r\n        AsyncQueue.prototype.addToQueue = function (entry) {\r\n            this.queue.push(entry);\r\n            this.startQueue();\r\n        };\r\n        AsyncQueue.prototype.stopQueue = function () {\r\n            if (this.timerId !== null) {\r\n                cancelAnimationFrame(this.timerId);\r\n                this.timerId = null;\r\n            }\r\n            this.queue = [];\r\n        };\r\n        AsyncQueue.prototype.startQueue = function () {\r\n            var _this = this;\r\n            if (this.timerId) {\r\n                return;\r\n            }\r\n            this.timerId = requestAnimationFrame(function () {\r\n                _this.timerId = null;\r\n                var start = Date.now();\r\n                var cb;\r\n                while ((cb = _this.queue.shift())) {\r\n                    cb();\r\n                    if (Date.now() - start >= _this.frameDuration) {\r\n                        _this.startQueue();\r\n                        break;\r\n                    }\r\n                }\r\n            });\r\n        };\r\n        return AsyncQueue;\r\n    }());\n\n    var imageManager = new AsyncQueue();\r\n    function getImageDetails(url) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                return [2, new Promise(function (resolve, reject) { return __awaiter(_this, void 0, void 0, function () {\r\n                        var dataURL, error_1, image_1, error_2;\r\n                        return __generator(this, function (_a) {\r\n                            switch (_a.label) {\r\n                                case 0:\r\n                                    if (!url.startsWith('data:')) return [3, 1];\r\n                                    dataURL = url;\r\n                                    return [3, 4];\r\n                                case 1:\r\n                                    _a.trys.push([1, 3, , 4]);\r\n                                    return [4, getImageDataURL(url)];\r\n                                case 2:\r\n                                    dataURL = _a.sent();\r\n                                    return [3, 4];\r\n                                case 3:\r\n                                    error_1 = _a.sent();\r\n                                    reject(error_1);\r\n                                    return [2];\r\n                                case 4:\r\n                                    _a.trys.push([4, 6, , 7]);\r\n                                    return [4, urlToImage(dataURL)];\r\n                                case 5:\r\n                                    image_1 = _a.sent();\r\n                                    imageManager.addToQueue(function () {\r\n                                        resolve(__assign({ src: url, dataURL: dataURL, width: image_1.naturalWidth, height: image_1.naturalHeight }, analyzeImage(image_1)));\r\n                                    });\r\n                                    return [3, 7];\r\n                                case 6:\r\n                                    error_2 = _a.sent();\r\n                                    reject(error_2);\r\n                                    return [3, 7];\r\n                                case 7: return [2];\r\n                            }\r\n                        });\r\n                    }); })];\r\n            });\r\n        });\r\n    }\r\n    function getImageDataURL(url) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var parsedURL;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        parsedURL = new URL(url);\r\n                        if (!(parsedURL.origin === location.origin)) return [3, 2];\r\n                        return [4, loadAsDataURL(url)];\r\n                    case 1: return [2, _a.sent()];\r\n                    case 2: return [4, bgFetch({ url: url, responseType: 'data-url' })];\r\n                    case 3: return [2, _a.sent()];\r\n                }\r\n            });\r\n        });\r\n    }\r\n    function urlToImage(url) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2, new Promise(function (resolve, reject) {\r\n                        var image = new Image();\r\n                        image.onload = function () { return resolve(image); };\r\n                        image.onerror = function () { return reject(\"Unable to load image \" + url); };\r\n                        image.src = url;\r\n                    })];\r\n            });\r\n        });\r\n    }\r\n    var MAX_ANALIZE_PIXELS_COUNT = 32 * 32;\r\n    var canvas;\r\n    var context;\r\n    function createCanvas() {\r\n        var maxWidth = MAX_ANALIZE_PIXELS_COUNT;\r\n        var maxHeight = MAX_ANALIZE_PIXELS_COUNT;\r\n        canvas = document.createElement('canvas');\r\n        canvas.width = maxWidth;\r\n        canvas.height = maxHeight;\r\n        context = canvas.getContext('2d');\r\n        context.imageSmoothingEnabled = false;\r\n    }\r\n    function removeCanvas() {\r\n        canvas = null;\r\n        context = null;\r\n    }\r\n    var MAX_IMAGE_SIZE = 5 * 1024 * 1024;\r\n    function analyzeImage(image) {\r\n        if (!canvas) {\r\n            createCanvas();\r\n        }\r\n        var naturalWidth = image.naturalWidth, naturalHeight = image.naturalHeight;\r\n        if (naturalHeight === 0 || naturalWidth === 0) {\r\n            logWarn(\"logWarn(Image is empty \" + image.currentSrc + \")\");\r\n            return null;\r\n        }\r\n        var size = naturalWidth * naturalHeight * 4;\r\n        if (size > MAX_IMAGE_SIZE) {\r\n            logInfo('Skipped large image analyzing(Larger than 5mb in memory)');\r\n            return {\r\n                isDark: false,\r\n                isLight: false,\r\n                isTransparent: false,\r\n                isLarge: false,\r\n                isTooLarge: true,\r\n            };\r\n        }\r\n        var naturalPixelsCount = naturalWidth * naturalHeight;\r\n        var k = Math.min(1, Math.sqrt(MAX_ANALIZE_PIXELS_COUNT / naturalPixelsCount));\r\n        var width = Math.ceil(naturalWidth * k);\r\n        var height = Math.ceil(naturalHeight * k);\r\n        context.clearRect(0, 0, width, height);\r\n        context.drawImage(image, 0, 0, naturalWidth, naturalHeight, 0, 0, width, height);\r\n        var imageData = context.getImageData(0, 0, width, height);\r\n        var d = imageData.data;\r\n        var TRANSPARENT_ALPHA_THRESHOLD = 0.05;\r\n        var DARK_LIGHTNESS_THRESHOLD = 0.4;\r\n        var LIGHT_LIGHTNESS_THRESHOLD = 0.7;\r\n        var transparentPixelsCount = 0;\r\n        var darkPixelsCount = 0;\r\n        var lightPixelsCount = 0;\r\n        var i, x, y;\r\n        var r, g, b, a;\r\n        var l;\r\n        for (y = 0; y < height; y++) {\r\n            for (x = 0; x < width; x++) {\r\n                i = 4 * (y * width + x);\r\n                r = d[i + 0] / 255;\r\n                g = d[i + 1] / 255;\r\n                b = d[i + 2] / 255;\r\n                a = d[i + 3] / 255;\r\n                if (a < TRANSPARENT_ALPHA_THRESHOLD) {\r\n                    transparentPixelsCount++;\r\n                }\r\n                else {\r\n                    l = 0.2126 * r + 0.7152 * g + 0.0722 * b;\r\n                    if (l < DARK_LIGHTNESS_THRESHOLD) {\r\n                        darkPixelsCount++;\r\n                    }\r\n                    if (l > LIGHT_LIGHTNESS_THRESHOLD) {\r\n                        lightPixelsCount++;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        var totalPixelsCount = width * height;\r\n        var opaquePixelsCount = totalPixelsCount - transparentPixelsCount;\r\n        var DARK_IMAGE_THRESHOLD = 0.7;\r\n        var LIGHT_IMAGE_THRESHOLD = 0.7;\r\n        var TRANSPARENT_IMAGE_THRESHOLD = 0.1;\r\n        var LARGE_IMAGE_PIXELS_COUNT = 800 * 600;\r\n        return {\r\n            isDark: ((darkPixelsCount / opaquePixelsCount) >= DARK_IMAGE_THRESHOLD),\r\n            isLight: ((lightPixelsCount / opaquePixelsCount) >= LIGHT_IMAGE_THRESHOLD),\r\n            isTransparent: ((transparentPixelsCount / totalPixelsCount) >= TRANSPARENT_IMAGE_THRESHOLD),\r\n            isLarge: (naturalPixelsCount >= LARGE_IMAGE_PIXELS_COUNT),\r\n            isTooLarge: false,\r\n        };\r\n    }\r\n    function getFilteredImageDataURL(_a, theme) {\r\n        var dataURL = _a.dataURL, width = _a.width, height = _a.height;\r\n        var matrix = getSVGFilterMatrixValue(theme);\r\n        var svg = [\r\n            \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" width=\\\"\" + width + \"\\\" height=\\\"\" + height + \"\\\">\",\r\n            '<defs>',\r\n            '<filter id=\"darkreader-image-filter\">',\r\n            \"<feColorMatrix type=\\\"matrix\\\" values=\\\"\" + matrix + \"\\\" />\",\r\n            '</filter>',\r\n            '</defs>',\r\n            \"<image width=\\\"\" + width + \"\\\" height=\\\"\" + height + \"\\\" filter=\\\"url(#darkreader-image-filter)\\\" xlink:href=\\\"\" + dataURL + \"\\\" />\",\r\n            '</svg>',\r\n        ].join('');\r\n        return \"data:image/svg+xml;base64,\" + btoa(svg);\r\n    }\r\n    function cleanImageProcessingCache() {\r\n        imageManager && imageManager.stopQueue();\r\n        removeCanvas();\r\n    }\n\n    function getPriority(ruleStyle, property) {\r\n        return Boolean(ruleStyle && ruleStyle.getPropertyPriority(property));\r\n    }\r\n    function getModifiableCSSDeclaration(property, value, rule, variablesStore, ignoreImageSelectors, isCancelled) {\r\n        if (property.startsWith('--')) {\r\n            var modifier = getVariableModifier(variablesStore, property, value, rule, ignoreImageSelectors, isCancelled);\r\n            if (modifier) {\r\n                return { property: property, value: modifier, important: getPriority(rule.style, property), sourceValue: value };\r\n            }\r\n        }\r\n        else if (value.includes('var(')) {\r\n            var modifier = getVariableDependantModifier(variablesStore, property, value);\r\n            if (modifier) {\r\n                return { property: property, value: modifier, important: getPriority(rule.style, property), sourceValue: value };\r\n            }\r\n        }\r\n        else if ((property.includes('color') && property !== '-webkit-print-color-adjust') ||\r\n            property === 'fill' ||\r\n            property === 'stroke' ||\r\n            property === 'stop-color') {\r\n            var modifier = getColorModifier(property, value);\r\n            if (modifier) {\r\n                return { property: property, value: modifier, important: getPriority(rule.style, property), sourceValue: value };\r\n            }\r\n        }\r\n        else if (property === 'background-image' || property === 'list-style-image') {\r\n            var modifier = getBgImageModifier(value, rule, ignoreImageSelectors, isCancelled);\r\n            if (modifier) {\r\n                return { property: property, value: modifier, important: getPriority(rule.style, property), sourceValue: value };\r\n            }\r\n        }\r\n        else if (property.includes('shadow')) {\r\n            var modifier = getShadowModifier(value);\r\n            if (modifier) {\r\n                return { property: property, value: modifier, important: getPriority(rule.style, property), sourceValue: value };\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    function getModifiedUserAgentStyle(theme, isIFrame, styleSystemControls) {\r\n        var lines = [];\r\n        if (!isIFrame) {\r\n            lines.push('html {');\r\n            lines.push(\"    background-color: \" + modifyBackgroundColor({ r: 255, g: 255, b: 255 }, theme) + \" !important;\");\r\n            lines.push('}');\r\n        }\r\n        lines.push(\"\" + (isIFrame ? '' : 'html, body, ') + (styleSystemControls ? 'input, textarea, select, button' : '') + \" {\");\r\n        lines.push(\"    background-color: \" + modifyBackgroundColor({ r: 255, g: 255, b: 255 }, theme) + \";\");\r\n        lines.push('}');\r\n        lines.push(\"html, body, \" + (styleSystemControls ? 'input, textarea, select, button' : '') + \" {\");\r\n        lines.push(\"    border-color: \" + modifyBorderColor({ r: 76, g: 76, b: 76 }, theme) + \";\");\r\n        lines.push(\"    color: \" + modifyForegroundColor({ r: 0, g: 0, b: 0 }, theme) + \";\");\r\n        lines.push('}');\r\n        lines.push('a {');\r\n        lines.push(\"    color: \" + modifyForegroundColor({ r: 0, g: 64, b: 255 }, theme) + \";\");\r\n        lines.push('}');\r\n        lines.push('table {');\r\n        lines.push(\"    border-color: \" + modifyBorderColor({ r: 128, g: 128, b: 128 }, theme) + \";\");\r\n        lines.push('}');\r\n        lines.push('::placeholder {');\r\n        lines.push(\"    color: \" + modifyForegroundColor({ r: 169, g: 169, b: 169 }, theme) + \";\");\r\n        lines.push('}');\r\n        lines.push('input:-webkit-autofill,');\r\n        lines.push('textarea:-webkit-autofill,');\r\n        lines.push('select:-webkit-autofill {');\r\n        lines.push(\"    background-color: \" + modifyBackgroundColor({ r: 250, g: 255, b: 189 }, theme) + \" !important;\");\r\n        lines.push(\"    color: \" + modifyForegroundColor({ r: 0, g: 0, b: 0 }, theme) + \" !important;\");\r\n        lines.push('}');\r\n        if (theme.scrollbarColor) {\r\n            lines.push(getModifiedScrollbarStyle(theme));\r\n        }\r\n        if (theme.selectionColor) {\r\n            lines.push(getModifiedSelectionStyle(theme));\r\n        }\r\n        return lines.join('\\n');\r\n    }\r\n    function getSelectionColor(theme) {\r\n        var backgroundColorSelection;\r\n        var foregroundColorSelection;\r\n        if (theme.selectionColor === 'auto') {\r\n            backgroundColorSelection = modifyBackgroundColor({ r: 0, g: 96, b: 212 }, __assign(__assign({}, theme), { grayscale: 0 }));\r\n            foregroundColorSelection = modifyForegroundColor({ r: 255, g: 255, b: 255 }, __assign(__assign({}, theme), { grayscale: 0 }));\r\n        }\r\n        else {\r\n            var rgb = parse(theme.selectionColor);\r\n            var hsl = rgbToHSL(rgb);\r\n            backgroundColorSelection = theme.selectionColor;\r\n            if (hsl.l < 0.5) {\r\n                foregroundColorSelection = '#FFF';\r\n            }\r\n            else {\r\n                foregroundColorSelection = '#000';\r\n            }\r\n        }\r\n        return { backgroundColorSelection: backgroundColorSelection, foregroundColorSelection: foregroundColorSelection };\r\n    }\r\n    function getModifiedSelectionStyle(theme) {\r\n        var lines = [];\r\n        var modifiedSelectionColor = getSelectionColor(theme);\r\n        var backgroundColorSelection = modifiedSelectionColor.backgroundColorSelection;\r\n        var foregroundColorSelection = modifiedSelectionColor.foregroundColorSelection;\r\n        ['::selection', '::-moz-selection'].forEach(function (selection) {\r\n            lines.push(selection + \" {\");\r\n            lines.push(\"    background-color: \" + backgroundColorSelection + \" !important;\");\r\n            lines.push(\"    color: \" + foregroundColorSelection + \" !important;\");\r\n            lines.push('}');\r\n        });\r\n        return lines.join('\\n');\r\n    }\r\n    function getModifiedScrollbarStyle(theme) {\r\n        var lines = [];\r\n        var colorTrack;\r\n        var colorIcons;\r\n        var colorThumb;\r\n        var colorThumbHover;\r\n        var colorThumbActive;\r\n        var colorCorner;\r\n        if (theme.scrollbarColor === 'auto') {\r\n            colorTrack = modifyBackgroundColor({ r: 241, g: 241, b: 241 }, theme);\r\n            colorIcons = modifyForegroundColor({ r: 96, g: 96, b: 96 }, theme);\r\n            colorThumb = modifyBackgroundColor({ r: 176, g: 176, b: 176 }, theme);\r\n            colorThumbHover = modifyBackgroundColor({ r: 144, g: 144, b: 144 }, theme);\r\n            colorThumbActive = modifyBackgroundColor({ r: 96, g: 96, b: 96 }, theme);\r\n            colorCorner = modifyBackgroundColor({ r: 255, g: 255, b: 255 }, theme);\r\n        }\r\n        else {\r\n            var rgb = parse(theme.scrollbarColor);\r\n            var hsl_1 = rgbToHSL(rgb);\r\n            var isLight = hsl_1.l > 0.5;\r\n            var lighten = function (lighter) { return (__assign(__assign({}, hsl_1), { l: clamp(hsl_1.l + lighter, 0, 1) })); };\r\n            var darken = function (darker) { return (__assign(__assign({}, hsl_1), { l: clamp(hsl_1.l - darker, 0, 1) })); };\r\n            colorTrack = hslToString(darken(0.4));\r\n            colorIcons = hslToString(isLight ? darken(0.4) : lighten(0.4));\r\n            colorThumb = hslToString(hsl_1);\r\n            colorThumbHover = hslToString(lighten(0.1));\r\n            colorThumbActive = hslToString(lighten(0.2));\r\n        }\r\n        lines.push('::-webkit-scrollbar {');\r\n        lines.push(\"    background-color: \" + colorTrack + \";\");\r\n        lines.push(\"    color: \" + colorIcons + \";\");\r\n        lines.push('}');\r\n        lines.push('::-webkit-scrollbar-thumb {');\r\n        lines.push(\"    background-color: \" + colorThumb + \";\");\r\n        lines.push('}');\r\n        lines.push('::-webkit-scrollbar-thumb:hover {');\r\n        lines.push(\"    background-color: \" + colorThumbHover + \";\");\r\n        lines.push('}');\r\n        lines.push('::-webkit-scrollbar-thumb:active {');\r\n        lines.push(\"    background-color: \" + colorThumbActive + \";\");\r\n        lines.push('}');\r\n        lines.push('::-webkit-scrollbar-corner {');\r\n        lines.push(\"    background-color: \" + colorCorner + \";\");\r\n        lines.push('}');\r\n        if (isFirefox) {\r\n            lines.push('* {');\r\n            lines.push(\"    scrollbar-color: \" + colorThumb + \" \" + colorTrack + \";\");\r\n            lines.push('}');\r\n        }\r\n        return lines.join('\\n');\r\n    }\r\n    function getModifiedFallbackStyle(filter, _a) {\r\n        var strict = _a.strict;\r\n        var lines = [];\r\n        lines.push(\"html, body, \" + (strict ? 'body :not(iframe):not(div[style^=\"position:absolute;top:0;left:-\"]' : 'body > :not(iframe)') + \" {\");\r\n        lines.push(\"    background-color: \" + modifyBackgroundColor({ r: 255, g: 255, b: 255 }, filter) + \" !important;\");\r\n        lines.push(\"    border-color: \" + modifyBorderColor({ r: 64, g: 64, b: 64 }, filter) + \" !important;\");\r\n        lines.push(\"    color: \" + modifyForegroundColor({ r: 0, g: 0, b: 0 }, filter) + \" !important;\");\r\n        lines.push('}');\r\n        return lines.join('\\n');\r\n    }\r\n    var unparsableColors = new Set([\r\n        'inherit',\r\n        'transparent',\r\n        'initial',\r\n        'currentcolor',\r\n        'none',\r\n        'unset',\r\n    ]);\r\n    var colorParseCache = new Map();\r\n    function parseColorWithCache($color) {\r\n        $color = $color.trim();\r\n        if (colorParseCache.has($color)) {\r\n            return colorParseCache.get($color);\r\n        }\r\n        if ($color.includes('calc(')) {\r\n            $color = lowerCalcExpression($color);\r\n        }\r\n        var color = parse($color);\r\n        colorParseCache.set($color, color);\r\n        return color;\r\n    }\r\n    function tryParseColor($color) {\r\n        try {\r\n            return parseColorWithCache($color);\r\n        }\r\n        catch (err) {\r\n            return null;\r\n        }\r\n    }\r\n    function getColorModifier(prop, value) {\r\n        if (unparsableColors.has(value.toLowerCase())) {\r\n            return value;\r\n        }\r\n        try {\r\n            var rgb_1 = parseColorWithCache(value);\r\n            if (prop.includes('background')) {\r\n                return function (filter) { return modifyBackgroundColor(rgb_1, filter); };\r\n            }\r\n            if (prop.includes('border') || prop.includes('outline')) {\r\n                return function (filter) { return modifyBorderColor(rgb_1, filter); };\r\n            }\r\n            return function (filter) { return modifyForegroundColor(rgb_1, filter); };\r\n        }\r\n        catch (err) {\r\n            logWarn('Color parse error', err);\r\n            return null;\r\n        }\r\n    }\r\n    var gradientRegex = /[\\-a-z]+gradient\\(([^\\(\\)]*(\\(([^\\(\\)]*(\\(.*?\\)))*[^\\(\\)]*\\))){0,15}[^\\(\\)]*\\)/g;\r\n    var imageDetailsCache = new Map();\r\n    var awaitingForImageLoading = new Map();\r\n    function shouldIgnoreImage(selectorText, selectors) {\r\n        if (!selectorText || selectors.length === 0) {\r\n            return false;\r\n        }\r\n        if (selectors.some(function (s) { return s === '*'; })) {\r\n            return true;\r\n        }\r\n        var ruleSelectors = selectorText.split(/,\\s*/g);\r\n        var _loop_1 = function (i) {\r\n            var ignoredSelector = selectors[i];\r\n            if (ruleSelectors.some(function (s) { return s === ignoredSelector; })) {\r\n                return { value: true };\r\n            }\r\n        };\r\n        for (var i = 0; i < selectors.length; i++) {\r\n            var state_1 = _loop_1(i);\r\n            if (typeof state_1 === \"object\")\r\n                return state_1.value;\r\n        }\r\n        return false;\r\n    }\r\n    function getBgImageModifier(value, rule, ignoreImageSelectors, isCancelled) {\r\n        var _this = this;\r\n        try {\r\n            var gradients = getMatches(gradientRegex, value);\r\n            var urls = getMatches(cssURLRegex, value);\r\n            if (urls.length === 0 && gradients.length === 0) {\r\n                return value;\r\n            }\r\n            var getIndices = function (matches) {\r\n                var index = 0;\r\n                return matches.map(function (match) {\r\n                    var valueIndex = value.indexOf(match, index);\r\n                    index = valueIndex + match.length;\r\n                    return { match: match, index: valueIndex };\r\n                });\r\n            };\r\n            var matches_1 = getIndices(urls).map(function (i) { return (__assign({ type: 'url' }, i)); })\r\n                .concat(getIndices(gradients).map(function (i) { return (__assign({ type: 'gradient' }, i)); }))\r\n                .sort(function (a, b) { return a.index - b.index; });\r\n            var getGradientModifier_1 = function (gradient) {\r\n                var match = gradient.match(/^(.*-gradient)\\((.*)\\)$/);\r\n                var type = match[1];\r\n                var content = match[2];\r\n                var partsRegex = /([^\\(\\),]+(\\([^\\(\\)]*(\\([^\\(\\)]*\\)*[^\\(\\)]*)?\\))?[^\\(\\),]*),?/g;\r\n                var colorStopRegex = /^(from|color-stop|to)\\(([^\\(\\)]*?,\\s*)?(.*?)\\)$/;\r\n                var parts = getMatches(partsRegex, content, 1).map(function (part) {\r\n                    part = part.trim();\r\n                    var rgb = tryParseColor(part);\r\n                    if (rgb) {\r\n                        return function (filter) { return modifyGradientColor(rgb, filter); };\r\n                    }\r\n                    var space = part.lastIndexOf(' ');\r\n                    rgb = tryParseColor(part.substring(0, space));\r\n                    if (rgb) {\r\n                        return function (filter) { return modifyGradientColor(rgb, filter) + \" \" + part.substring(space + 1); };\r\n                    }\r\n                    var colorStopMatch = part.match(colorStopRegex);\r\n                    if (colorStopMatch) {\r\n                        rgb = tryParseColor(colorStopMatch[3]);\r\n                        if (rgb) {\r\n                            return function (filter) { return colorStopMatch[1] + \"(\" + (colorStopMatch[2] ? colorStopMatch[2] + \", \" : '') + modifyGradientColor(rgb, filter) + \")\"; };\r\n                        }\r\n                    }\r\n                    return function () { return part; };\r\n                });\r\n                return function (filter) {\r\n                    return type + \"(\" + parts.map(function (modify) { return modify(filter); }).join(', ') + \")\";\r\n                };\r\n            };\r\n            var getURLModifier_1 = function (urlValue) {\r\n                var _a;\r\n                if (shouldIgnoreImage(rule.selectorText, ignoreImageSelectors)) {\r\n                    return null;\r\n                }\r\n                var url = getCSSURLValue(urlValue);\r\n                var parentStyleSheet = rule.parentStyleSheet;\r\n                var baseURL = (parentStyleSheet && parentStyleSheet.href) ?\r\n                    getCSSBaseBath(parentStyleSheet.href) :\r\n                    ((_a = parentStyleSheet.ownerNode) === null || _a === void 0 ? void 0 : _a.baseURI) || location.origin;\r\n                url = getAbsoluteURL(baseURL, url);\r\n                var absoluteValue = \"url(\\\"\" + url + \"\\\")\";\r\n                return function (filter) { return __awaiter(_this, void 0, void 0, function () {\r\n                    var imageDetails, awaiters_1, err_1, bgImageValue;\r\n                    return __generator(this, function (_a) {\r\n                        switch (_a.label) {\r\n                            case 0:\r\n                                if (!imageDetailsCache.has(url)) return [3, 1];\r\n                                imageDetails = imageDetailsCache.get(url);\r\n                                return [3, 7];\r\n                            case 1:\r\n                                _a.trys.push([1, 6, , 7]);\r\n                                if (!awaitingForImageLoading.has(url)) return [3, 3];\r\n                                awaiters_1 = awaitingForImageLoading.get(url);\r\n                                return [4, new Promise(function (resolve) { return awaiters_1.push(resolve); })];\r\n                            case 2:\r\n                                imageDetails = _a.sent();\r\n                                if (!imageDetails) {\r\n                                    return [2, null];\r\n                                }\r\n                                return [3, 5];\r\n                            case 3:\r\n                                awaitingForImageLoading.set(url, []);\r\n                                return [4, getImageDetails(url)];\r\n                            case 4:\r\n                                imageDetails = _a.sent();\r\n                                imageDetailsCache.set(url, imageDetails);\r\n                                awaitingForImageLoading.get(url).forEach(function (resolve) { return resolve(imageDetails); });\r\n                                awaitingForImageLoading.delete(url);\r\n                                _a.label = 5;\r\n                            case 5:\r\n                                if (isCancelled()) {\r\n                                    return [2, null];\r\n                                }\r\n                                return [3, 7];\r\n                            case 6:\r\n                                err_1 = _a.sent();\r\n                                logWarn(err_1);\r\n                                if (awaitingForImageLoading.has(url)) {\r\n                                    awaitingForImageLoading.get(url).forEach(function (resolve) { return resolve(null); });\r\n                                    awaitingForImageLoading.delete(url);\r\n                                }\r\n                                return [2, absoluteValue];\r\n                            case 7:\r\n                                bgImageValue = getBgImageValue_1(imageDetails, filter) || absoluteValue;\r\n                                return [2, bgImageValue];\r\n                        }\r\n                    });\r\n                }); };\r\n            };\r\n            var getBgImageValue_1 = function (imageDetails, filter) {\r\n                var isDark = imageDetails.isDark, isLight = imageDetails.isLight, isTransparent = imageDetails.isTransparent, isLarge = imageDetails.isLarge, isTooLarge = imageDetails.isTooLarge, width = imageDetails.width;\r\n                var result;\r\n                if (isTooLarge) {\r\n                    result = \"url(\\\"\" + imageDetails.src + \"\\\")\";\r\n                }\r\n                else if (isDark && isTransparent && filter.mode === 1 && !isLarge && width > 2) {\r\n                    logInfo(\"Inverting dark image \" + imageDetails.src);\r\n                    var inverted = getFilteredImageDataURL(imageDetails, __assign(__assign({}, filter), { sepia: clamp(filter.sepia + 10, 0, 100) }));\r\n                    result = \"url(\\\"\" + inverted + \"\\\")\";\r\n                }\r\n                else if (isLight && !isTransparent && filter.mode === 1) {\r\n                    if (isLarge) {\r\n                        result = 'none';\r\n                    }\r\n                    else {\r\n                        logInfo(\"Dimming light image \" + imageDetails.src);\r\n                        var dimmed = getFilteredImageDataURL(imageDetails, filter);\r\n                        result = \"url(\\\"\" + dimmed + \"\\\")\";\r\n                    }\r\n                }\r\n                else if (filter.mode === 0 && isLight && !isLarge) {\r\n                    logInfo(\"Applying filter to image \" + imageDetails.src);\r\n                    var filtered = getFilteredImageDataURL(imageDetails, __assign(__assign({}, filter), { brightness: clamp(filter.brightness - 10, 5, 200), sepia: clamp(filter.sepia + 10, 0, 100) }));\r\n                    result = \"url(\\\"\" + filtered + \"\\\")\";\r\n                }\r\n                else {\r\n                    result = null;\r\n                }\r\n                return result;\r\n            };\r\n            var modifiers_1 = [];\r\n            var index_1 = 0;\r\n            matches_1.forEach(function (_a, i) {\r\n                var match = _a.match, type = _a.type, matchStart = _a.index;\r\n                var prefixStart = index_1;\r\n                var matchEnd = matchStart + match.length;\r\n                index_1 = matchEnd;\r\n                modifiers_1.push(function () { return value.substring(prefixStart, matchStart); });\r\n                modifiers_1.push(type === 'url' ? getURLModifier_1(match) : getGradientModifier_1(match));\r\n                if (i === matches_1.length - 1) {\r\n                    modifiers_1.push(function () { return value.substring(matchEnd); });\r\n                }\r\n            });\r\n            return function (filter) {\r\n                var results = modifiers_1.filter(Boolean).map(function (modify) { return modify(filter); });\r\n                if (results.some(function (r) { return r instanceof Promise; })) {\r\n                    return Promise.all(results)\r\n                        .then(function (asyncResults) {\r\n                        return asyncResults.join('');\r\n                    });\r\n                }\r\n                return results.join('');\r\n            };\r\n        }\r\n        catch (err) {\r\n            logWarn(\"Unable to parse gradient \" + value, err);\r\n            return null;\r\n        }\r\n    }\r\n    function getShadowModifierWithInfo(value) {\r\n        try {\r\n            var index_2 = 0;\r\n            var colorMatches_1 = getMatches(/(^|\\s)(?!calc)([a-z]+\\(.+?\\)|#[0-9a-f]+|[a-z]+)(.*?(inset|outset)?($|,))/ig, value, 2);\r\n            var notParsed_1 = 0;\r\n            var modifiers_2 = colorMatches_1.map(function (match, i) {\r\n                var prefixIndex = index_2;\r\n                var matchIndex = value.indexOf(match, index_2);\r\n                var matchEnd = matchIndex + match.length;\r\n                index_2 = matchEnd;\r\n                var rgb = tryParseColor(match);\r\n                if (!rgb) {\r\n                    notParsed_1++;\r\n                    return function () { return value.substring(prefixIndex, matchEnd); };\r\n                }\r\n                return function (filter) { return \"\" + value.substring(prefixIndex, matchIndex) + modifyShadowColor(rgb, filter) + (i === colorMatches_1.length - 1 ? value.substring(matchEnd) : ''); };\r\n            });\r\n            return function (filter) {\r\n                var modified = modifiers_2.map(function (modify) { return modify(filter); }).join('');\r\n                return {\r\n                    matchesLength: colorMatches_1.length,\r\n                    unparseableMatchesLength: notParsed_1,\r\n                    result: modified,\r\n                };\r\n            };\r\n        }\r\n        catch (err) {\r\n            logWarn(\"Unable to parse shadow \" + value, err);\r\n            return null;\r\n        }\r\n    }\r\n    function getShadowModifier(value) {\r\n        var shadowModifier = getShadowModifierWithInfo(value);\r\n        if (!shadowModifier) {\r\n            return null;\r\n        }\r\n        return function (theme) { return shadowModifier(theme).result; };\r\n    }\r\n    function getVariableModifier(variablesStore, prop, value, rule, ignoredImgSelectors, isCancelled) {\r\n        return variablesStore.getModifierForVariable({\r\n            varName: prop,\r\n            sourceValue: value,\r\n            rule: rule,\r\n            ignoredImgSelectors: ignoredImgSelectors,\r\n            isCancelled: isCancelled,\r\n        });\r\n    }\r\n    function getVariableDependantModifier(variablesStore, prop, value) {\r\n        return variablesStore.getModifierForVarDependant(prop, value);\r\n    }\r\n    function cleanModificationCache() {\r\n        colorParseCache.clear();\r\n        clearColorModificationCache();\r\n        imageDetailsCache.clear();\r\n        cleanImageProcessingCache();\r\n        awaitingForImageLoading.clear();\r\n    }\n\n    var VAR_TYPE_BGCOLOR = 1 << 0;\r\n    var VAR_TYPE_TEXTCOLOR = 1 << 1;\r\n    var VAR_TYPE_BORDERCOLOR = 1 << 2;\r\n    var VAR_TYPE_BGIMG = 1 << 3;\r\n    var VariablesStore = (function () {\r\n        function VariablesStore() {\r\n            this.varTypes = new Map();\r\n            this.rulesQueue = [];\r\n            this.definedVars = new Set();\r\n            this.varRefs = new Map();\r\n            this.unknownColorVars = new Set();\r\n            this.unknownBgVars = new Set();\r\n            this.undefinedVars = new Set();\r\n            this.initialVarTypes = new Map();\r\n            this.changedTypeVars = new Set();\r\n            this.typeChangeSubscriptions = new Map();\r\n            this.unstableVarValues = new Map();\r\n        }\r\n        VariablesStore.prototype.clear = function () {\r\n            this.varTypes.clear();\r\n            this.rulesQueue.splice(0);\r\n            this.definedVars.clear();\r\n            this.varRefs.clear();\r\n            this.unknownColorVars.clear();\r\n            this.unknownBgVars.clear();\r\n            this.undefinedVars.clear();\r\n            this.initialVarTypes.clear();\r\n            this.changedTypeVars.clear();\r\n            this.typeChangeSubscriptions.clear();\r\n            this.unstableVarValues.clear();\r\n        };\r\n        VariablesStore.prototype.isVarType = function (varName, typeNum) {\r\n            return (this.varTypes.has(varName) &&\r\n                (this.varTypes.get(varName) & typeNum) > 0);\r\n        };\r\n        VariablesStore.prototype.addRulesForMatching = function (rules) {\r\n            this.rulesQueue.push(rules);\r\n        };\r\n        VariablesStore.prototype.matchVariablesAndDependants = function () {\r\n            var _this = this;\r\n            this.changedTypeVars.clear();\r\n            this.initialVarTypes = new Map(this.varTypes);\r\n            this.collectRootVariables();\r\n            this.collectVariablesAndVarDep(this.rulesQueue);\r\n            this.rulesQueue.splice(0);\r\n            this.collectRootVarDependants();\r\n            this.varRefs.forEach(function (refs, v) {\r\n                refs.forEach(function (r) {\r\n                    if (_this.varTypes.has(v)) {\r\n                        _this.resolveVariableType(r, _this.varTypes.get(v));\r\n                    }\r\n                });\r\n            });\r\n            this.unknownColorVars.forEach(function (v) {\r\n                if (_this.unknownBgVars.has(v)) {\r\n                    _this.unknownColorVars.delete(v);\r\n                    _this.unknownBgVars.delete(v);\r\n                    _this.resolveVariableType(v, VAR_TYPE_BGCOLOR);\r\n                }\r\n                else if (_this.isVarType(v, VAR_TYPE_BGCOLOR | VAR_TYPE_TEXTCOLOR | VAR_TYPE_BORDERCOLOR)) {\r\n                    _this.unknownColorVars.delete(v);\r\n                }\r\n                else {\r\n                    _this.undefinedVars.add(v);\r\n                }\r\n            });\r\n            this.unknownBgVars.forEach(function (v) {\r\n                var hasColor = _this.findVarRef(v, function (ref) {\r\n                    return (_this.unknownColorVars.has(ref) ||\r\n                        _this.isVarType(ref, VAR_TYPE_TEXTCOLOR | VAR_TYPE_BORDERCOLOR));\r\n                }) != null;\r\n                if (hasColor) {\r\n                    _this.itarateVarRefs(v, function (ref) {\r\n                        _this.resolveVariableType(ref, VAR_TYPE_BGCOLOR);\r\n                    });\r\n                }\r\n                else if (_this.isVarType(v, VAR_TYPE_BGCOLOR | VAR_TYPE_BGIMG)) {\r\n                    _this.unknownBgVars.delete(v);\r\n                }\r\n                else {\r\n                    _this.undefinedVars.add(v);\r\n                }\r\n            });\r\n            this.changedTypeVars.forEach(function (varName) {\r\n                if (_this.typeChangeSubscriptions.has(varName)) {\r\n                    _this.typeChangeSubscriptions\r\n                        .get(varName)\r\n                        .forEach(function (callback) {\r\n                        callback();\r\n                    });\r\n                }\r\n            });\r\n            this.changedTypeVars.clear();\r\n        };\r\n        VariablesStore.prototype.getModifierForVariable = function (options) {\r\n            var _this = this;\r\n            return function (theme) {\r\n                var varName = options.varName, sourceValue = options.sourceValue, rule = options.rule, ignoredImgSelectors = options.ignoredImgSelectors, isCancelled = options.isCancelled;\r\n                var getDeclarations = function () {\r\n                    var declarations = [];\r\n                    var addModifiedValue = function (typeNum, varNameWrapper, colorModifier) {\r\n                        if (!_this.isVarType(varName, typeNum)) {\r\n                            return;\r\n                        }\r\n                        var property = varNameWrapper(varName);\r\n                        var modifiedValue;\r\n                        if (isVarDependant(sourceValue)) {\r\n                            if (isConstructedColorVar(sourceValue)) {\r\n                                var value = insertVarValues(sourceValue, _this.unstableVarValues);\r\n                                if (!value) {\r\n                                    value = typeNum === VAR_TYPE_BGCOLOR ? '#ffffff' : '#000000';\r\n                                }\r\n                                modifiedValue = colorModifier(value, theme);\r\n                            }\r\n                            else {\r\n                                modifiedValue = replaceCSSVariablesNames(sourceValue, function (v) { return varNameWrapper(v); }, function (fallback) { return colorModifier(fallback, theme); });\r\n                            }\r\n                        }\r\n                        else {\r\n                            modifiedValue = colorModifier(sourceValue, theme);\r\n                        }\r\n                        declarations.push({\r\n                            property: property,\r\n                            value: modifiedValue,\r\n                        });\r\n                    };\r\n                    addModifiedValue(VAR_TYPE_BGCOLOR, wrapBgColorVariableName, tryModifyBgColor);\r\n                    addModifiedValue(VAR_TYPE_TEXTCOLOR, wrapTextColorVariableName, tryModifyTextColor);\r\n                    addModifiedValue(VAR_TYPE_BORDERCOLOR, wrapBorderColorVariableName, tryModifyBorderColor);\r\n                    if (_this.isVarType(varName, VAR_TYPE_BGIMG)) {\r\n                        var property = wrapBgImgVariableName(varName);\r\n                        var modifiedValue = sourceValue;\r\n                        if (isVarDependant(sourceValue)) {\r\n                            modifiedValue = replaceCSSVariablesNames(sourceValue, function (v) { return wrapBgColorVariableName(v); }, function (fallback) { return tryModifyBgColor(fallback, theme); });\r\n                        }\r\n                        var bgModifier = getBgImageModifier(modifiedValue, rule, ignoredImgSelectors, isCancelled);\r\n                        modifiedValue = typeof bgModifier === 'function' ? bgModifier(theme) : bgModifier;\r\n                        declarations.push({\r\n                            property: property,\r\n                            value: modifiedValue,\r\n                        });\r\n                    }\r\n                    return declarations;\r\n                };\r\n                var callbacks = new Set();\r\n                var addListener = function (onTypeChange) {\r\n                    var callback = function () {\r\n                        var decs = getDeclarations();\r\n                        onTypeChange(decs);\r\n                    };\r\n                    callbacks.add(callback);\r\n                    _this.subscribeForVarTypeChange(varName, callback);\r\n                };\r\n                var removeListeners = function () {\r\n                    callbacks.forEach(function (callback) {\r\n                        _this.unsubscribeFromVariableTypeChanges(varName, callback);\r\n                    });\r\n                };\r\n                return {\r\n                    declarations: getDeclarations(),\r\n                    onTypeChange: { addListener: addListener, removeListeners: removeListeners },\r\n                };\r\n            };\r\n        };\r\n        VariablesStore.prototype.getModifierForVarDependant = function (property, sourceValue) {\r\n            var _this = this;\r\n            if (sourceValue.match(/^\\s*(rgb|hsl)a?\\(/)) {\r\n                var isBg_1 = property.startsWith('background');\r\n                var isText_1 = (property === 'color' || property === 'caret-color');\r\n                return function (theme) {\r\n                    var value = insertVarValues(sourceValue, _this.unstableVarValues);\r\n                    if (!value) {\r\n                        value = isBg_1 ? '#ffffff' : '#000000';\r\n                    }\r\n                    var modifier = isBg_1 ? tryModifyBgColor : isText_1 ? tryModifyTextColor : tryModifyBorderColor;\r\n                    return modifier(value, theme);\r\n                };\r\n            }\r\n            if (property === 'background-color') {\r\n                return function (theme) {\r\n                    return replaceCSSVariablesNames(sourceValue, function (v) { return wrapBgColorVariableName(v); }, function (fallback) { return tryModifyBgColor(fallback, theme); });\r\n                };\r\n            }\r\n            if (property === 'color' || property === 'caret-color') {\r\n                return function (theme) {\r\n                    return replaceCSSVariablesNames(sourceValue, function (v) { return wrapTextColorVariableName(v); }, function (fallback) { return tryModifyTextColor(fallback, theme); });\r\n                };\r\n            }\r\n            if (property === 'background' || property === 'background-image' || property === 'box-shadow') {\r\n                return function (theme) {\r\n                    var unknownVars = new Set();\r\n                    var modify = function () {\r\n                        var variableReplaced = replaceCSSVariablesNames(sourceValue, function (v) {\r\n                            if (_this.isVarType(v, VAR_TYPE_BGCOLOR)) {\r\n                                return wrapBgColorVariableName(v);\r\n                            }\r\n                            if (_this.isVarType(v, VAR_TYPE_BGIMG)) {\r\n                                return wrapBgImgVariableName(v);\r\n                            }\r\n                            unknownVars.add(v);\r\n                            return v;\r\n                        }, function (fallback) { return tryModifyBgColor(fallback, theme); });\r\n                        if (property === 'box-shadow') {\r\n                            var shadowModifier = getShadowModifierWithInfo(variableReplaced);\r\n                            var modifiedShadow = shadowModifier(theme);\r\n                            if (modifiedShadow.unparseableMatchesLength !== modifiedShadow.matchesLength) {\r\n                                return modifiedShadow.result;\r\n                            }\r\n                        }\r\n                        return variableReplaced;\r\n                    };\r\n                    var modified = modify();\r\n                    if (unknownVars.size > 0) {\r\n                        return new Promise(function (resolve) {\r\n                            var firstUnknownVar = unknownVars.values().next().value;\r\n                            var callback = function () {\r\n                                _this.unsubscribeFromVariableTypeChanges(firstUnknownVar, callback);\r\n                                var newValue = modify();\r\n                                resolve(newValue);\r\n                            };\r\n                            _this.subscribeForVarTypeChange(firstUnknownVar, callback);\r\n                        });\r\n                    }\r\n                    return modified;\r\n                };\r\n            }\r\n            if (property.startsWith('border') || property.startsWith('outline')) {\r\n                if (sourceValue.endsWith(')')) {\r\n                    var colorTypeMatch = sourceValue.match(/((rgb|hsl)a?)\\(/);\r\n                    if (colorTypeMatch) {\r\n                        var index_1 = colorTypeMatch.index;\r\n                        return function (theme) {\r\n                            var value = insertVarValues(sourceValue, _this.unstableVarValues);\r\n                            if (!value) {\r\n                                return sourceValue;\r\n                            }\r\n                            var beginning = sourceValue.substring(0, index_1);\r\n                            var color = sourceValue.substring(index_1, sourceValue.length);\r\n                            var inserted = insertVarValues(color, _this.unstableVarValues);\r\n                            var modified = tryModifyBorderColor(inserted, theme);\r\n                            return \"\" + beginning + modified;\r\n                        };\r\n                    }\r\n                }\r\n                return function (theme) {\r\n                    return replaceCSSVariablesNames(sourceValue, function (v) { return wrapBorderColorVariableName(v); }, function (fallback) { return tryModifyTextColor(fallback, theme); });\r\n                };\r\n            }\r\n            return null;\r\n        };\r\n        VariablesStore.prototype.subscribeForVarTypeChange = function (varName, callback) {\r\n            if (!this.typeChangeSubscriptions.has(varName)) {\r\n                this.typeChangeSubscriptions.set(varName, new Set());\r\n            }\r\n            var rootStore = this.typeChangeSubscriptions.get(varName);\r\n            if (!rootStore.has(callback)) {\r\n                rootStore.add(callback);\r\n            }\r\n        };\r\n        VariablesStore.prototype.unsubscribeFromVariableTypeChanges = function (varName, callback) {\r\n            if (this.typeChangeSubscriptions.has(varName)) {\r\n                this.typeChangeSubscriptions.get(varName).delete(callback);\r\n            }\r\n        };\r\n        VariablesStore.prototype.collectVariablesAndVarDep = function (ruleList) {\r\n            var _this = this;\r\n            ruleList.forEach(function (rules) {\r\n                iterateCSSRules(rules, function (rule) {\r\n                    rule.style && iterateCSSDeclarations(rule.style, function (property, value) {\r\n                        if (isVariable(property)) {\r\n                            _this.inspectVariable(property, value);\r\n                        }\r\n                        if (isVarDependant(value)) {\r\n                            _this.inspectVarDependant(property, value);\r\n                        }\r\n                    });\r\n                });\r\n            });\r\n        };\r\n        VariablesStore.prototype.collectRootVariables = function () {\r\n            var _this = this;\r\n            iterateCSSDeclarations(document.documentElement.style, function (property, value) {\r\n                if (isVariable(property)) {\r\n                    _this.inspectVariable(property, value);\r\n                }\r\n            });\r\n        };\r\n        VariablesStore.prototype.inspectVariable = function (varName, value) {\r\n            this.unstableVarValues.set(varName, value);\r\n            if (isVarDependant(value) && isConstructedColorVar(value)) {\r\n                this.unknownColorVars.add(varName);\r\n                this.definedVars.add(varName);\r\n            }\r\n            if (this.definedVars.has(varName)) {\r\n                return;\r\n            }\r\n            this.definedVars.add(varName);\r\n            var color = tryParseColor(value);\r\n            if (color) {\r\n                this.unknownColorVars.add(varName);\r\n            }\r\n            else if (value.includes('url(') ||\r\n                value.includes('linear-gradient(') ||\r\n                value.includes('radial-gradient(')) {\r\n                this.resolveVariableType(varName, VAR_TYPE_BGIMG);\r\n            }\r\n        };\r\n        VariablesStore.prototype.resolveVariableType = function (varName, typeNum) {\r\n            var initialType = this.initialVarTypes.get(varName) || 0;\r\n            var currentType = this.varTypes.get(varName) || 0;\r\n            var newType = currentType | typeNum;\r\n            this.varTypes.set(varName, newType);\r\n            if (newType !== initialType || this.undefinedVars.has(varName)) {\r\n                this.changedTypeVars.add(varName);\r\n                this.undefinedVars.delete(varName);\r\n            }\r\n            this.unknownColorVars.delete(varName);\r\n            this.unknownBgVars.delete(varName);\r\n        };\r\n        VariablesStore.prototype.collectRootVarDependants = function () {\r\n            var _this = this;\r\n            iterateCSSDeclarations(document.documentElement.style, function (property, value) {\r\n                if (isVarDependant(value)) {\r\n                    _this.inspectVarDependant(property, value);\r\n                }\r\n            });\r\n        };\r\n        VariablesStore.prototype.inspectVarDependant = function (property, value) {\r\n            var _this = this;\r\n            if (isVariable(property)) {\r\n                this.iterateVarDeps(value, function (ref) {\r\n                    if (!_this.varRefs.has(property)) {\r\n                        _this.varRefs.set(property, new Set());\r\n                    }\r\n                    _this.varRefs.get(property).add(ref);\r\n                });\r\n            }\r\n            else if (property === 'background-color' || property === 'box-shadow') {\r\n                this.iterateVarDeps(value, function (v) { return _this.resolveVariableType(v, VAR_TYPE_BGCOLOR); });\r\n            }\r\n            else if (property === 'color' || property === 'caret-color') {\r\n                this.iterateVarDeps(value, function (v) { return _this.resolveVariableType(v, VAR_TYPE_TEXTCOLOR); });\r\n            }\r\n            else if (property.startsWith('border') || property.startsWith('outline')) {\r\n                this.iterateVarDeps(value, function (v) { return _this.resolveVariableType(v, VAR_TYPE_BORDERCOLOR); });\r\n            }\r\n            else if (property === 'background' || property === 'background-image') {\r\n                this.iterateVarDeps(value, function (v) {\r\n                    if (_this.isVarType(v, VAR_TYPE_BGCOLOR | VAR_TYPE_BGIMG)) {\r\n                        return;\r\n                    }\r\n                    var isBgColor = _this.findVarRef(v, function (ref) {\r\n                        return (_this.unknownColorVars.has(ref) ||\r\n                            _this.isVarType(ref, VAR_TYPE_TEXTCOLOR | VAR_TYPE_BORDERCOLOR));\r\n                    }) != null;\r\n                    _this.itarateVarRefs(v, function (ref) {\r\n                        if (isBgColor) {\r\n                            _this.resolveVariableType(ref, VAR_TYPE_BGCOLOR);\r\n                        }\r\n                        else {\r\n                            _this.unknownBgVars.add(ref);\r\n                        }\r\n                    });\r\n                });\r\n            }\r\n        };\r\n        VariablesStore.prototype.iterateVarDeps = function (value, iterator) {\r\n            var varDeps = new Set();\r\n            iterateVarDependencies(value, function (v) { return varDeps.add(v); });\r\n            varDeps.forEach(function (v) { return iterator(v); });\r\n        };\r\n        VariablesStore.prototype.findVarRef = function (varName, iterator, stack) {\r\n            var e_1, _a;\r\n            if (stack === void 0) { stack = new Set(); }\r\n            if (stack.has(varName)) {\r\n                return null;\r\n            }\r\n            stack.add(varName);\r\n            var result = iterator(varName);\r\n            if (result) {\r\n                return varName;\r\n            }\r\n            var refs = this.varRefs.get(varName);\r\n            if (!refs || refs.size === 0) {\r\n                return null;\r\n            }\r\n            try {\r\n                for (var refs_1 = __values(refs), refs_1_1 = refs_1.next(); !refs_1_1.done; refs_1_1 = refs_1.next()) {\r\n                    var ref = refs_1_1.value;\r\n                    var found = this.findVarRef(ref, iterator, stack);\r\n                    if (found) {\r\n                        return found;\r\n                    }\r\n                }\r\n            }\r\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n            finally {\r\n                try {\r\n                    if (refs_1_1 && !refs_1_1.done && (_a = refs_1.return)) _a.call(refs_1);\r\n                }\r\n                finally { if (e_1) throw e_1.error; }\r\n            }\r\n            return null;\r\n        };\r\n        VariablesStore.prototype.itarateVarRefs = function (varName, iterator) {\r\n            this.findVarRef(varName, function (ref) {\r\n                iterator(ref);\r\n                return false;\r\n            });\r\n        };\r\n        VariablesStore.prototype.setOnRootVariableChange = function (callback) {\r\n            this.onRootVariableDefined = callback;\r\n        };\r\n        VariablesStore.prototype.putRootVars = function (styleElement, theme) {\r\n            var e_2, _a;\r\n            var _this = this;\r\n            var sheet = styleElement.sheet;\r\n            if (sheet.cssRules.length > 0) {\r\n                sheet.deleteRule(0);\r\n            }\r\n            var declarations = new Map();\r\n            iterateCSSDeclarations(document.documentElement.style, function (property, value) {\r\n                if (isVariable(property)) {\r\n                    if (_this.isVarType(property, VAR_TYPE_BGCOLOR)) {\r\n                        declarations.set(wrapBgColorVariableName(property), tryModifyBgColor(value, theme));\r\n                    }\r\n                    if (_this.isVarType(property, VAR_TYPE_TEXTCOLOR)) {\r\n                        declarations.set(wrapTextColorVariableName(property), tryModifyTextColor(value, theme));\r\n                    }\r\n                    if (_this.isVarType(property, VAR_TYPE_BORDERCOLOR)) {\r\n                        declarations.set(wrapBorderColorVariableName(property), tryModifyBorderColor(value, theme));\r\n                    }\r\n                    _this.subscribeForVarTypeChange(property, _this.onRootVariableDefined);\r\n                }\r\n            });\r\n            var cssLines = [];\r\n            cssLines.push(':root {');\r\n            try {\r\n                for (var declarations_1 = __values(declarations), declarations_1_1 = declarations_1.next(); !declarations_1_1.done; declarations_1_1 = declarations_1.next()) {\r\n                    var _b = __read(declarations_1_1.value, 2), property = _b[0], value = _b[1];\r\n                    cssLines.push(\"    \" + property + \": \" + value + \";\");\r\n                }\r\n            }\r\n            catch (e_2_1) { e_2 = { error: e_2_1 }; }\r\n            finally {\r\n                try {\r\n                    if (declarations_1_1 && !declarations_1_1.done && (_a = declarations_1.return)) _a.call(declarations_1);\r\n                }\r\n                finally { if (e_2) throw e_2.error; }\r\n            }\r\n            cssLines.push('}');\r\n            var cssText = cssLines.join('\\n');\r\n            sheet.insertRule(cssText);\r\n        };\r\n        return VariablesStore;\r\n    }());\r\n    var variablesStore = new VariablesStore();\r\n    function getVariableRange(input, searchStart) {\r\n        if (searchStart === void 0) { searchStart = 0; }\r\n        var start = input.indexOf('var(', searchStart);\r\n        if (start >= 0) {\r\n            var range = getParenthesesRange(input, start + 3);\r\n            if (range) {\r\n                return { start: start, end: range.end };\r\n            }\r\n            return null;\r\n        }\r\n    }\r\n    function getVariablesMatches(input) {\r\n        var ranges = [];\r\n        var i = 0;\r\n        var range;\r\n        while ((range = getVariableRange(input, i))) {\r\n            var start = range.start, end = range.end;\r\n            ranges.push({ start: start, end: end, value: input.substring(start, end) });\r\n            i = range.end + 1;\r\n        }\r\n        return ranges;\r\n    }\r\n    function replaceVariablesMatches(input, replacer) {\r\n        var matches = getVariablesMatches(input);\r\n        var matchesCount = matches.length;\r\n        if (matchesCount === 0) {\r\n            return input;\r\n        }\r\n        var inputLength = input.length;\r\n        var replacements = matches.map(function (m) { return replacer(m.value); });\r\n        var parts = [];\r\n        parts.push(input.substring(0, matches[0].start));\r\n        for (var i = 0; i < matchesCount; i++) {\r\n            parts.push(replacements[i]);\r\n            var start = matches[i].end;\r\n            var end = i < matchesCount - 1 ? matches[i + 1].start : inputLength;\r\n            parts.push(input.substring(start, end));\r\n        }\r\n        return parts.join('');\r\n    }\r\n    function getVariableNameAndFallback(match) {\r\n        var commaIndex = match.indexOf(',');\r\n        var name;\r\n        var fallback;\r\n        if (commaIndex >= 0) {\r\n            name = match.substring(4, commaIndex).trim();\r\n            fallback = match.substring(commaIndex + 1, match.length - 1).trim();\r\n        }\r\n        else {\r\n            name = match.substring(4, match.length - 1).trim();\r\n            fallback = '';\r\n        }\r\n        return { name: name, fallback: fallback };\r\n    }\r\n    function replaceCSSVariablesNames(value, nameReplacer, fallbackReplacer) {\r\n        var matchReplacer = function (match) {\r\n            var _a = getVariableNameAndFallback(match), name = _a.name, fallback = _a.fallback;\r\n            var newName = nameReplacer(name);\r\n            if (!fallback) {\r\n                return \"var(\" + newName + \")\";\r\n            }\r\n            var newFallback;\r\n            if (isVarDependant(fallback)) {\r\n                newFallback = replaceCSSVariablesNames(fallback, nameReplacer, fallbackReplacer);\r\n            }\r\n            else if (fallbackReplacer) {\r\n                newFallback = fallbackReplacer(fallback);\r\n            }\r\n            else {\r\n                newFallback = fallback;\r\n            }\r\n            return \"var(\" + newName + \", \" + newFallback + \")\";\r\n        };\r\n        return replaceVariablesMatches(value, matchReplacer);\r\n    }\r\n    function iterateVarDependencies(value, iterator) {\r\n        replaceCSSVariablesNames(value, function (varName) {\r\n            iterator(varName);\r\n            return varName;\r\n        });\r\n    }\r\n    function wrapBgColorVariableName(name) {\r\n        return \"--darkreader-bg\" + name;\r\n    }\r\n    function wrapTextColorVariableName(name) {\r\n        return \"--darkreader-text\" + name;\r\n    }\r\n    function wrapBorderColorVariableName(name) {\r\n        return \"--darkreader-border\" + name;\r\n    }\r\n    function wrapBgImgVariableName(name) {\r\n        return \"--darkreader-bgimg\" + name;\r\n    }\r\n    function isVariable(property) {\r\n        return property.startsWith('--');\r\n    }\r\n    function isVarDependant(value) {\r\n        return value.includes('var(');\r\n    }\r\n    function isConstructedColorVar(value) {\r\n        return value.match(/^\\s*(rgb|hsl)a?\\(/);\r\n    }\r\n    function tryModifyBgColor(color, theme) {\r\n        var rgb = tryParseColor(color);\r\n        return rgb ? modifyBackgroundColor(rgb, theme) : color;\r\n    }\r\n    function tryModifyTextColor(color, theme) {\r\n        var rgb = tryParseColor(color);\r\n        return rgb ? modifyForegroundColor(rgb, theme) : color;\r\n    }\r\n    function tryModifyBorderColor(color, theme) {\r\n        var rgb = tryParseColor(color);\r\n        return rgb ? modifyBorderColor(rgb, theme) : color;\r\n    }\r\n    function insertVarValues(source, varValues, stack) {\r\n        if (stack === void 0) { stack = new Set(); }\r\n        var containsUnresolvedVar = false;\r\n        var matchReplacer = function (match) {\r\n            var _a = getVariableNameAndFallback(match), name = _a.name, fallback = _a.fallback;\r\n            if (stack.has(name)) {\r\n                containsUnresolvedVar = true;\r\n                return null;\r\n            }\r\n            stack.add(name);\r\n            var varValue = varValues.get(name) || fallback;\r\n            var inserted = null;\r\n            if (varValue) {\r\n                if (isVarDependant(varValue)) {\r\n                    inserted = insertVarValues(varValue, varValues, stack);\r\n                }\r\n                else {\r\n                    inserted = varValue;\r\n                }\r\n            }\r\n            if (!inserted) {\r\n                containsUnresolvedVar = true;\r\n                return null;\r\n            }\r\n            return inserted;\r\n        };\r\n        var replaced = replaceVariablesMatches(source, matchReplacer);\r\n        if (containsUnresolvedVar) {\r\n            return null;\r\n        }\r\n        return replaced;\r\n    }\n\n    var overrides = {\r\n        'background-color': {\r\n            customProp: '--darkreader-inline-bgcolor',\r\n            cssProp: 'background-color',\r\n            dataAttr: 'data-darkreader-inline-bgcolor',\r\n        },\r\n        'background-image': {\r\n            customProp: '--darkreader-inline-bgimage',\r\n            cssProp: 'background-image',\r\n            dataAttr: 'data-darkreader-inline-bgimage',\r\n        },\r\n        'border-color': {\r\n            customProp: '--darkreader-inline-border',\r\n            cssProp: 'border-color',\r\n            dataAttr: 'data-darkreader-inline-border',\r\n        },\r\n        'border-bottom-color': {\r\n            customProp: '--darkreader-inline-border-bottom',\r\n            cssProp: 'border-bottom-color',\r\n            dataAttr: 'data-darkreader-inline-border-bottom',\r\n        },\r\n        'border-left-color': {\r\n            customProp: '--darkreader-inline-border-left',\r\n            cssProp: 'border-left-color',\r\n            dataAttr: 'data-darkreader-inline-border-left',\r\n        },\r\n        'border-right-color': {\r\n            customProp: '--darkreader-inline-border-right',\r\n            cssProp: 'border-right-color',\r\n            dataAttr: 'data-darkreader-inline-border-right',\r\n        },\r\n        'border-top-color': {\r\n            customProp: '--darkreader-inline-border-top',\r\n            cssProp: 'border-top-color',\r\n            dataAttr: 'data-darkreader-inline-border-top',\r\n        },\r\n        'box-shadow': {\r\n            customProp: '--darkreader-inline-boxshadow',\r\n            cssProp: 'box-shadow',\r\n            dataAttr: 'data-darkreader-inline-boxshadow',\r\n        },\r\n        'color': {\r\n            customProp: '--darkreader-inline-color',\r\n            cssProp: 'color',\r\n            dataAttr: 'data-darkreader-inline-color',\r\n        },\r\n        'fill': {\r\n            customProp: '--darkreader-inline-fill',\r\n            cssProp: 'fill',\r\n            dataAttr: 'data-darkreader-inline-fill',\r\n        },\r\n        'stroke': {\r\n            customProp: '--darkreader-inline-stroke',\r\n            cssProp: 'stroke',\r\n            dataAttr: 'data-darkreader-inline-stroke',\r\n        },\r\n        'outline-color': {\r\n            customProp: '--darkreader-inline-outline',\r\n            cssProp: 'outline-color',\r\n            dataAttr: 'data-darkreader-inline-outline',\r\n        },\r\n        'stop-color': {\r\n            customProp: '--darkreader-inline-stopcolor',\r\n            cssProp: 'stop-color',\r\n            dataAttr: 'data-darkreader-inline-stopcolor',\r\n        },\r\n    };\r\n    var overridesList = Object.values(overrides);\r\n    var normalizedPropList = {};\r\n    overridesList.forEach(function (_a) {\r\n        var cssProp = _a.cssProp, customProp = _a.customProp;\r\n        return normalizedPropList[customProp] = cssProp;\r\n    });\r\n    var INLINE_STYLE_ATTRS = ['style', 'fill', 'stop-color', 'stroke', 'bgcolor', 'color'];\r\n    var INLINE_STYLE_SELECTOR = INLINE_STYLE_ATTRS.map(function (attr) { return \"[\" + attr + \"]\"; }).join(', ');\r\n    function getInlineOverrideStyle() {\r\n        return overridesList.map(function (_a) {\r\n            var dataAttr = _a.dataAttr, customProp = _a.customProp, cssProp = _a.cssProp;\r\n            return [\r\n                \"[\" + dataAttr + \"] {\",\r\n                \"  \" + cssProp + \": var(\" + customProp + \") !important;\",\r\n                '}',\r\n            ].join('\\n');\r\n        }).join('\\n');\r\n    }\r\n    function getInlineStyleElements(root) {\r\n        var results = [];\r\n        if (root instanceof Element && root.matches(INLINE_STYLE_SELECTOR)) {\r\n            results.push(root);\r\n        }\r\n        if (root instanceof Element || (isShadowDomSupported && root instanceof ShadowRoot) || root instanceof Document) {\r\n            push(results, root.querySelectorAll(INLINE_STYLE_SELECTOR));\r\n        }\r\n        return results;\r\n    }\r\n    var treeObservers = new Map();\r\n    var attrObservers = new Map();\r\n    function watchForInlineStyles(elementStyleDidChange, shadowRootDiscovered) {\r\n        deepWatchForInlineStyles(document, elementStyleDidChange, shadowRootDiscovered);\r\n        iterateShadowHosts(document.documentElement, function (host) {\r\n            deepWatchForInlineStyles(host.shadowRoot, elementStyleDidChange, shadowRootDiscovered);\r\n        });\r\n    }\r\n    function deepWatchForInlineStyles(root, elementStyleDidChange, shadowRootDiscovered) {\r\n        if (treeObservers.has(root)) {\r\n            treeObservers.get(root).disconnect();\r\n            attrObservers.get(root).disconnect();\r\n        }\r\n        var discoveredNodes = new WeakSet();\r\n        function discoverNodes(node) {\r\n            getInlineStyleElements(node).forEach(function (el) {\r\n                if (discoveredNodes.has(el)) {\r\n                    return;\r\n                }\r\n                discoveredNodes.add(el);\r\n                elementStyleDidChange(el);\r\n            });\r\n            iterateShadowHosts(node, function (n) {\r\n                if (discoveredNodes.has(node)) {\r\n                    return;\r\n                }\r\n                discoveredNodes.add(node);\r\n                shadowRootDiscovered(n.shadowRoot);\r\n                deepWatchForInlineStyles(n.shadowRoot, elementStyleDidChange, shadowRootDiscovered);\r\n            });\r\n        }\r\n        var treeObserver = createOptimizedTreeObserver(root, {\r\n            onMinorMutations: function (_a) {\r\n                var additions = _a.additions;\r\n                additions.forEach(function (added) { return discoverNodes(added); });\r\n            },\r\n            onHugeMutations: function () {\r\n                discoverNodes(root);\r\n            },\r\n        });\r\n        treeObservers.set(root, treeObserver);\r\n        var attemptCount = 0;\r\n        var start = null;\r\n        var ATTEMPTS_INTERVAL = getDuration({ seconds: 10 });\r\n        var RETRY_TIMEOUT = getDuration({ seconds: 2 });\r\n        var MAX_ATTEMPTS_COUNT = 50;\r\n        var cache = [];\r\n        var timeoutId = null;\r\n        var handleAttributeMutations = throttle(function (mutations) {\r\n            mutations.forEach(function (m) {\r\n                if (INLINE_STYLE_ATTRS.includes(m.attributeName)) {\r\n                    elementStyleDidChange(m.target);\r\n                }\r\n            });\r\n        });\r\n        var attrObserver = new MutationObserver(function (mutations) {\r\n            if (timeoutId) {\r\n                cache.push.apply(cache, __spreadArray([], __read(mutations), false));\r\n                return;\r\n            }\r\n            attemptCount++;\r\n            var now = Date.now();\r\n            if (start == null) {\r\n                start = now;\r\n            }\r\n            else if (attemptCount >= MAX_ATTEMPTS_COUNT) {\r\n                if (now - start < ATTEMPTS_INTERVAL) {\r\n                    timeoutId = setTimeout(function () {\r\n                        start = null;\r\n                        attemptCount = 0;\r\n                        timeoutId = null;\r\n                        var attributeCache = cache;\r\n                        cache = [];\r\n                        handleAttributeMutations(attributeCache);\r\n                    }, RETRY_TIMEOUT);\r\n                    cache.push.apply(cache, __spreadArray([], __read(mutations), false));\r\n                    return;\r\n                }\r\n                start = now;\r\n                attemptCount = 1;\r\n            }\r\n            handleAttributeMutations(mutations);\r\n        });\r\n        attrObserver.observe(root, {\r\n            attributes: true,\r\n            attributeFilter: INLINE_STYLE_ATTRS.concat(overridesList.map(function (_a) {\r\n                var dataAttr = _a.dataAttr;\r\n                return dataAttr;\r\n            })),\r\n            subtree: true,\r\n        });\r\n        attrObservers.set(root, attrObserver);\r\n    }\r\n    function stopWatchingForInlineStyles() {\r\n        treeObservers.forEach(function (o) { return o.disconnect(); });\r\n        attrObservers.forEach(function (o) { return o.disconnect(); });\r\n        treeObservers.clear();\r\n        attrObservers.clear();\r\n    }\r\n    var inlineStyleCache = new WeakMap();\r\n    var filterProps = ['brightness', 'contrast', 'grayscale', 'sepia', 'mode'];\r\n    function getInlineStyleCacheKey(el, theme) {\r\n        return INLINE_STYLE_ATTRS\r\n            .map(function (attr) { return attr + \"=\\\"\" + el.getAttribute(attr) + \"\\\"\"; })\r\n            .concat(filterProps.map(function (prop) { return prop + \"=\\\"\" + theme[prop] + \"\\\"\"; }))\r\n            .join(' ');\r\n    }\r\n    function shouldIgnoreInlineStyle(element, selectors) {\r\n        for (var i = 0, len = selectors.length; i < len; i++) {\r\n            var ingnoredSelector = selectors[i];\r\n            if (element.matches(ingnoredSelector)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    function overrideInlineStyle(element, theme, ignoreInlineSelectors, ignoreImageSelectors) {\r\n        var cacheKey = getInlineStyleCacheKey(element, theme);\r\n        if (cacheKey === inlineStyleCache.get(element)) {\r\n            return;\r\n        }\r\n        var unsetProps = new Set(Object.keys(overrides));\r\n        function setCustomProp(targetCSSProp, modifierCSSProp, cssVal) {\r\n            var _a = overrides[targetCSSProp], customProp = _a.customProp, dataAttr = _a.dataAttr;\r\n            var mod = getModifiableCSSDeclaration(modifierCSSProp, cssVal, {}, variablesStore, ignoreImageSelectors, null);\r\n            if (!mod) {\r\n                return;\r\n            }\r\n            var value = mod.value;\r\n            if (typeof value === 'function') {\r\n                value = value(theme);\r\n            }\r\n            element.style.setProperty(customProp, value);\r\n            if (!element.hasAttribute(dataAttr)) {\r\n                element.setAttribute(dataAttr, '');\r\n            }\r\n            unsetProps.delete(targetCSSProp);\r\n        }\r\n        if (ignoreInlineSelectors.length > 0) {\r\n            if (shouldIgnoreInlineStyle(element, ignoreInlineSelectors)) {\r\n                unsetProps.forEach(function (cssProp) {\r\n                    element.removeAttribute(overrides[cssProp].dataAttr);\r\n                });\r\n                return;\r\n            }\r\n        }\r\n        if (element.hasAttribute('bgcolor')) {\r\n            var value = element.getAttribute('bgcolor');\r\n            if (value.match(/^[0-9a-f]{3}$/i) || value.match(/^[0-9a-f]{6}$/i)) {\r\n                value = \"#\" + value;\r\n            }\r\n            setCustomProp('background-color', 'background-color', value);\r\n        }\r\n        if (element.hasAttribute('color') && element.rel !== 'mask-icon') {\r\n            var value = element.getAttribute('color');\r\n            if (value.match(/^[0-9a-f]{3}$/i) || value.match(/^[0-9a-f]{6}$/i)) {\r\n                value = \"#\" + value;\r\n            }\r\n            setCustomProp('color', 'color', value);\r\n        }\r\n        if (element instanceof SVGElement) {\r\n            if (element.hasAttribute('fill')) {\r\n                var SMALL_SVG_LIMIT_1 = 32;\r\n                var value_1 = element.getAttribute('fill');\r\n                if (value_1 !== 'none') {\r\n                    if (!(element instanceof SVGTextElement)) {\r\n                        var handleSVGElement = function () {\r\n                            var _a = element.getBoundingClientRect(), width = _a.width, height = _a.height;\r\n                            var isBg = (width > SMALL_SVG_LIMIT_1 || height > SMALL_SVG_LIMIT_1);\r\n                            setCustomProp('fill', isBg ? 'background-color' : 'color', value_1);\r\n                        };\r\n                        if (isReadyStateComplete()) {\r\n                            handleSVGElement();\r\n                        }\r\n                        else {\r\n                            addReadyStateCompleteListener(handleSVGElement);\r\n                        }\r\n                    }\r\n                    else {\r\n                        setCustomProp('fill', 'color', value_1);\r\n                    }\r\n                }\r\n            }\r\n            if (element.hasAttribute('stop-color')) {\r\n                setCustomProp('stop-color', 'background-color', element.getAttribute('stop-color'));\r\n            }\r\n        }\r\n        if (element.hasAttribute('stroke')) {\r\n            var value = element.getAttribute('stroke');\r\n            setCustomProp('stroke', element instanceof SVGLineElement || element instanceof SVGTextElement ? 'border-color' : 'color', value);\r\n        }\r\n        element.style && iterateCSSDeclarations(element.style, function (property, value) {\r\n            if (property === 'background-image' && value.includes('url')) {\r\n                return;\r\n            }\r\n            if (overrides.hasOwnProperty(property)) {\r\n                setCustomProp(property, property, value);\r\n            }\r\n            else {\r\n                var overridenProp = normalizedPropList[property];\r\n                if (overridenProp &&\r\n                    (!element.style.getPropertyValue(overridenProp) && !element.hasAttribute(overridenProp))) {\r\n                    if (overridenProp === 'background-color' && element.hasAttribute('bgcolor')) {\r\n                        return;\r\n                    }\r\n                    element.style.setProperty(property, '');\r\n                }\r\n            }\r\n        });\r\n        if (element.style && element instanceof SVGTextElement && element.style.fill) {\r\n            setCustomProp('fill', 'color', element.style.getPropertyValue('fill'));\r\n        }\r\n        forEach(unsetProps, function (cssProp) {\r\n            element.removeAttribute(overrides[cssProp].dataAttr);\r\n        });\r\n        inlineStyleCache.set(element, getInlineStyleCacheKey(element, theme));\r\n    }\n\n    var metaThemeColorName = 'theme-color';\r\n    var metaThemeColorSelector = \"meta[name=\\\"\" + metaThemeColorName + \"\\\"]\";\r\n    var srcMetaThemeColor = null;\r\n    var observer = null;\r\n    function changeMetaThemeColor(meta, theme) {\r\n        srcMetaThemeColor = srcMetaThemeColor || meta.content;\r\n        try {\r\n            var color = parse(srcMetaThemeColor);\r\n            meta.content = modifyBackgroundColor(color, theme);\r\n        }\r\n        catch (err) {\r\n            logWarn(err);\r\n        }\r\n    }\r\n    function changeMetaThemeColorWhenAvailable(theme) {\r\n        var meta = document.querySelector(metaThemeColorSelector);\r\n        if (meta) {\r\n            changeMetaThemeColor(meta, theme);\r\n        }\r\n        else {\r\n            if (observer) {\r\n                observer.disconnect();\r\n            }\r\n            observer = new MutationObserver(function (mutations) {\r\n                loop: for (var i = 0; i < mutations.length; i++) {\r\n                    var addedNodes = mutations[i].addedNodes;\r\n                    for (var j = 0; j < addedNodes.length; j++) {\r\n                        var node = addedNodes[j];\r\n                        if (node instanceof HTMLMetaElement && node.name === metaThemeColorName) {\r\n                            observer.disconnect();\r\n                            observer = null;\r\n                            changeMetaThemeColor(node, theme);\r\n                            break loop;\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n            observer.observe(document.head, { childList: true });\r\n        }\r\n    }\r\n    function restoreMetaThemeColor() {\r\n        if (observer) {\r\n            observer.disconnect();\r\n            observer = null;\r\n        }\r\n        var meta = document.querySelector(metaThemeColorSelector);\r\n        if (meta && srcMetaThemeColor) {\r\n            meta.content = srcMetaThemeColor;\r\n        }\r\n    }\n\n    var themeCacheKeys = [\r\n        'mode',\r\n        'brightness',\r\n        'contrast',\r\n        'grayscale',\r\n        'sepia',\r\n        'darkSchemeBackgroundColor',\r\n        'darkSchemeTextColor',\r\n        'lightSchemeBackgroundColor',\r\n        'lightSchemeTextColor',\r\n    ];\r\n    function getThemeKey(theme) {\r\n        return themeCacheKeys.map(function (p) { return p + \":\" + theme[p]; }).join(';');\r\n    }\r\n    var asyncQueue = createAsyncTasksQueue();\r\n    function createStyleSheetModifier() {\r\n        var renderId = 0;\r\n        var rulesTextCache = new Set();\r\n        var rulesModCache = new Map();\r\n        var varTypeChangeCleaners = new Set();\r\n        var prevFilterKey = null;\r\n        var hasNonLoadedLink = false;\r\n        var wasRebuilt = false;\r\n        function shouldRebuildStyle() {\r\n            return hasNonLoadedLink && !wasRebuilt;\r\n        }\r\n        function modifySheet(options) {\r\n            var rules = options.sourceCSSRules;\r\n            var theme = options.theme, ignoreImageAnalysis = options.ignoreImageAnalysis, force = options.force, prepareSheet = options.prepareSheet, isAsyncCancelled = options.isAsyncCancelled;\r\n            var rulesChanged = (rulesModCache.size === 0);\r\n            var notFoundCacheKeys = new Set(rulesModCache.keys());\r\n            var themeKey = getThemeKey(theme);\r\n            var themeChanged = (themeKey !== prevFilterKey);\r\n            if (hasNonLoadedLink) {\r\n                wasRebuilt = true;\r\n            }\r\n            var modRules = [];\r\n            iterateCSSRules(rules, function (rule) {\r\n                var cssText = rule.cssText;\r\n                var textDiffersFromPrev = false;\r\n                notFoundCacheKeys.delete(cssText);\r\n                if (rule.parentRule instanceof CSSMediaRule) {\r\n                    cssText += \";\" + rule.parentRule.media.mediaText;\r\n                }\r\n                if (!rulesTextCache.has(cssText)) {\r\n                    rulesTextCache.add(cssText);\r\n                    textDiffersFromPrev = true;\r\n                }\r\n                if (textDiffersFromPrev) {\r\n                    rulesChanged = true;\r\n                }\r\n                else {\r\n                    modRules.push(rulesModCache.get(cssText));\r\n                    return;\r\n                }\r\n                var modDecs = [];\r\n                rule.style && iterateCSSDeclarations(rule.style, function (property, value) {\r\n                    var mod = getModifiableCSSDeclaration(property, value, rule, variablesStore, ignoreImageAnalysis, isAsyncCancelled);\r\n                    if (mod) {\r\n                        modDecs.push(mod);\r\n                    }\r\n                });\r\n                var modRule = null;\r\n                if (modDecs.length > 0) {\r\n                    var parentRule = rule.parentRule;\r\n                    modRule = { selector: rule.selectorText, declarations: modDecs, parentRule: parentRule };\r\n                    modRules.push(modRule);\r\n                }\r\n                rulesModCache.set(cssText, modRule);\r\n            }, function () {\r\n                hasNonLoadedLink = true;\r\n            });\r\n            notFoundCacheKeys.forEach(function (key) {\r\n                rulesTextCache.delete(key);\r\n                rulesModCache.delete(key);\r\n            });\r\n            prevFilterKey = themeKey;\r\n            if (!force && !rulesChanged && !themeChanged) {\r\n                return;\r\n            }\r\n            renderId++;\r\n            function setRule(target, index, rule) {\r\n                var selector = rule.selector, declarations = rule.declarations;\r\n                var getDeclarationText = function (dec) {\r\n                    var property = dec.property, value = dec.value, important = dec.important, sourceValue = dec.sourceValue;\r\n                    return property + \": \" + (value == null ? sourceValue : value) + (important ? ' !important' : '') + \";\";\r\n                };\r\n                var ruleText = selector + \" { \" + declarations.map(getDeclarationText).join(' ') + \" }\";\r\n                target.insertRule(ruleText, index);\r\n            }\r\n            var asyncDeclarations = new Map();\r\n            var varDeclarations = new Map();\r\n            var asyncDeclarationCounter = 0;\r\n            var varDeclarationCounter = 0;\r\n            var rootReadyGroup = { rule: null, rules: [], isGroup: true };\r\n            var groupRefs = new WeakMap();\r\n            function getGroup(rule) {\r\n                if (rule == null) {\r\n                    return rootReadyGroup;\r\n                }\r\n                if (groupRefs.has(rule)) {\r\n                    return groupRefs.get(rule);\r\n                }\r\n                var group = { rule: rule, rules: [], isGroup: true };\r\n                groupRefs.set(rule, group);\r\n                var parentGroup = getGroup(rule.parentRule);\r\n                parentGroup.rules.push(group);\r\n                return group;\r\n            }\r\n            varTypeChangeCleaners.forEach(function (clear) { return clear(); });\r\n            varTypeChangeCleaners.clear();\r\n            modRules.filter(function (r) { return r; }).forEach(function (_a) {\r\n                var selector = _a.selector, declarations = _a.declarations, parentRule = _a.parentRule;\r\n                var group = getGroup(parentRule);\r\n                var readyStyleRule = { selector: selector, declarations: [], isGroup: false };\r\n                var readyDeclarations = readyStyleRule.declarations;\r\n                group.rules.push(readyStyleRule);\r\n                function handleAsyncDeclaration(property, modified, important, sourceValue) {\r\n                    var asyncKey = ++asyncDeclarationCounter;\r\n                    var asyncDeclaration = { property: property, value: null, important: important, asyncKey: asyncKey, sourceValue: sourceValue };\r\n                    readyDeclarations.push(asyncDeclaration);\r\n                    var currentRenderId = renderId;\r\n                    modified.then(function (asyncValue) {\r\n                        if (!asyncValue || isAsyncCancelled() || currentRenderId !== renderId) {\r\n                            return;\r\n                        }\r\n                        asyncDeclaration.value = asyncValue;\r\n                        asyncQueue.add(function () {\r\n                            if (isAsyncCancelled() || currentRenderId !== renderId) {\r\n                                return;\r\n                            }\r\n                            rebuildAsyncRule(asyncKey);\r\n                        });\r\n                    });\r\n                }\r\n                function handleVarDeclarations(property, modified, important, sourceValue) {\r\n                    var _a = modified, varDecs = _a.declarations, onTypeChange = _a.onTypeChange;\r\n                    var varKey = ++varDeclarationCounter;\r\n                    var currentRenderId = renderId;\r\n                    var initialIndex = readyDeclarations.length;\r\n                    var oldDecs = [];\r\n                    if (varDecs.length === 0) {\r\n                        var tempDec = { property: property, value: sourceValue, important: important, sourceValue: sourceValue, varKey: varKey };\r\n                        readyDeclarations.push(tempDec);\r\n                        oldDecs = [tempDec];\r\n                    }\r\n                    varDecs.forEach(function (mod) {\r\n                        if (mod.value instanceof Promise) {\r\n                            handleAsyncDeclaration(mod.property, mod.value, important, sourceValue);\r\n                        }\r\n                        else {\r\n                            var readyDec = { property: mod.property, value: mod.value, important: important, sourceValue: sourceValue, varKey: varKey };\r\n                            readyDeclarations.push(readyDec);\r\n                            oldDecs.push(readyDec);\r\n                        }\r\n                    });\r\n                    onTypeChange.addListener(function (newDecs) {\r\n                        if (isAsyncCancelled() || currentRenderId !== renderId) {\r\n                            return;\r\n                        }\r\n                        var readyVarDecs = newDecs.map(function (mod) {\r\n                            return { property: mod.property, value: mod.value, important: important, sourceValue: sourceValue, varKey: varKey };\r\n                        });\r\n                        var index = readyDeclarations.indexOf(oldDecs[0], initialIndex);\r\n                        readyDeclarations.splice.apply(readyDeclarations, __spreadArray([index, oldDecs.length], __read(readyVarDecs), false));\r\n                        oldDecs = readyVarDecs;\r\n                        rebuildVarRule(varKey);\r\n                    });\r\n                    varTypeChangeCleaners.add(function () { return onTypeChange.removeListeners(); });\r\n                }\r\n                declarations.forEach(function (_a) {\r\n                    var property = _a.property, value = _a.value, important = _a.important, sourceValue = _a.sourceValue;\r\n                    if (typeof value === 'function') {\r\n                        var modified = value(theme);\r\n                        if (modified instanceof Promise) {\r\n                            handleAsyncDeclaration(property, modified, important, sourceValue);\r\n                        }\r\n                        else if (property.startsWith('--')) {\r\n                            handleVarDeclarations(property, modified, important, sourceValue);\r\n                        }\r\n                        else {\r\n                            readyDeclarations.push({ property: property, value: modified, important: important, sourceValue: sourceValue });\r\n                        }\r\n                    }\r\n                    else {\r\n                        readyDeclarations.push({ property: property, value: value, important: important, sourceValue: sourceValue });\r\n                    }\r\n                });\r\n            });\r\n            var sheet = prepareSheet();\r\n            function buildStyleSheet() {\r\n                function createTarget(group, parent) {\r\n                    var rule = group.rule;\r\n                    if (rule instanceof CSSMediaRule) {\r\n                        var media = rule.media;\r\n                        var index = parent.cssRules.length;\r\n                        parent.insertRule(\"@media \" + media.mediaText + \" {}\", index);\r\n                        return parent.cssRules[index];\r\n                    }\r\n                    return parent;\r\n                }\r\n                function iterateReadyRules(group, target, styleIterator) {\r\n                    group.rules.forEach(function (r) {\r\n                        if (r.isGroup) {\r\n                            var t = createTarget(r, target);\r\n                            iterateReadyRules(r, t, styleIterator);\r\n                        }\r\n                        else {\r\n                            styleIterator(r, target);\r\n                        }\r\n                    });\r\n                }\r\n                iterateReadyRules(rootReadyGroup, sheet, function (rule, target) {\r\n                    var index = target.cssRules.length;\r\n                    rule.declarations.forEach(function (_a) {\r\n                        var asyncKey = _a.asyncKey, varKey = _a.varKey;\r\n                        if (asyncKey != null) {\r\n                            asyncDeclarations.set(asyncKey, { rule: rule, target: target, index: index });\r\n                        }\r\n                        if (varKey != null) {\r\n                            varDeclarations.set(varKey, { rule: rule, target: target, index: index });\r\n                        }\r\n                    });\r\n                    setRule(target, index, rule);\r\n                });\r\n            }\r\n            function rebuildAsyncRule(key) {\r\n                var _a = asyncDeclarations.get(key), rule = _a.rule, target = _a.target, index = _a.index;\r\n                target.deleteRule(index);\r\n                setRule(target, index, rule);\r\n                asyncDeclarations.delete(key);\r\n            }\r\n            function rebuildVarRule(key) {\r\n                var _a = varDeclarations.get(key), rule = _a.rule, target = _a.target, index = _a.index;\r\n                target.deleteRule(index);\r\n                setRule(target, index, rule);\r\n            }\r\n            buildStyleSheet();\r\n        }\r\n        return { modifySheet: modifySheet, shouldRebuildStyle: shouldRebuildStyle };\r\n    }\n\n    var STYLE_SELECTOR = 'style, link[rel*=\"stylesheet\" i]:not([disabled])';\r\n    function shouldManageStyle(element) {\r\n        return (((element instanceof HTMLStyleElement) ||\r\n            (element instanceof SVGStyleElement) ||\r\n            (element instanceof HTMLLinkElement &&\r\n                element.rel &&\r\n                element.rel.toLowerCase().includes('stylesheet') &&\r\n                !element.disabled)) &&\r\n            !element.classList.contains('darkreader') &&\r\n            element.media.toLowerCase() !== 'print' &&\r\n            !element.classList.contains('stylus'));\r\n    }\r\n    function getManageableStyles(node, results, deep) {\r\n        if (results === void 0) { results = []; }\r\n        if (deep === void 0) { deep = true; }\r\n        if (shouldManageStyle(node)) {\r\n            results.push(node);\r\n        }\r\n        else if (node instanceof Element || (isShadowDomSupported && node instanceof ShadowRoot) || node === document) {\r\n            forEach(node.querySelectorAll(STYLE_SELECTOR), function (style) { return getManageableStyles(style, results, false); });\r\n            if (deep) {\r\n                iterateShadowHosts(node, function (host) { return getManageableStyles(host.shadowRoot, results, false); });\r\n            }\r\n        }\r\n        return results;\r\n    }\r\n    var syncStyleSet = new WeakSet();\r\n    var corsStyleSet = new WeakSet();\r\n    var canOptimizeUsingProxy$1 = false;\r\n    document.addEventListener('__darkreader__inlineScriptsAllowed', function () {\r\n        canOptimizeUsingProxy$1 = true;\r\n    });\r\n    var loadingLinkCounter = 0;\r\n    var rejectorsForLoadingLinks = new Map();\r\n    function cleanLoadingLinks() {\r\n        rejectorsForLoadingLinks.clear();\r\n    }\r\n    function manageStyle(element, _a) {\r\n        var update = _a.update, loadingStart = _a.loadingStart, loadingEnd = _a.loadingEnd;\r\n        var prevStyles = [];\r\n        var next = element;\r\n        while ((next = next.nextElementSibling) && next.matches('.darkreader')) {\r\n            prevStyles.push(next);\r\n        }\r\n        var corsCopy = prevStyles.find(function (el) { return el.matches('.darkreader--cors') && !corsStyleSet.has(el); }) || null;\r\n        var syncStyle = prevStyles.find(function (el) { return el.matches('.darkreader--sync') && !syncStyleSet.has(el); }) || null;\r\n        var corsCopyPositionWatcher = null;\r\n        var syncStylePositionWatcher = null;\r\n        var cancelAsyncOperations = false;\r\n        var isOverrideEmpty = true;\r\n        var sheetModifier = createStyleSheetModifier();\r\n        var observer = new MutationObserver(function () {\r\n            update();\r\n        });\r\n        var observerOptions = { attributes: true, childList: true, subtree: true, characterData: true };\r\n        function containsCSSImport() {\r\n            return element instanceof HTMLStyleElement && element.textContent.trim().match(cssImportRegex);\r\n        }\r\n        function hasImports(cssRules, checkCrossOrigin) {\r\n            var result = false;\r\n            if (cssRules) {\r\n                var rule = void 0;\r\n                cssRulesLoop: for (var i = 0, len = cssRules.length; i < len; i++) {\r\n                    rule = cssRules[i];\r\n                    if (rule.href) {\r\n                        if (checkCrossOrigin) {\r\n                            if (rule.href.startsWith('http') && !rule.href.startsWith(location.origin)) {\r\n                                result = true;\r\n                                break cssRulesLoop;\r\n                            }\r\n                        }\r\n                        else {\r\n                            result = true;\r\n                            break cssRulesLoop;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n        function getRulesSync() {\r\n            if (corsCopy) {\r\n                logInfo('[getRulesSync] Using cors-copy.');\r\n                return corsCopy.sheet.cssRules;\r\n            }\r\n            if (containsCSSImport()) {\r\n                logInfo('[getRulesSync] CSSImport detected.');\r\n                return null;\r\n            }\r\n            var cssRules = safeGetSheetRules();\r\n            if (element instanceof HTMLLinkElement &&\r\n                !isRelativeHrefOnAbsolutePath(element.href) &&\r\n                hasImports(cssRules, false)) {\r\n                logInfo('[getRulesSync] CSSImportRule detected on non-local href.');\r\n                return null;\r\n            }\r\n            if (hasImports(cssRules, true)) {\r\n                logInfo('[getRulesSync] Cross-Origin CSSImportRule detected.');\r\n                return null;\r\n            }\r\n            logInfo('[getRulesSync] Using cssRules.');\r\n            !cssRules && logWarn('[getRulesSync] cssRules is null, trying again.');\r\n            return cssRules;\r\n        }\r\n        function insertStyle() {\r\n            if (corsCopy) {\r\n                if (element.nextSibling !== corsCopy) {\r\n                    element.parentNode.insertBefore(corsCopy, element.nextSibling);\r\n                }\r\n                if (corsCopy.nextSibling !== syncStyle) {\r\n                    element.parentNode.insertBefore(syncStyle, corsCopy.nextSibling);\r\n                }\r\n            }\r\n            else if (element.nextSibling !== syncStyle) {\r\n                element.parentNode.insertBefore(syncStyle, element.nextSibling);\r\n            }\r\n        }\r\n        function createSyncStyle() {\r\n            syncStyle = element instanceof SVGStyleElement ?\r\n                document.createElementNS('http://www.w3.org/2000/svg', 'style') :\r\n                document.createElement('style');\r\n            syncStyle.classList.add('darkreader');\r\n            syncStyle.classList.add('darkreader--sync');\r\n            syncStyle.media = 'screen';\r\n            if (!isChromium && element.title) {\r\n                syncStyle.title = element.title;\r\n            }\r\n            syncStyleSet.add(syncStyle);\r\n        }\r\n        var isLoadingRules = false;\r\n        var wasLoadingError = false;\r\n        var loadingLinkId = ++loadingLinkCounter;\r\n        function getRulesAsync() {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var cssText, cssBasePath, _a, cssRules, accessError, err_1, fullCSSText, err_2;\r\n                var _b;\r\n                return __generator(this, function (_c) {\r\n                    switch (_c.label) {\r\n                        case 0:\r\n                            if (!(element instanceof HTMLLinkElement)) return [3, 7];\r\n                            _a = __read(getRulesOrError(), 2), cssRules = _a[0], accessError = _a[1];\r\n                            if (accessError) {\r\n                                logWarn(accessError);\r\n                            }\r\n                            if (!((!cssRules && !accessError && !isSafari) ||\r\n                                (isSafari && !element.sheet) ||\r\n                                isStillLoadingError(accessError))) return [3, 5];\r\n                            _c.label = 1;\r\n                        case 1:\r\n                            _c.trys.push([1, 3, , 4]);\r\n                            logInfo(\"Linkelement \" + loadingLinkId + \" is not loaded yet and thus will be await for\", element);\r\n                            return [4, linkLoading(element, loadingLinkId)];\r\n                        case 2:\r\n                            _c.sent();\r\n                            return [3, 4];\r\n                        case 3:\r\n                            err_1 = _c.sent();\r\n                            logWarn(err_1);\r\n                            wasLoadingError = true;\r\n                            return [3, 4];\r\n                        case 4:\r\n                            if (cancelAsyncOperations) {\r\n                                return [2, null];\r\n                            }\r\n                            _b = __read(getRulesOrError(), 2), cssRules = _b[0], accessError = _b[1];\r\n                            if (accessError) {\r\n                                logWarn(accessError);\r\n                            }\r\n                            _c.label = 5;\r\n                        case 5:\r\n                            if (cssRules) {\r\n                                if (isRelativeHrefOnAbsolutePath(element.href)) {\r\n                                    return [2, cssRules];\r\n                                }\r\n                                else if (!hasImports(cssRules, false)) {\r\n                                    return [2, cssRules];\r\n                                }\r\n                            }\r\n                            return [4, loadText(element.href)];\r\n                        case 6:\r\n                            cssText = _c.sent();\r\n                            cssBasePath = getCSSBaseBath(element.href);\r\n                            if (cancelAsyncOperations) {\r\n                                return [2, null];\r\n                            }\r\n                            return [3, 8];\r\n                        case 7:\r\n                            if (containsCSSImport()) {\r\n                                cssText = element.textContent.trim();\r\n                                cssBasePath = getCSSBaseBath(location.href);\r\n                            }\r\n                            else {\r\n                                return [2, null];\r\n                            }\r\n                            _c.label = 8;\r\n                        case 8:\r\n                            if (!cssText) return [3, 13];\r\n                            _c.label = 9;\r\n                        case 9:\r\n                            _c.trys.push([9, 11, , 12]);\r\n                            return [4, replaceCSSImports(cssText, cssBasePath)];\r\n                        case 10:\r\n                            fullCSSText = _c.sent();\r\n                            corsCopy = createCORSCopy(element, fullCSSText);\r\n                            return [3, 12];\r\n                        case 11:\r\n                            err_2 = _c.sent();\r\n                            logWarn(err_2);\r\n                            return [3, 12];\r\n                        case 12:\r\n                            if (corsCopy) {\r\n                                corsCopyPositionWatcher = watchForNodePosition(corsCopy, 'prev-sibling');\r\n                                return [2, corsCopy.sheet.cssRules];\r\n                            }\r\n                            _c.label = 13;\r\n                        case 13: return [2, null];\r\n                    }\r\n                });\r\n            });\r\n        }\r\n        function details() {\r\n            var rules = getRulesSync();\r\n            if (!rules) {\r\n                if (isLoadingRules || wasLoadingError) {\r\n                    return null;\r\n                }\r\n                isLoadingRules = true;\r\n                loadingStart();\r\n                getRulesAsync().then(function (results) {\r\n                    isLoadingRules = false;\r\n                    loadingEnd();\r\n                    if (results) {\r\n                        update();\r\n                    }\r\n                }).catch(function (err) {\r\n                    logWarn(err);\r\n                    isLoadingRules = false;\r\n                    loadingEnd();\r\n                });\r\n                return null;\r\n            }\r\n            return { rules: rules };\r\n        }\r\n        var forceRenderStyle = false;\r\n        function render(theme, ignoreImageAnalysis) {\r\n            var rules = getRulesSync();\r\n            if (!rules) {\r\n                return;\r\n            }\r\n            cancelAsyncOperations = false;\r\n            function removeCSSRulesFromSheet(sheet) {\r\n                try {\r\n                    if (sheet.replaceSync) {\r\n                        sheet.replaceSync('');\r\n                        return;\r\n                    }\r\n                }\r\n                catch (err) {\r\n                    logWarn('Could not use fastpath for removing rules from stylesheet', err);\r\n                }\r\n                for (var i = sheet.cssRules.length - 1; i >= 0; i--) {\r\n                    sheet.deleteRule(i);\r\n                }\r\n            }\r\n            function prepareOverridesSheet() {\r\n                if (!syncStyle) {\r\n                    createSyncStyle();\r\n                }\r\n                syncStylePositionWatcher && syncStylePositionWatcher.stop();\r\n                insertStyle();\r\n                if (syncStyle.sheet == null) {\r\n                    syncStyle.textContent = '';\r\n                }\r\n                var sheet = syncStyle.sheet;\r\n                removeCSSRulesFromSheet(sheet);\r\n                if (syncStylePositionWatcher) {\r\n                    syncStylePositionWatcher.run();\r\n                }\r\n                else {\r\n                    syncStylePositionWatcher = watchForNodePosition(syncStyle, 'prev-sibling', function () {\r\n                        forceRenderStyle = true;\r\n                        buildOverrides();\r\n                    });\r\n                }\r\n                return syncStyle.sheet;\r\n            }\r\n            function buildOverrides() {\r\n                var force = forceRenderStyle;\r\n                forceRenderStyle = false;\r\n                sheetModifier.modifySheet({\r\n                    prepareSheet: prepareOverridesSheet,\r\n                    sourceCSSRules: rules,\r\n                    theme: theme,\r\n                    ignoreImageAnalysis: ignoreImageAnalysis,\r\n                    force: force,\r\n                    isAsyncCancelled: function () { return cancelAsyncOperations; },\r\n                });\r\n                isOverrideEmpty = syncStyle.sheet.cssRules.length === 0;\r\n                if (sheetModifier.shouldRebuildStyle()) {\r\n                    addReadyStateCompleteListener(function () { return update(); });\r\n                }\r\n            }\r\n            buildOverrides();\r\n        }\r\n        function getRulesOrError() {\r\n            try {\r\n                if (element.sheet == null) {\r\n                    return [null, null];\r\n                }\r\n                return [element.sheet.cssRules, null];\r\n            }\r\n            catch (err) {\r\n                return [null, err];\r\n            }\r\n        }\r\n        function isStillLoadingError(error) {\r\n            return error && error.message && error.message.includes('loading');\r\n        }\r\n        function safeGetSheetRules() {\r\n            var _a = __read(getRulesOrError(), 2), cssRules = _a[0], err = _a[1];\r\n            if (err) {\r\n                logWarn(err);\r\n                return null;\r\n            }\r\n            return cssRules;\r\n        }\r\n        function watchForSheetChanges() {\r\n            watchForSheetChangesUsingProxy();\r\n            if (!isThunderbird && !(canOptimizeUsingProxy$1 && element.sheet)) {\r\n                watchForSheetChangesUsingRAF();\r\n            }\r\n        }\r\n        var rulesChangeKey = null;\r\n        var rulesCheckFrameId = null;\r\n        function getRulesChangeKey() {\r\n            var rules = safeGetSheetRules();\r\n            return rules ? rules.length : null;\r\n        }\r\n        function didRulesKeyChange() {\r\n            return getRulesChangeKey() !== rulesChangeKey;\r\n        }\r\n        function watchForSheetChangesUsingRAF() {\r\n            rulesChangeKey = getRulesChangeKey();\r\n            stopWatchingForSheetChangesUsingRAF();\r\n            var checkForUpdate = function () {\r\n                if (didRulesKeyChange()) {\r\n                    rulesChangeKey = getRulesChangeKey();\r\n                    update();\r\n                }\r\n                if (canOptimizeUsingProxy$1 && element.sheet) {\r\n                    stopWatchingForSheetChangesUsingRAF();\r\n                    return;\r\n                }\r\n                rulesCheckFrameId = requestAnimationFrame(checkForUpdate);\r\n            };\r\n            checkForUpdate();\r\n        }\r\n        function stopWatchingForSheetChangesUsingRAF() {\r\n            cancelAnimationFrame(rulesCheckFrameId);\r\n        }\r\n        var areSheetChangesPending = false;\r\n        function onSheetChange() {\r\n            canOptimizeUsingProxy$1 = true;\r\n            stopWatchingForSheetChangesUsingRAF();\r\n            if (areSheetChangesPending) {\r\n                return;\r\n            }\r\n            function handleSheetChanges() {\r\n                areSheetChangesPending = false;\r\n                if (cancelAsyncOperations) {\r\n                    return;\r\n                }\r\n                update();\r\n            }\r\n            areSheetChangesPending = true;\r\n            if (typeof queueMicrotask === 'function') {\r\n                queueMicrotask(handleSheetChanges);\r\n            }\r\n            else {\r\n                requestAnimationFrame(handleSheetChanges);\r\n            }\r\n        }\r\n        function watchForSheetChangesUsingProxy() {\r\n            element.addEventListener('__darkreader__updateSheet', onSheetChange);\r\n        }\r\n        function stopWatchingForSheetChangesUsingProxy() {\r\n            element.removeEventListener('__darkreader__updateSheet', onSheetChange);\r\n        }\r\n        function stopWatchingForSheetChanges() {\r\n            stopWatchingForSheetChangesUsingProxy();\r\n            stopWatchingForSheetChangesUsingRAF();\r\n        }\r\n        function pause() {\r\n            observer.disconnect();\r\n            cancelAsyncOperations = true;\r\n            corsCopyPositionWatcher && corsCopyPositionWatcher.stop();\r\n            syncStylePositionWatcher && syncStylePositionWatcher.stop();\r\n            stopWatchingForSheetChanges();\r\n        }\r\n        function destroy() {\r\n            pause();\r\n            removeNode(corsCopy);\r\n            removeNode(syncStyle);\r\n            loadingEnd();\r\n            if (rejectorsForLoadingLinks.has(loadingLinkId)) {\r\n                var reject = rejectorsForLoadingLinks.get(loadingLinkId);\r\n                rejectorsForLoadingLinks.delete(loadingLinkId);\r\n                reject && reject();\r\n            }\r\n        }\r\n        function watch() {\r\n            observer.observe(element, observerOptions);\r\n            if (element instanceof HTMLStyleElement) {\r\n                watchForSheetChanges();\r\n            }\r\n        }\r\n        var maxMoveCount = 10;\r\n        var moveCount = 0;\r\n        function restore() {\r\n            if (!syncStyle) {\r\n                return;\r\n            }\r\n            moveCount++;\r\n            if (moveCount > maxMoveCount) {\r\n                logWarn('Style sheet was moved multiple times', element);\r\n                return;\r\n            }\r\n            logWarn('Restore style', syncStyle, element);\r\n            insertStyle();\r\n            corsCopyPositionWatcher && corsCopyPositionWatcher.skip();\r\n            syncStylePositionWatcher && syncStylePositionWatcher.skip();\r\n            if (!isOverrideEmpty) {\r\n                forceRenderStyle = true;\r\n                update();\r\n            }\r\n        }\r\n        return {\r\n            details: details,\r\n            render: render,\r\n            pause: pause,\r\n            destroy: destroy,\r\n            watch: watch,\r\n            restore: restore,\r\n        };\r\n    }\r\n    function linkLoading(link, loadingId) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2, new Promise(function (resolve, reject) {\r\n                        var cleanUp = function () {\r\n                            link.removeEventListener('load', onLoad);\r\n                            link.removeEventListener('error', onError);\r\n                            rejectorsForLoadingLinks.delete(loadingId);\r\n                        };\r\n                        var onLoad = function () {\r\n                            cleanUp();\r\n                            logInfo(\"Linkelement \" + loadingId + \" has been loaded\");\r\n                            resolve();\r\n                        };\r\n                        var onError = function () {\r\n                            cleanUp();\r\n                            reject(\"Linkelement \" + loadingId + \" couldn't be loaded. \" + link.href);\r\n                        };\r\n                        rejectorsForLoadingLinks.set(loadingId, function () {\r\n                            cleanUp();\r\n                            reject();\r\n                        });\r\n                        link.addEventListener('load', onLoad);\r\n                        link.addEventListener('error', onError);\r\n                        if (!link.href) {\r\n                            onError();\r\n                        }\r\n                    })];\r\n            });\r\n        });\r\n    }\r\n    function getCSSImportURL(importDeclaration) {\r\n        return getCSSURLValue(importDeclaration.substring(7).trim().replace(/;$/, ''));\r\n    }\r\n    function loadText(url) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!url.startsWith('data:')) return [3, 3];\r\n                        return [4, fetch(url)];\r\n                    case 1: return [4, (_a.sent()).text()];\r\n                    case 2: return [2, _a.sent()];\r\n                    case 3: return [4, bgFetch({ url: url, responseType: 'text', mimeType: 'text/css', origin: window.location.origin })];\r\n                    case 4: return [2, _a.sent()];\r\n                }\r\n            });\r\n        });\r\n    }\r\n    function replaceCSSImports(cssText, basePath, cache) {\r\n        if (cache === void 0) { cache = new Map(); }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var importMatches, importMatches_1, importMatches_1_1, match, importURL, absoluteURL, importedCSS, err_3, e_1_1;\r\n            var e_1, _a;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        cssText = removeCSSComments(cssText);\r\n                        cssText = replaceCSSFontFace(cssText);\r\n                        cssText = replaceCSSRelativeURLsWithAbsolute(cssText, basePath);\r\n                        importMatches = getMatches(cssImportRegex, cssText);\r\n                        _b.label = 1;\r\n                    case 1:\r\n                        _b.trys.push([1, 10, 11, 12]);\r\n                        importMatches_1 = __values(importMatches), importMatches_1_1 = importMatches_1.next();\r\n                        _b.label = 2;\r\n                    case 2:\r\n                        if (!!importMatches_1_1.done) return [3, 9];\r\n                        match = importMatches_1_1.value;\r\n                        importURL = getCSSImportURL(match);\r\n                        absoluteURL = getAbsoluteURL(basePath, importURL);\r\n                        importedCSS = void 0;\r\n                        if (!cache.has(absoluteURL)) return [3, 3];\r\n                        importedCSS = cache.get(absoluteURL);\r\n                        return [3, 7];\r\n                    case 3:\r\n                        _b.trys.push([3, 6, , 7]);\r\n                        return [4, loadText(absoluteURL)];\r\n                    case 4:\r\n                        importedCSS = _b.sent();\r\n                        cache.set(absoluteURL, importedCSS);\r\n                        return [4, replaceCSSImports(importedCSS, getCSSBaseBath(absoluteURL), cache)];\r\n                    case 5:\r\n                        importedCSS = _b.sent();\r\n                        return [3, 7];\r\n                    case 6:\r\n                        err_3 = _b.sent();\r\n                        logWarn(err_3);\r\n                        importedCSS = '';\r\n                        return [3, 7];\r\n                    case 7:\r\n                        cssText = cssText.split(match).join(importedCSS);\r\n                        _b.label = 8;\r\n                    case 8:\r\n                        importMatches_1_1 = importMatches_1.next();\r\n                        return [3, 2];\r\n                    case 9: return [3, 12];\r\n                    case 10:\r\n                        e_1_1 = _b.sent();\r\n                        e_1 = { error: e_1_1 };\r\n                        return [3, 12];\r\n                    case 11:\r\n                        try {\r\n                            if (importMatches_1_1 && !importMatches_1_1.done && (_a = importMatches_1.return)) _a.call(importMatches_1);\r\n                        }\r\n                        finally { if (e_1) throw e_1.error; }\r\n                        return [7];\r\n                    case 12:\r\n                        cssText = cssText.trim();\r\n                        return [2, cssText];\r\n                }\r\n            });\r\n        });\r\n    }\r\n    function createCORSCopy(srcElement, cssText) {\r\n        if (!cssText) {\r\n            return null;\r\n        }\r\n        var cors = document.createElement('style');\r\n        cors.classList.add('darkreader');\r\n        cors.classList.add('darkreader--cors');\r\n        cors.media = 'screen';\r\n        cors.textContent = cssText;\r\n        srcElement.parentNode.insertBefore(cors, srcElement.nextSibling);\r\n        cors.sheet.disabled = true;\r\n        corsStyleSet.add(cors);\r\n        return cors;\r\n    }\n\n    var observers = [];\r\n    var observedRoots;\r\n    var undefinedGroups = new Map();\r\n    var elementsDefinitionCallback;\r\n    function collectUndefinedElements(root) {\r\n        if (!isDefinedSelectorSupported) {\r\n            return;\r\n        }\r\n        forEach(root.querySelectorAll(':not(:defined)'), function (el) {\r\n            var tag = el.tagName.toLowerCase();\r\n            if (!tag.includes('-')) {\r\n                var extendedTag = el.getAttribute('is');\r\n                if (extendedTag) {\r\n                    tag = extendedTag;\r\n                }\r\n                else {\r\n                    return;\r\n                }\r\n            }\r\n            if (!undefinedGroups.has(tag)) {\r\n                undefinedGroups.set(tag, new Set());\r\n                customElementsWhenDefined(tag).then(function () {\r\n                    if (elementsDefinitionCallback) {\r\n                        var elements = undefinedGroups.get(tag);\r\n                        undefinedGroups.delete(tag);\r\n                        elementsDefinitionCallback(Array.from(elements));\r\n                    }\r\n                });\r\n            }\r\n            undefinedGroups.get(tag).add(el);\r\n        });\r\n    }\r\n    var canOptimizeUsingProxy = false;\r\n    document.addEventListener('__darkreader__inlineScriptsAllowed', function () {\r\n        canOptimizeUsingProxy = true;\r\n    });\r\n    var resolvers = new Map();\r\n    function handleIsDefined(e) {\r\n        canOptimizeUsingProxy = true;\r\n        if (resolvers.has(e.detail.tag)) {\r\n            var resolve = resolvers.get(e.detail.tag);\r\n            resolve();\r\n        }\r\n    }\r\n    function customElementsWhenDefined(tag) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2, new Promise(function (resolve) {\r\n                        if (window.customElements && typeof customElements.whenDefined === 'function') {\r\n                            customElements.whenDefined(tag).then(function () { return resolve(); });\r\n                        }\r\n                        else if (canOptimizeUsingProxy) {\r\n                            resolvers.set(tag, resolve);\r\n                            document.dispatchEvent(new CustomEvent('__darkreader__addUndefinedResolver', { detail: { tag: tag } }));\r\n                        }\r\n                        else {\r\n                            var checkIfDefined_1 = function () {\r\n                                var elements = undefinedGroups.get(tag);\r\n                                if (elements && elements.size > 0) {\r\n                                    if (elements.values().next().value.matches(':defined')) {\r\n                                        resolve();\r\n                                    }\r\n                                    else {\r\n                                        requestAnimationFrame(checkIfDefined_1);\r\n                                    }\r\n                                }\r\n                            };\r\n                            requestAnimationFrame(checkIfDefined_1);\r\n                        }\r\n                    })];\r\n            });\r\n        });\r\n    }\r\n    function watchWhenCustomElementsDefined(callback) {\r\n        elementsDefinitionCallback = callback;\r\n    }\r\n    function unsubscribeFromDefineCustomElements() {\r\n        elementsDefinitionCallback = null;\r\n        undefinedGroups.clear();\r\n        document.removeEventListener('__darkreader__isDefined', handleIsDefined);\r\n    }\r\n    function watchForStyleChanges(currentStyles, update, shadowRootDiscovered) {\r\n        stopWatchingForStyleChanges();\r\n        var prevStyles = new Set(currentStyles);\r\n        var prevStyleSiblings = new WeakMap();\r\n        var nextStyleSiblings = new WeakMap();\r\n        function saveStylePosition(style) {\r\n            prevStyleSiblings.set(style, style.previousElementSibling);\r\n            nextStyleSiblings.set(style, style.nextElementSibling);\r\n        }\r\n        function forgetStylePosition(style) {\r\n            prevStyleSiblings.delete(style);\r\n            nextStyleSiblings.delete(style);\r\n        }\r\n        function didStylePositionChange(style) {\r\n            return (style.previousElementSibling !== prevStyleSiblings.get(style) ||\r\n                style.nextElementSibling !== nextStyleSiblings.get(style));\r\n        }\r\n        currentStyles.forEach(saveStylePosition);\r\n        function handleStyleOperations(operations) {\r\n            var createdStyles = operations.createdStyles, removedStyles = operations.removedStyles, movedStyles = operations.movedStyles;\r\n            createdStyles.forEach(function (s) { return saveStylePosition(s); });\r\n            movedStyles.forEach(function (s) { return saveStylePosition(s); });\r\n            removedStyles.forEach(function (s) { return forgetStylePosition(s); });\r\n            createdStyles.forEach(function (s) { return prevStyles.add(s); });\r\n            removedStyles.forEach(function (s) { return prevStyles.delete(s); });\r\n            if (createdStyles.size + removedStyles.size + movedStyles.size > 0) {\r\n                update({\r\n                    created: Array.from(createdStyles),\r\n                    removed: Array.from(removedStyles),\r\n                    moved: Array.from(movedStyles),\r\n                    updated: [],\r\n                });\r\n            }\r\n        }\r\n        function handleMinorTreeMutations(_a) {\r\n            var additions = _a.additions, moves = _a.moves, deletions = _a.deletions;\r\n            var createdStyles = new Set();\r\n            var removedStyles = new Set();\r\n            var movedStyles = new Set();\r\n            additions.forEach(function (node) { return getManageableStyles(node).forEach(function (style) { return createdStyles.add(style); }); });\r\n            deletions.forEach(function (node) { return getManageableStyles(node).forEach(function (style) { return removedStyles.add(style); }); });\r\n            moves.forEach(function (node) { return getManageableStyles(node).forEach(function (style) { return movedStyles.add(style); }); });\r\n            handleStyleOperations({ createdStyles: createdStyles, removedStyles: removedStyles, movedStyles: movedStyles });\r\n            additions.forEach(function (n) {\r\n                iterateShadowHosts(n, subscribeForShadowRootChanges);\r\n                collectUndefinedElements(n);\r\n            });\r\n        }\r\n        function handleHugeTreeMutations(root) {\r\n            var styles = new Set(getManageableStyles(root));\r\n            var createdStyles = new Set();\r\n            var removedStyles = new Set();\r\n            var movedStyles = new Set();\r\n            styles.forEach(function (s) {\r\n                if (!prevStyles.has(s)) {\r\n                    createdStyles.add(s);\r\n                }\r\n            });\r\n            prevStyles.forEach(function (s) {\r\n                if (!styles.has(s)) {\r\n                    removedStyles.add(s);\r\n                }\r\n            });\r\n            styles.forEach(function (s) {\r\n                if (!createdStyles.has(s) && !removedStyles.has(s) && didStylePositionChange(s)) {\r\n                    movedStyles.add(s);\r\n                }\r\n            });\r\n            handleStyleOperations({ createdStyles: createdStyles, removedStyles: removedStyles, movedStyles: movedStyles });\r\n            iterateShadowHosts(root, subscribeForShadowRootChanges);\r\n            collectUndefinedElements(root);\r\n        }\r\n        function handleAttributeMutations(mutations) {\r\n            var updatedStyles = new Set();\r\n            var removedStyles = new Set();\r\n            mutations.forEach(function (m) {\r\n                var target = m.target;\r\n                if (target.isConnected) {\r\n                    if (shouldManageStyle(target)) {\r\n                        updatedStyles.add(target);\r\n                    }\r\n                    else if (target instanceof HTMLLinkElement && target.disabled) {\r\n                        removedStyles.add(target);\r\n                    }\r\n                }\r\n            });\r\n            if (updatedStyles.size + removedStyles.size > 0) {\r\n                update({\r\n                    updated: Array.from(updatedStyles),\r\n                    created: [],\r\n                    removed: Array.from(removedStyles),\r\n                    moved: [],\r\n                });\r\n            }\r\n        }\r\n        function observe(root) {\r\n            var treeObserver = createOptimizedTreeObserver(root, {\r\n                onMinorMutations: handleMinorTreeMutations,\r\n                onHugeMutations: handleHugeTreeMutations,\r\n            });\r\n            var attrObserver = new MutationObserver(handleAttributeMutations);\r\n            attrObserver.observe(root, { attributes: true, attributeFilter: ['rel', 'disabled', 'media'], subtree: true });\r\n            observers.push(treeObserver, attrObserver);\r\n            observedRoots.add(root);\r\n        }\r\n        function subscribeForShadowRootChanges(node) {\r\n            var shadowRoot = node.shadowRoot;\r\n            if (shadowRoot == null || observedRoots.has(shadowRoot)) {\r\n                return;\r\n            }\r\n            observe(shadowRoot);\r\n            shadowRootDiscovered(shadowRoot);\r\n        }\r\n        observe(document);\r\n        iterateShadowHosts(document.documentElement, subscribeForShadowRootChanges);\r\n        watchWhenCustomElementsDefined(function (hosts) {\r\n            var newStyles = [];\r\n            hosts.forEach(function (host) { return push(newStyles, getManageableStyles(host.shadowRoot)); });\r\n            update({ created: newStyles, updated: [], removed: [], moved: [] });\r\n            hosts.forEach(function (host) {\r\n                var shadowRoot = host.shadowRoot;\r\n                if (shadowRoot == null) {\r\n                    return;\r\n                }\r\n                subscribeForShadowRootChanges(host);\r\n                iterateShadowHosts(shadowRoot, subscribeForShadowRootChanges);\r\n                collectUndefinedElements(shadowRoot);\r\n            });\r\n        });\r\n        document.addEventListener('__darkreader__isDefined', handleIsDefined);\r\n        collectUndefinedElements(document);\r\n    }\r\n    function resetObservers() {\r\n        observers.forEach(function (o) { return o.disconnect(); });\r\n        observers.splice(0, observers.length);\r\n        observedRoots = new WeakSet();\r\n    }\r\n    function stopWatchingForStyleChanges() {\r\n        resetObservers();\r\n        unsubscribeFromDefineCustomElements();\r\n    }\n\n    function hexify(number) {\r\n        return ((number < 16 ? '0' : '') + number.toString(16));\r\n    }\r\n    function generateUID() {\r\n        if ('randomUUID' in crypto) {\r\n            var uuid = crypto.randomUUID();\r\n            return uuid.substring(0, 8) + uuid.substring(9, 13) + uuid.substring(14, 18) + uuid.substring(19, 23) + uuid.substring(24);\r\n        }\r\n        return Array.from(crypto.getRandomValues(new Uint8Array(16))).map(function (x) { return hexify(x); }).join('');\r\n    }\n\n    var adoptedStyleOverrides = new WeakMap();\r\n    var overrideList = new WeakSet();\r\n    function createAdoptedStyleSheetOverride(node) {\r\n        var cancelAsyncOperations = false;\r\n        function injectSheet(sheet, override) {\r\n            var newSheets = __spreadArray([], __read(node.adoptedStyleSheets), false);\r\n            var sheetIndex = newSheets.indexOf(sheet);\r\n            var existingIndex = newSheets.indexOf(override);\r\n            if (sheetIndex === existingIndex - 1) {\r\n                return;\r\n            }\r\n            if (existingIndex >= 0) {\r\n                newSheets.splice(existingIndex, 1);\r\n            }\r\n            newSheets.splice(sheetIndex + 1, 0, override);\r\n            node.adoptedStyleSheets = newSheets;\r\n        }\r\n        function destroy() {\r\n            cancelAsyncOperations = true;\r\n            var newSheets = __spreadArray([], __read(node.adoptedStyleSheets), false);\r\n            node.adoptedStyleSheets.forEach(function (adoptedStyleSheet) {\r\n                if (overrideList.has(adoptedStyleSheet)) {\r\n                    var existingIndex = newSheets.indexOf(adoptedStyleSheet);\r\n                    if (existingIndex >= 0) {\r\n                        newSheets.splice(existingIndex, 1);\r\n                    }\r\n                    adoptedStyleOverrides.delete(adoptedStyleSheet);\r\n                    overrideList.delete(adoptedStyleSheet);\r\n                }\r\n            });\r\n            node.adoptedStyleSheets = newSheets;\r\n        }\r\n        function render(theme, ignoreImageAnalysis) {\r\n            node.adoptedStyleSheets.forEach(function (sheet) {\r\n                if (overrideList.has(sheet)) {\r\n                    return;\r\n                }\r\n                var rules = sheet.rules;\r\n                var override = new CSSStyleSheet();\r\n                function prepareOverridesSheet() {\r\n                    for (var i = override.cssRules.length - 1; i >= 0; i--) {\r\n                        override.deleteRule(i);\r\n                    }\r\n                    injectSheet(sheet, override);\r\n                    adoptedStyleOverrides.set(sheet, override);\r\n                    overrideList.add(override);\r\n                    return override;\r\n                }\r\n                var sheetModifier = createStyleSheetModifier();\r\n                sheetModifier.modifySheet({\r\n                    prepareSheet: prepareOverridesSheet,\r\n                    sourceCSSRules: rules,\r\n                    theme: theme,\r\n                    ignoreImageAnalysis: ignoreImageAnalysis,\r\n                    force: false,\r\n                    isAsyncCancelled: function () { return cancelAsyncOperations; },\r\n                });\r\n            });\r\n        }\r\n        return {\r\n            render: render,\r\n            destroy: destroy\r\n        };\r\n    }\n\n    function injectProxy() {\r\n        document.dispatchEvent(new CustomEvent('__darkreader__inlineScriptsAllowed'));\r\n        var addRuleDescriptor = Object.getOwnPropertyDescriptor(CSSStyleSheet.prototype, 'addRule');\r\n        var insertRuleDescriptor = Object.getOwnPropertyDescriptor(CSSStyleSheet.prototype, 'insertRule');\r\n        var deleteRuleDescriptor = Object.getOwnPropertyDescriptor(CSSStyleSheet.prototype, 'deleteRule');\r\n        var removeRuleDescriptor = Object.getOwnPropertyDescriptor(CSSStyleSheet.prototype, 'removeRule');\r\n        var documentStyleSheetsDescriptor = Object.getOwnPropertyDescriptor(Document.prototype, 'styleSheets');\r\n        var shouldWrapHTMLElement = location.hostname.endsWith('baidu.com');\r\n        var getElementsByTagNameDescriptor = shouldWrapHTMLElement ?\r\n            Object.getOwnPropertyDescriptor(Element.prototype, 'getElementsByTagName') : null;\r\n        var cleanUp = function () {\r\n            Object.defineProperty(CSSStyleSheet.prototype, 'addRule', addRuleDescriptor);\r\n            Object.defineProperty(CSSStyleSheet.prototype, 'insertRule', insertRuleDescriptor);\r\n            Object.defineProperty(CSSStyleSheet.prototype, 'deleteRule', deleteRuleDescriptor);\r\n            Object.defineProperty(CSSStyleSheet.prototype, 'removeRule', removeRuleDescriptor);\r\n            document.removeEventListener('__darkreader__cleanUp', cleanUp);\r\n            document.removeEventListener('__darkreader__addUndefinedResolver', addUndefinedResolver);\r\n            Object.defineProperty(Document.prototype, 'styleSheets', documentStyleSheetsDescriptor);\r\n            if (shouldWrapHTMLElement) {\r\n                Object.defineProperty(Element.prototype, 'getElementsByTagName', getElementsByTagNameDescriptor);\r\n            }\r\n        };\r\n        var addUndefinedResolver = function (e) {\r\n            customElements.whenDefined(e.detail.tag).then(function () {\r\n                document.dispatchEvent(new CustomEvent('__darkreader__isDefined', { detail: { tag: e.detail.tag } }));\r\n            });\r\n        };\r\n        document.addEventListener('__darkreader__cleanUp', cleanUp);\r\n        document.addEventListener('__darkreader__addUndefinedResolver', addUndefinedResolver);\r\n        var updateSheetEvent = new Event('__darkreader__updateSheet');\r\n        function proxyAddRule(selector, style, index) {\r\n            addRuleDescriptor.value.call(this, selector, style, index);\r\n            if (this.ownerNode && !this.ownerNode.classList.contains('darkreader')) {\r\n                this.ownerNode.dispatchEvent(updateSheetEvent);\r\n            }\r\n            return -1;\r\n        }\r\n        function proxyInsertRule(rule, index) {\r\n            var returnValue = insertRuleDescriptor.value.call(this, rule, index);\r\n            if (this.ownerNode && !this.ownerNode.classList.contains('darkreader')) {\r\n                this.ownerNode.dispatchEvent(updateSheetEvent);\r\n            }\r\n            return returnValue;\r\n        }\r\n        function proxyDeleteRule(index) {\r\n            deleteRuleDescriptor.value.call(this, index);\r\n            if (this.ownerNode && !this.ownerNode.classList.contains('darkreader')) {\r\n                this.ownerNode.dispatchEvent(updateSheetEvent);\r\n            }\r\n        }\r\n        function proxyRemoveRule(index) {\r\n            removeRuleDescriptor.value.call(this, index);\r\n            if (this.ownerNode && !this.ownerNode.classList.contains('darkreader')) {\r\n                this.ownerNode.dispatchEvent(updateSheetEvent);\r\n            }\r\n        }\r\n        function proxyDocumentStyleSheets() {\r\n            var docSheets = documentStyleSheetsDescriptor.get.call(this);\r\n            var filtered = __spreadArray([], __read(docSheets), false).filter(function (styleSheet) {\r\n                return !styleSheet.ownerNode.classList.contains('darkreader');\r\n            });\r\n            return Object.setPrototypeOf(filtered, StyleSheetList.prototype);\r\n        }\r\n        function proxyGetElementsByTagName(tagName) {\r\n            var _this = this;\r\n            var getCurrentElementValue = function () {\r\n                var elements = getElementsByTagNameDescriptor.value.call(_this, tagName);\r\n                if (tagName === 'style') {\r\n                    elements = Object.setPrototypeOf(__spreadArray([], __read(elements), false).filter(function (element) {\r\n                        return !element.classList.contains('darkreader');\r\n                    }), NodeList.prototype);\r\n                }\r\n                return elements;\r\n            };\r\n            var elements = getCurrentElementValue();\r\n            var NodeListBehavior = {\r\n                get: function (_, property) {\r\n                    return getCurrentElementValue()[Number(property)];\r\n                }\r\n            };\r\n            elements = new Proxy(elements, NodeListBehavior);\r\n            return elements;\r\n        }\r\n        Object.defineProperty(CSSStyleSheet.prototype, 'addRule', Object.assign({}, addRuleDescriptor, { value: proxyAddRule }));\r\n        Object.defineProperty(CSSStyleSheet.prototype, 'insertRule', Object.assign({}, insertRuleDescriptor, { value: proxyInsertRule }));\r\n        Object.defineProperty(CSSStyleSheet.prototype, 'deleteRule', Object.assign({}, deleteRuleDescriptor, { value: proxyDeleteRule }));\r\n        Object.defineProperty(CSSStyleSheet.prototype, 'removeRule', Object.assign({}, removeRuleDescriptor, { value: proxyRemoveRule }));\r\n        Object.defineProperty(Document.prototype, 'styleSheets', Object.assign({}, documentStyleSheetsDescriptor, { get: proxyDocumentStyleSheets }));\r\n        if (shouldWrapHTMLElement) {\r\n            Object.defineProperty(Element.prototype, 'getElementsByTagName', Object.assign({}, getElementsByTagNameDescriptor, { value: proxyGetElementsByTagName }));\r\n        }\r\n    }\n\n    var INSTANCE_ID = generateUID();\r\n    var styleManagers = new Map();\r\n    var adoptedStyleManagers = [];\r\n    var filter = null;\r\n    var fixes = null;\r\n    var isIFrame$1 = null;\r\n    var ignoredImageAnalysisSelectors = null;\r\n    var ignoredInlineSelectors = null;\r\n    function createOrUpdateStyle(className, root) {\r\n        if (root === void 0) { root = document.head || document; }\r\n        var element = root.querySelector(\".\" + className);\r\n        if (!element) {\r\n            element = document.createElement('style');\r\n            element.classList.add('darkreader');\r\n            element.classList.add(className);\r\n            element.media = 'screen';\r\n            element.textContent = '';\r\n        }\r\n        return element;\r\n    }\r\n    function createOrUpdateScript(className, root) {\r\n        if (root === void 0) { root = document.head || document; }\r\n        var element = root.querySelector(\".\" + className);\r\n        if (!element) {\r\n            element = document.createElement('script');\r\n            element.classList.add('darkreader');\r\n            element.classList.add(className);\r\n        }\r\n        return element;\r\n    }\r\n    var nodePositionWatchers = new Map();\r\n    function setupNodePositionWatcher(node, alias) {\r\n        nodePositionWatchers.has(alias) && nodePositionWatchers.get(alias).stop();\r\n        nodePositionWatchers.set(alias, watchForNodePosition(node, 'parent'));\r\n    }\r\n    function stopStylePositionWatchers() {\r\n        forEach(nodePositionWatchers.values(), function (watcher) { return watcher.stop(); });\r\n        nodePositionWatchers.clear();\r\n    }\r\n    function createStaticStyleOverrides() {\r\n        var fallbackStyle = createOrUpdateStyle('darkreader--fallback', document);\r\n        fallbackStyle.textContent = getModifiedFallbackStyle(filter, { strict: true });\r\n        document.head.insertBefore(fallbackStyle, document.head.firstChild);\r\n        setupNodePositionWatcher(fallbackStyle, 'fallback');\r\n        var userAgentStyle = createOrUpdateStyle('darkreader--user-agent');\r\n        userAgentStyle.textContent = getModifiedUserAgentStyle(filter, isIFrame$1, filter.styleSystemControls);\r\n        document.head.insertBefore(userAgentStyle, fallbackStyle.nextSibling);\r\n        setupNodePositionWatcher(userAgentStyle, 'user-agent');\r\n        var textStyle = createOrUpdateStyle('darkreader--text');\r\n        if (filter.useFont || filter.textStroke > 0) {\r\n            textStyle.textContent = createTextStyle(filter);\r\n        }\r\n        else {\r\n            textStyle.textContent = '';\r\n        }\r\n        document.head.insertBefore(textStyle, fallbackStyle.nextSibling);\r\n        setupNodePositionWatcher(textStyle, 'text');\r\n        var invertStyle = createOrUpdateStyle('darkreader--invert');\r\n        if (fixes && Array.isArray(fixes.invert) && fixes.invert.length > 0) {\r\n            invertStyle.textContent = [\r\n                fixes.invert.join(', ') + \" {\",\r\n                \"    filter: \" + getCSSFilterValue(__assign(__assign({}, filter), { contrast: filter.mode === 0 ? filter.contrast : clamp(filter.contrast - 10, 0, 100) })) + \" !important;\",\r\n                '}',\r\n            ].join('\\n');\r\n        }\r\n        else {\r\n            invertStyle.textContent = '';\r\n        }\r\n        document.head.insertBefore(invertStyle, textStyle.nextSibling);\r\n        setupNodePositionWatcher(invertStyle, 'invert');\r\n        var inlineStyle = createOrUpdateStyle('darkreader--inline');\r\n        inlineStyle.textContent = getInlineOverrideStyle();\r\n        document.head.insertBefore(inlineStyle, invertStyle.nextSibling);\r\n        setupNodePositionWatcher(inlineStyle, 'inline');\r\n        var overrideStyle = createOrUpdateStyle('darkreader--override');\r\n        overrideStyle.textContent = fixes && fixes.css ? replaceCSSTemplates(fixes.css) : '';\r\n        document.head.appendChild(overrideStyle);\r\n        setupNodePositionWatcher(overrideStyle, 'override');\r\n        var variableStyle = createOrUpdateStyle('darkreader--variables');\r\n        var selectionColors = getSelectionColor(filter);\r\n        var darkSchemeBackgroundColor = filter.darkSchemeBackgroundColor, darkSchemeTextColor = filter.darkSchemeTextColor, lightSchemeBackgroundColor = filter.lightSchemeBackgroundColor, lightSchemeTextColor = filter.lightSchemeTextColor, mode = filter.mode;\r\n        var schemeBackgroundColor = mode === 0 ? lightSchemeBackgroundColor : darkSchemeBackgroundColor;\r\n        var schemeTextColor = mode === 0 ? lightSchemeTextColor : darkSchemeTextColor;\r\n        schemeBackgroundColor = modifyBackgroundColor(parse(schemeBackgroundColor), filter);\r\n        schemeTextColor = modifyForegroundColor(parse(schemeTextColor), filter);\r\n        variableStyle.textContent = [\r\n            \":root {\",\r\n            \"   --darkreader-neutral-background: \" + schemeBackgroundColor + \";\",\r\n            \"   --darkreader-neutral-text: \" + schemeTextColor + \";\",\r\n            \"   --darkreader-selection-background: \" + selectionColors.backgroundColorSelection + \";\",\r\n            \"   --darkreader-selection-text: \" + selectionColors.foregroundColorSelection + \";\",\r\n            \"}\"\r\n        ].join('\\n');\r\n        document.head.insertBefore(variableStyle, inlineStyle.nextSibling);\r\n        setupNodePositionWatcher(variableStyle, 'variables');\r\n        var rootVarsStyle = createOrUpdateStyle('darkreader--root-vars');\r\n        document.head.insertBefore(rootVarsStyle, variableStyle.nextSibling);\r\n        var proxyScript = createOrUpdateScript('darkreader--proxy');\r\n        proxyScript.append(\"(\" + injectProxy + \")()\");\r\n        document.head.insertBefore(proxyScript, rootVarsStyle.nextSibling);\r\n        proxyScript.remove();\r\n    }\r\n    var shadowRootsWithOverrides = new Set();\r\n    function createShadowStaticStyleOverrides(root) {\r\n        var inlineStyle = createOrUpdateStyle('darkreader--inline', root);\r\n        inlineStyle.textContent = getInlineOverrideStyle();\r\n        root.insertBefore(inlineStyle, root.firstChild);\r\n        var overrideStyle = createOrUpdateStyle('darkreader--override', root);\r\n        overrideStyle.textContent = fixes && fixes.css ? replaceCSSTemplates(fixes.css) : '';\r\n        root.insertBefore(overrideStyle, inlineStyle.nextSibling);\r\n        var invertStyle = createOrUpdateStyle('darkreader--invert', root);\r\n        if (fixes && Array.isArray(fixes.invert) && fixes.invert.length > 0) {\r\n            invertStyle.textContent = [\r\n                fixes.invert.join(', ') + \" {\",\r\n                \"    filter: \" + getCSSFilterValue(__assign(__assign({}, filter), { contrast: filter.mode === 0 ? filter.contrast : clamp(filter.contrast - 10, 0, 100) })) + \" !important;\",\r\n                '}',\r\n            ].join('\\n');\r\n        }\r\n        else {\r\n            invertStyle.textContent = '';\r\n        }\r\n        root.insertBefore(invertStyle, overrideStyle.nextSibling);\r\n        shadowRootsWithOverrides.add(root);\r\n    }\r\n    function replaceCSSTemplates($cssText) {\r\n        return $cssText.replace(/\\${(.+?)}/g, function (_, $color) {\r\n            var color = tryParseColor($color);\r\n            if (color) {\r\n                return modifyColor(color, filter);\r\n            }\r\n            logWarn(\"Couldn't parse CSSTemplate's color.\");\r\n            return $color;\r\n        });\r\n    }\r\n    function cleanFallbackStyle() {\r\n        var fallback = document.querySelector('.darkreader--fallback');\r\n        if (fallback) {\r\n            fallback.textContent = '';\r\n        }\r\n    }\r\n    function createDynamicStyleOverrides() {\r\n        cancelRendering();\r\n        var allStyles = getManageableStyles(document);\r\n        var newManagers = allStyles\r\n            .filter(function (style) { return !styleManagers.has(style); })\r\n            .map(function (style) { return createManager(style); });\r\n        newManagers\r\n            .map(function (manager) { return manager.details(); })\r\n            .filter(function (detail) { return detail && detail.rules.length > 0; })\r\n            .forEach(function (detail) {\r\n            variablesStore.addRulesForMatching(detail.rules);\r\n        });\r\n        variablesStore.matchVariablesAndDependants();\r\n        variablesStore.setOnRootVariableChange(function () {\r\n            variablesStore.putRootVars(document.head.querySelector('.darkreader--root-vars'), filter);\r\n        });\r\n        variablesStore.putRootVars(document.head.querySelector('.darkreader--root-vars'), filter);\r\n        styleManagers.forEach(function (manager) { return manager.render(filter, ignoredImageAnalysisSelectors); });\r\n        if (loadingStyles.size === 0) {\r\n            cleanFallbackStyle();\r\n        }\r\n        newManagers.forEach(function (manager) { return manager.watch(); });\r\n        var inlineStyleElements = toArray(document.querySelectorAll(INLINE_STYLE_SELECTOR));\r\n        iterateShadowHosts(document.documentElement, function (host) {\r\n            createShadowStaticStyleOverrides(host.shadowRoot);\r\n            var elements = host.shadowRoot.querySelectorAll(INLINE_STYLE_SELECTOR);\r\n            if (elements.length > 0) {\r\n                push(inlineStyleElements, elements);\r\n            }\r\n        });\r\n        inlineStyleElements.forEach(function (el) { return overrideInlineStyle(el, filter, ignoredInlineSelectors, ignoredImageAnalysisSelectors); });\r\n        handleAdoptedStyleSheets(document);\r\n    }\r\n    var loadingStylesCounter = 0;\r\n    var loadingStyles = new Set();\r\n    function createManager(element) {\r\n        var loadingStyleId = ++loadingStylesCounter;\r\n        logInfo(\"New manager for element, with loadingStyleID \" + loadingStyleId, element);\r\n        function loadingStart() {\r\n            if (!isDOMReady() || !didDocumentShowUp) {\r\n                loadingStyles.add(loadingStyleId);\r\n                logInfo(\"Current amount of styles loading: \" + loadingStyles.size);\r\n                var fallbackStyle = document.querySelector('.darkreader--fallback');\r\n                if (!fallbackStyle.textContent) {\r\n                    fallbackStyle.textContent = getModifiedFallbackStyle(filter, { strict: false });\r\n                }\r\n            }\r\n        }\r\n        function loadingEnd() {\r\n            loadingStyles.delete(loadingStyleId);\r\n            logInfo(\"Removed loadingStyle \" + loadingStyleId + \", now awaiting: \" + loadingStyles.size);\r\n            logInfo(\"To-do to be loaded\", loadingStyles);\r\n            if (loadingStyles.size === 0 && isDOMReady()) {\r\n                cleanFallbackStyle();\r\n            }\r\n        }\r\n        function update() {\r\n            var details = manager.details();\r\n            if (!details) {\r\n                return;\r\n            }\r\n            variablesStore.addRulesForMatching(details.rules);\r\n            variablesStore.matchVariablesAndDependants();\r\n            manager.render(filter, ignoredImageAnalysisSelectors);\r\n        }\r\n        var manager = manageStyle(element, { update: update, loadingStart: loadingStart, loadingEnd: loadingEnd });\r\n        styleManagers.set(element, manager);\r\n        return manager;\r\n    }\r\n    function removeManager(element) {\r\n        var manager = styleManagers.get(element);\r\n        if (manager) {\r\n            manager.destroy();\r\n            styleManagers.delete(element);\r\n        }\r\n    }\r\n    var throttledRenderAllStyles = throttle(function (callback) {\r\n        styleManagers.forEach(function (manager) { return manager.render(filter, ignoredImageAnalysisSelectors); });\r\n        adoptedStyleManagers.forEach(function (manager) { return manager.render(filter, ignoredImageAnalysisSelectors); });\r\n        callback && callback();\r\n    });\r\n    var cancelRendering = function () {\r\n        throttledRenderAllStyles.cancel();\r\n    };\r\n    function onDOMReady() {\r\n        if (loadingStyles.size === 0) {\r\n            cleanFallbackStyle();\r\n            return;\r\n        }\r\n        logWarn(\"DOM is ready, but still have styles being loaded.\", loadingStyles);\r\n    }\r\n    var documentVisibilityListener = null;\r\n    var didDocumentShowUp = !document.hidden;\r\n    function watchForDocumentVisibility(callback) {\r\n        var alreadyWatching = Boolean(documentVisibilityListener);\r\n        documentVisibilityListener = function () {\r\n            if (!document.hidden) {\r\n                stopWatchingForDocumentVisibility();\r\n                callback();\r\n                didDocumentShowUp = true;\r\n            }\r\n        };\r\n        if (!alreadyWatching) {\r\n            document.addEventListener('visibilitychange', documentVisibilityListener);\r\n        }\r\n    }\r\n    function stopWatchingForDocumentVisibility() {\r\n        document.removeEventListener('visibilitychange', documentVisibilityListener);\r\n        documentVisibilityListener = null;\r\n    }\r\n    function createThemeAndWatchForUpdates() {\r\n        createStaticStyleOverrides();\r\n        function runDynamicStyle() {\r\n            createDynamicStyleOverrides();\r\n            watchForUpdates();\r\n        }\r\n        if (document.hidden) {\r\n            watchForDocumentVisibility(runDynamicStyle);\r\n        }\r\n        else {\r\n            runDynamicStyle();\r\n        }\r\n        changeMetaThemeColorWhenAvailable(filter);\r\n    }\r\n    function handleAdoptedStyleSheets(node) {\r\n        if (Array.isArray(node.adoptedStyleSheets)) {\r\n            if (node.adoptedStyleSheets.length > 0) {\r\n                var newManger = createAdoptedStyleSheetOverride(node);\r\n                adoptedStyleManagers.push(newManger);\r\n                newManger.render(filter, ignoredImageAnalysisSelectors);\r\n            }\r\n        }\r\n    }\r\n    function watchForUpdates() {\r\n        var managedStyles = Array.from(styleManagers.keys());\r\n        watchForStyleChanges(managedStyles, function (_a) {\r\n            var created = _a.created, updated = _a.updated, removed = _a.removed, moved = _a.moved;\r\n            var stylesToRemove = removed;\r\n            var stylesToManage = created.concat(updated).concat(moved)\r\n                .filter(function (style) { return !styleManagers.has(style); });\r\n            var stylesToRestore = moved\r\n                .filter(function (style) { return styleManagers.has(style); });\r\n            logInfo(\"Styles to be removed:\", stylesToRemove);\r\n            stylesToRemove.forEach(function (style) { return removeManager(style); });\r\n            var newManagers = stylesToManage\r\n                .map(function (style) { return createManager(style); });\r\n            newManagers\r\n                .map(function (manager) { return manager.details(); })\r\n                .filter(function (detail) { return detail && detail.rules.length > 0; })\r\n                .forEach(function (detail) {\r\n                variablesStore.addRulesForMatching(detail.rules);\r\n            });\r\n            variablesStore.matchVariablesAndDependants();\r\n            newManagers.forEach(function (manager) { return manager.render(filter, ignoredImageAnalysisSelectors); });\r\n            newManagers.forEach(function (manager) { return manager.watch(); });\r\n            stylesToRestore.forEach(function (style) { return styleManagers.get(style).restore(); });\r\n        }, function (shadowRoot) {\r\n            createShadowStaticStyleOverrides(shadowRoot);\r\n            handleAdoptedStyleSheets(shadowRoot);\r\n        });\r\n        watchForInlineStyles(function (element) {\r\n            overrideInlineStyle(element, filter, ignoredInlineSelectors, ignoredImageAnalysisSelectors);\r\n            if (element === document.documentElement) {\r\n                var styleAttr = element.getAttribute('style');\r\n                if (styleAttr.includes('--')) {\r\n                    variablesStore.matchVariablesAndDependants();\r\n                    variablesStore.putRootVars(document.head.querySelector('.darkreader--root-vars'), filter);\r\n                }\r\n            }\r\n        }, function (root) {\r\n            createShadowStaticStyleOverrides(root);\r\n            var inlineStyleElements = root.querySelectorAll(INLINE_STYLE_SELECTOR);\r\n            if (inlineStyleElements.length > 0) {\r\n                forEach(inlineStyleElements, function (el) { return overrideInlineStyle(el, filter, ignoredInlineSelectors, ignoredImageAnalysisSelectors); });\r\n            }\r\n        });\r\n        addDOMReadyListener(onDOMReady);\r\n    }\r\n    function stopWatchingForUpdates() {\r\n        styleManagers.forEach(function (manager) { return manager.pause(); });\r\n        stopStylePositionWatchers();\r\n        stopWatchingForStyleChanges();\r\n        stopWatchingForInlineStyles();\r\n        removeDOMReadyListener(onDOMReady);\r\n        cleanReadyStateCompleteListeners();\r\n    }\r\n    function createDarkReaderInstanceMarker() {\r\n        var metaElement = document.createElement('meta');\r\n        metaElement.name = 'darkreader';\r\n        metaElement.content = INSTANCE_ID;\r\n        document.head.appendChild(metaElement);\r\n    }\r\n    function isAnotherDarkReaderInstanceActive() {\r\n        var meta = document.querySelector('meta[name=\"darkreader\"]');\r\n        if (meta) {\r\n            if (meta.content !== INSTANCE_ID) {\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n        createDarkReaderInstanceMarker();\r\n        return false;\r\n    }\r\n    function createOrUpdateDynamicTheme(filterConfig, dynamicThemeFixes, iframe) {\r\n        filter = filterConfig;\r\n        fixes = dynamicThemeFixes;\r\n        if (fixes) {\r\n            ignoredImageAnalysisSelectors = Array.isArray(fixes.ignoreImageAnalysis) ? fixes.ignoreImageAnalysis : [];\r\n            ignoredInlineSelectors = Array.isArray(fixes.ignoreInlineStyle) ? fixes.ignoreInlineStyle : [];\r\n        }\r\n        else {\r\n            ignoredImageAnalysisSelectors = [];\r\n            ignoredInlineSelectors = [];\r\n        }\r\n        isIFrame$1 = iframe;\r\n        if (document.head) {\r\n            if (isAnotherDarkReaderInstanceActive()) {\r\n                return;\r\n            }\r\n            document.documentElement.setAttribute('data-darkreader-mode', 'dynamic');\r\n            document.documentElement.setAttribute('data-darkreader-scheme', filter.mode ? 'dark' : 'dimmed');\r\n            createThemeAndWatchForUpdates();\r\n        }\r\n        else {\r\n            if (!isFirefox) {\r\n                var fallbackStyle = createOrUpdateStyle('darkreader--fallback');\r\n                document.documentElement.appendChild(fallbackStyle);\r\n                fallbackStyle.textContent = getModifiedFallbackStyle(filter, { strict: true });\r\n            }\r\n            var headObserver_1 = new MutationObserver(function () {\r\n                if (document.head) {\r\n                    headObserver_1.disconnect();\r\n                    if (isAnotherDarkReaderInstanceActive()) {\r\n                        removeDynamicTheme();\r\n                        return;\r\n                    }\r\n                    createThemeAndWatchForUpdates();\r\n                }\r\n            });\r\n            headObserver_1.observe(document, { childList: true, subtree: true });\r\n        }\r\n    }\r\n    function removeProxy() {\r\n        document.dispatchEvent(new CustomEvent('__darkreader__cleanUp'));\r\n        removeNode(document.head.querySelector('.darkreader--proxy'));\r\n    }\r\n    function removeDynamicTheme() {\r\n        document.documentElement.removeAttribute(\"data-darkreader-mode\");\r\n        document.documentElement.removeAttribute(\"data-darkreader-scheme\");\r\n        cleanDynamicThemeCache();\r\n        removeNode(document.querySelector('.darkreader--fallback'));\r\n        if (document.head) {\r\n            restoreMetaThemeColor();\r\n            removeNode(document.head.querySelector('.darkreader--user-agent'));\r\n            removeNode(document.head.querySelector('.darkreader--text'));\r\n            removeNode(document.head.querySelector('.darkreader--invert'));\r\n            removeNode(document.head.querySelector('.darkreader--inline'));\r\n            removeNode(document.head.querySelector('.darkreader--override'));\r\n            removeNode(document.head.querySelector('.darkreader--variables'));\r\n            removeNode(document.head.querySelector('.darkreader--root-vars'));\r\n            removeNode(document.head.querySelector('meta[name=\"darkreader\"]'));\r\n            removeProxy();\r\n        }\r\n        shadowRootsWithOverrides.forEach(function (root) {\r\n            removeNode(root.querySelector('.darkreader--inline'));\r\n            removeNode(root.querySelector('.darkreader--override'));\r\n        });\r\n        shadowRootsWithOverrides.clear();\r\n        forEach(styleManagers.keys(), function (el) { return removeManager(el); });\r\n        loadingStyles.clear();\r\n        cleanLoadingLinks();\r\n        forEach(document.querySelectorAll('.darkreader'), removeNode);\r\n        adoptedStyleManagers.forEach(function (manager) {\r\n            manager.destroy();\r\n        });\r\n        adoptedStyleManagers.splice(0);\r\n    }\r\n    function cleanDynamicThemeCache() {\r\n        variablesStore.clear();\r\n        parsedURLCache.clear();\r\n        stopWatchingForDocumentVisibility();\r\n        cancelRendering();\r\n        stopWatchingForUpdates();\r\n        cleanModificationCache();\r\n    }\n\n    var blobRegex = /url\\(\\\"(blob\\:.*?)\\\"\\)/g;\r\n    function replaceBlobs(text) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var promises, data;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        promises = [];\r\n                        getMatches(blobRegex, text, 1).forEach(function (url) {\r\n                            var promise = loadAsDataURL(url);\r\n                            promises.push(promise);\r\n                        });\r\n                        return [4, Promise.all(promises)];\r\n                    case 1:\r\n                        data = _a.sent();\r\n                        return [2, text.replace(blobRegex, function () { return \"url(\\\"\" + data.shift() + \"\\\")\"; })];\r\n                }\r\n            });\r\n        });\r\n    }\r\n    var banner = \"/*\\n                        _______\\n                       /       \\\\\\n                      .==.    .==.\\n                     ((  ))==((  ))\\n                    / \\\"==\\\"    \\\"==\\\"\\\\\\n                   /____|| || ||___\\\\\\n       ________     ____    ________  ___    ___\\n       |  ___  \\\\   /    \\\\   |  ___  \\\\ |  |  /  /\\n       |  |  \\\\  \\\\ /  /\\\\  \\\\  |  |  \\\\  \\\\|  |_/  /\\n       |  |   )  /  /__\\\\  \\\\ |  |__/  /|  ___  \\\\\\n       |  |__/  /  ______  \\\\|  ____  \\\\|  |  \\\\  \\\\\\n_______|_______/__/ ____ \\\\__\\\\__|___\\\\__\\\\__|___\\\\__\\\\____\\n|  ___  \\\\ |  ____/ /    \\\\   |  ___  \\\\ |  ____|  ___  \\\\\\n|  |  \\\\  \\\\|  |___ /  /\\\\  \\\\  |  |  \\\\  \\\\|  |___|  |  \\\\  \\\\\\n|  |__/  /|  ____/  /__\\\\  \\\\ |  |   )  |  ____|  |__/  /\\n|  ____  \\\\|  |__/  ______  \\\\|  |__/  /|  |___|  ____  \\\\\\n|__|   \\\\__\\\\____/__/      \\\\__\\\\_______/ |______|__|   \\\\__\\\\\\n                https://darkreader.org\\n*/\\n\\n/*! Dark reader generated CSS | Licensed under MIT https://github.com/darkreader/darkreader/blob/master/LICENSE */\\n\";\r\n    function collectCSS() {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            function addStaticCSS(selector, comment) {\r\n                var staticStyle = document.querySelector(selector);\r\n                if (staticStyle && staticStyle.textContent) {\r\n                    css.push(\"/* \" + comment + \" */\");\r\n                    css.push(staticStyle.textContent);\r\n                    css.push('');\r\n                }\r\n            }\r\n            var css, modifiedCSS, formattedCSS, _a, _b;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0:\r\n                        css = [banner];\r\n                        addStaticCSS('.darkreader--fallback', 'Fallback Style');\r\n                        addStaticCSS('.darkreader--user-agent', 'User-Agent Style');\r\n                        addStaticCSS('.darkreader--text', 'Text Style');\r\n                        addStaticCSS('.darkreader--invert', 'Invert Style');\r\n                        addStaticCSS('.darkreader--variables', 'Variables Style');\r\n                        modifiedCSS = [];\r\n                        document.querySelectorAll('.darkreader--sync').forEach(function (element) {\r\n                            forEach(element.sheet.cssRules, function (rule) {\r\n                                rule && rule.cssText && modifiedCSS.push(rule.cssText);\r\n                            });\r\n                        });\r\n                        if (!modifiedCSS.length) return [3, 2];\r\n                        formattedCSS = formatCSS(modifiedCSS.join('\\n'));\r\n                        css.push('/* Modified CSS */');\r\n                        _b = (_a = css).push;\r\n                        return [4, replaceBlobs(formattedCSS)];\r\n                    case 1:\r\n                        _b.apply(_a, [_c.sent()]);\r\n                        css.push('');\r\n                        _c.label = 2;\r\n                    case 2:\r\n                        addStaticCSS('.darkreader--override', 'Override Style');\r\n                        return [2, css.join('\\n')];\r\n                }\r\n            });\r\n        });\r\n    }\n\n    var isDarkReaderEnabled = false;\r\n    var isIFrame = (function () {\r\n        try {\r\n            return window.self !== window.top;\r\n        }\r\n        catch (err) {\r\n            console.warn(err);\r\n            return true;\r\n        }\r\n    })();\r\n    function enable(themeOptions, fixes) {\r\n        if (themeOptions === void 0) { themeOptions = {}; }\r\n        if (fixes === void 0) { fixes = null; }\r\n        var theme = __assign(__assign({}, DEFAULT_THEME), themeOptions);\r\n        if (theme.engine !== ThemeEngines.dynamicTheme) {\r\n            throw new Error('Theme engine is not supported.');\r\n        }\r\n        createOrUpdateDynamicTheme(theme, fixes, isIFrame);\r\n        isDarkReaderEnabled = true;\r\n    }\r\n    function isEnabled() {\r\n        return isDarkReaderEnabled;\r\n    }\r\n    function disable() {\r\n        removeDynamicTheme();\r\n        isDarkReaderEnabled = false;\r\n    }\r\n    var darkScheme = matchMedia('(prefers-color-scheme: dark)');\r\n    var store = {\r\n        themeOptions: null,\r\n        fixes: null,\r\n    };\r\n    function handleColorScheme() {\r\n        if (darkScheme.matches) {\r\n            enable(store.themeOptions, store.fixes);\r\n        }\r\n        else {\r\n            disable();\r\n        }\r\n    }\r\n    function auto(themeOptions, fixes) {\r\n        if (themeOptions === void 0) { themeOptions = {}; }\r\n        if (fixes === void 0) { fixes = null; }\r\n        if (themeOptions) {\r\n            store = { themeOptions: themeOptions, fixes: fixes };\r\n            handleColorScheme();\r\n            if (isMatchMediaChangeEventListenerSupported) {\r\n                darkScheme.addEventListener('change', handleColorScheme);\r\n            }\r\n            else {\r\n                darkScheme.addListener(handleColorScheme);\r\n            }\r\n        }\r\n        else {\r\n            if (isMatchMediaChangeEventListenerSupported) {\r\n                darkScheme.removeEventListener('change', handleColorScheme);\r\n            }\r\n            else {\r\n                darkScheme.removeListener(handleColorScheme);\r\n            }\r\n            disable();\r\n        }\r\n    }\r\n    function exportGeneratedCSS() {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4, collectCSS()];\r\n                    case 1: return [2, _a.sent()];\r\n                }\r\n            });\r\n        });\r\n    }\r\n    var setFetchMethod = setFetchMethod$1;\n\n    exports.auto = auto;\n    exports.disable = disable;\n    exports.enable = enable;\n    exports.exportGeneratedCSS = exportGeneratedCSS;\n    exports.isEnabled = isEnabled;\n    exports.setFetchMethod = setFetchMethod;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n"]}